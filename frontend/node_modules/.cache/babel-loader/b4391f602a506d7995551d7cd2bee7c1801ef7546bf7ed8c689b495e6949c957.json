{"ast":null,"code":"var _jsxFileName = \"/Users/bsauer02/Desktop/Opis3.0/rp-exotics-unified/frontend/src/components/NewDealEntry.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Car, ArrowLeft, Save, Send, CheckCircle, Loader2, Calendar, DollarSign, User, MapPin, Phone, Mail, Hash, Palette, Gauge, Info, Plus, AlertCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NewDealEntry = () => {\n  _s();\n  const [currentUser] = useState({\n    name: 'Chris Murphy',\n    role: 'admin',\n    permissions: {\n      canCreateDeals: true,\n      canViewFinancials: true,\n      canManageDealers: true\n    }\n  });\n  const [formData, setFormData] = useState({\n    // Vehicle Information\n    vin: '',\n    year: '',\n    make: '',\n    model: '',\n    mileage: '',\n    exteriorColor: '',\n    interiorColor: '',\n    // Deal Information\n    dealType: '',\n    dealType2SubType: '',\n    // <-- Add this for Deal Type 2 sub-options\n    fundingSource: '',\n    purchaseDate: '',\n    paymentMethod: 'check',\n    // Default to 'check'\n    currentStage: 'initial-contact',\n    // Financial Information\n    purchasePrice: '',\n    listPrice: '',\n    killPrice: '',\n    wholesalePrice: '',\n    commissionRate: '',\n    brokerageFee: '',\n    brokeerageFeePaidTo: '',\n    payoffBalance: '',\n    amountDueToCustomer: '',\n    amountDueToRP: '',\n    // Seller Information\n    sellerName: '',\n    sellerCompany: '',\n    sellerAddress: '',\n    sellerPhone: '',\n    sellerEmail: '',\n    // RP Information\n    rpStockNumber: '',\n    vehicleDescription: '',\n    generalNotes: '',\n    // Documentation\n    contractRequired: false,\n    titlePresent: false,\n    driverLicensePresent: false,\n    odometerPresent: false,\n    dealerLicensePresent: false,\n    documents: [],\n    // For uploaded files\n    salesperson: ''\n  });\n  const [vinDecoding, setVinDecoding] = useState(false);\n  const [vinDecoded, setVinDecoded] = useState(false);\n  const [dealerSuggestions, setDealerSuggestions] = useState([]);\n  const [dealerBuyerSuggestions, setDealerBuyerSuggestions] = useState([]); // For Dealer Info (Buyer)\n  const [formErrors, setFormErrors] = useState({});\n  const [saving, setSaving] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [uploadingDocs, setUploadingDocs] = useState(false);\n\n  // Helper function to format currency input\n  const formatCurrency = value => {\n    if (!value) return '';\n    // Remove all non-numeric characters except decimal point\n    const numericValue = value.toString().replace(/[^\\d.]/g, '');\n    // Ensure only one decimal point\n    const parts = numericValue.split('.');\n    if (parts.length > 2) {\n      return parts[0] + '.' + parts.slice(1).join('');\n    }\n    return numericValue;\n  };\n\n  // Helper function to format currency display\n  const formatCurrencyDisplay = value => {\n    if (!value) return '';\n    const num = parseFloat(value);\n    if (isNaN(num)) return '';\n    return num.toLocaleString('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    });\n  };\n\n  // Get dynamic labels based on deal type\n  const getDynamicLabels = () => {\n    const dealType2 = formData.dealType2SubType;\n    return {\n      purchasePriceLabel: dealType2 === 'sale' ? 'Sale Price' : 'Purchase Price',\n      sellerLabel: dealType2 === 'sale' ? 'Sold To' : 'Purchased From',\n      sellerSectionTitle: dealType2 === 'sale' ? 'Buyer Information' : 'Seller Information'\n    };\n  };\n  const dynamicLabels = getDynamicLabels();\n\n  // Remove Deal Type 2 from main dealTypes\n  const dealTypes = [{\n    value: 'wholesale-d2d',\n    label: 'Wholesale - D2D'\n  }, {\n    value: 'wholesale-private',\n    label: 'Wholesale - Private Party'\n  }, {\n    value: 'wholesale-flip',\n    label: 'Wholesale - Flip'\n  }, {\n    value: 'retail-pp',\n    label: 'Retail - PP'\n  }, {\n    value: 'retail-auction',\n    label: 'Retail - Auction'\n  }, {\n    value: 'retail-dtod',\n    label: 'Retail - DtoD'\n  }, {\n    value: 'auction',\n    label: 'Auction'\n  }];\n  const fundingSources = [{\n    value: 'flpn-retail',\n    label: 'FLPN - Retail'\n  }, {\n    value: 'flpn-wholesale',\n    label: 'FLPN - Wholesale'\n  }, {\n    value: 'cash',\n    label: 'Cash'\n  }, {\n    value: 'flooring-line',\n    label: 'Flooring Line'\n  }, {\n    value: 'consignment',\n    label: 'Consignment'\n  }];\n  const paymentMethods = [{\n    value: 'check',\n    label: 'Check'\n  }, {\n    value: 'wire',\n    label: 'Wire Transfer'\n  }, {\n    value: 'ach',\n    label: 'ACH'\n  }, {\n    value: 'cash',\n    label: 'Cash'\n  }, {\n    value: 'financed',\n    label: 'Financed'\n  }];\n  const dealType2SubOptions = [{\n    value: 'buy',\n    label: 'Buy'\n  }, {\n    value: 'sale',\n    label: 'Sale'\n  }, {\n    value: 'buy-sell',\n    label: 'Buy/Sell'\n  }, {\n    value: 'consign-a',\n    label: 'Consign-A'\n  }, {\n    value: 'consign-b',\n    label: 'Consign-B'\n  }, {\n    value: 'consign-c',\n    label: 'Consign-C'\n  }, {\n    value: 'consign-rdnc',\n    label: 'Consign-RDNC'\n  }];\n\n  // Add to formData initial state\n  // This block is removed as per the edit hint.\n\n  // Add salesperson options\n  const salespersonOptions = [{\n    value: 'Brennan S',\n    label: 'Brennan S'\n  }, {\n    value: 'Parker G',\n    label: 'Parker G'\n  }, {\n    value: 'Dan M',\n    label: 'Dan M'\n  }, {\n    value: 'Adiana P',\n    label: 'Adiana P'\n  }, {\n    value: 'Brett M',\n    label: 'Brett M'\n  }, {\n    value: 'Other',\n    label: 'Other'\n  }];\n\n  // Get deal type specific fields\n  const getDealTypeFields = () => {\n    // Both dealType and dealType2SubType are always required\n    const dealType = formData.dealType;\n    return {\n      showFinancials: ['wholesale-d2d', 'wholesale-private', 'wholesale-flip', 'retail-pp', 'retail-auction', 'retail-dtod', 'auction'].includes(dealType),\n      showSellerInfo: true,\n      showDocumentation: ['wholesale-d2d', 'wholesale-private', 'wholesale-flip', 'retail-pp', 'retail-auction', 'retail-dtod', 'auction'].includes(dealType),\n      requiredFields: ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName']\n    };\n  };\n  const dealTypeFields = getDealTypeFields();\n\n  // Real VIN decode function using backend API\n  const decodeVIN = async vin => {\n    setVinDecoding(true);\n    try {\n      const response = await fetch('/api/deals/vin/decode', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          vin\n        })\n      });\n      const data = await response.json();\n      if (data.success && data.data) {\n        setFormData(prev => ({\n          ...prev,\n          year: data.data.year || '',\n          make: data.data.make || '',\n          model: data.data.model || ''\n        }));\n        setVinDecoded(true);\n        setTimeout(() => setVinDecoded(false), 3000);\n      } else {\n        console.error('VIN decode failed:', data.error);\n        alert(data.error || 'Unable to decode VIN. Please check the VIN and try again.');\n      }\n    } catch (error) {\n      console.error('VIN decode error:', error);\n      alert('VIN decode service temporarily unavailable. Please try again later.');\n    } finally {\n      setVinDecoding(false);\n    }\n  };\n\n  // Real dealer search using backend API\n  const searchDealers = async query => {\n    if (query.length < 2) {\n      setDealerSuggestions([]);\n      return;\n    }\n    // setSearchingDealers(true); // Removed unused state\n    try {\n      const response = await fetch(`/api/dealers/search?q=${encodeURIComponent(query)}`);\n      const data = await response.json();\n      setDealerSuggestions(data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerSuggestions([]);\n    } finally {\n      // setSearchingDealers(false); // Removed unused state\n    }\n  };\n\n  // Dealer search for Dealer Info (Buyer)\n  const searchDealersBuyer = async query => {\n    if (query.length < 2) {\n      setDealerBuyerSuggestions([]);\n      return;\n    }\n    try {\n      const response = await fetch(`/api/dealers/search?q=${encodeURIComponent(query)}`);\n      const data = await response.json();\n      setDealerBuyerSuggestions(data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerBuyerSuggestions([]);\n    }\n  };\n\n  // Auto-generate stock number\n  // useEffect(() => {\n  //   if (!formData.rpStockNumber && formData.year && formData.make) {\n  //     const year = new Date().getFullYear();\n  //     const stockNumber = `RP${year}${String(Math.floor(Math.random() * 9999) + 1).padStart(4, '0')}`;\n  //     setFormData(prev => ({ ...prev, rpStockNumber: stockNumber }));\n  //   }\n  // }, [formData.year, formData.make, formData.rpStockNumber]);\n\n  const handleInputChange = (field, value) => {\n    let processedValue = value;\n\n    // Handle currency formatting for financial fields\n    if (['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field)) {\n      processedValue = formatCurrency(value);\n    }\n\n    // If changing dealType, reset dealType2SubType unless still deal-type-2\n    if (field === 'dealType') {\n      setFormData(prev => ({\n        ...prev,\n        dealType: processedValue,\n        dealType2SubType: processedValue === 'deal-type-2' ? prev.dealType2SubType : ''\n      }));\n      if (currentStep > 1) setCurrentStep(1);\n      return;\n    }\n    setFormData(prev => ({\n      ...prev,\n      [field]: processedValue\n    }));\n\n    // Clear error when user starts typing\n    if (formErrors[field]) {\n      setFormErrors(prev => ({\n        ...prev,\n        [field]: null\n      }));\n    }\n\n    // Trigger VIN decode when VIN is 17 characters\n    if (field === 'vin' && processedValue.length === 17 && !vinDecoded) {\n      decodeVIN(processedValue);\n    }\n\n    // Search dealers when typing in seller field\n    if (field === 'sellerName') {\n      searchDealers(processedValue);\n    }\n\n    // Reset to step 1 when deal type changes\n    if (field === 'dealType' && currentStep > 1) {\n      setCurrentStep(1);\n    }\n  };\n\n  // Handle file uploads for documentation\n  const handleDocumentUpload = e => {\n    const files = Array.from(e.target.files);\n    setFormData(prev => ({\n      ...prev,\n      documents: [...(prev.documents || []), ...files]\n    }));\n  };\n  const handleRemoveDocument = index => {\n    setFormData(prev => ({\n      ...prev,\n      documents: prev.documents.filter((_, i) => i !== index)\n    }));\n  };\n  const validateForm = () => {\n    const errors = {};\n    const requiredFields = dealTypeFields.requiredFields || ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName'];\n    requiredFields.forEach(field => {\n      if (!formData[field] || formData[field].toString().trim() === '') {\n        errors[field] = `${field.charAt(0).toUpperCase() + field.slice(1)} is required`;\n      }\n    });\n\n    // Additional validation for specific fields\n    if (formData.vin && formData.vin.length !== 17) {\n      errors.vin = 'VIN must be exactly 17 characters';\n    }\n    if (formData.year && (formData.year < 1900 || formData.year > new Date().getFullYear() + 1)) {\n      errors.year = 'Please enter a valid year';\n    }\n    if (formData.mileage && formData.mileage < 0) {\n      errors.mileage = 'Mileage cannot be negative';\n    }\n    if (dealTypeFields.showFinancials && formData.purchasePrice && formData.purchasePrice <= 0) {\n      errors.purchasePrice = 'Purchase price must be greater than 0';\n    }\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n  const handleSave = async (isDraft = false) => {\n    if (!isDraft && !validateForm()) {\n      return;\n    }\n    setSaving(true);\n    try {\n      // First, create the deal in the backend\n      const dealData = {\n        vehicle: `${formData.year} ${formData.make} ${formData.model}`,\n        vin: formData.vin,\n        year: parseInt(formData.year),\n        make: formData.make,\n        model: formData.model,\n        rpStockNumber: formData.rpStockNumber,\n        color: formData.exteriorColor,\n        mileage: parseInt(formData.mileage) || 0,\n        purchasePrice: parseFloat(formData.purchasePrice) || 0,\n        listPrice: parseFloat(formData.listPrice) || 0,\n        killPrice: parseFloat(formData.killPrice) || 0,\n        dealType: formData.dealType.includes('retail') ? 'retail' : 'wholesale',\n        seller: {\n          name: formData.sellerName,\n          type: formData.dealType.includes('private') ? 'private' : 'dealer',\n          contact: {\n            address: formData.sellerAddress,\n            phone: formData.sellerPhone,\n            email: formData.sellerEmail\n          }\n        },\n        fundingSource: formData.fundingSource,\n        paymentMethod: formData.paymentMethod,\n        purchaseDate: formData.purchaseDate ? new Date(formData.purchaseDate) : new Date(),\n        currentStage: 'documentation',\n        salesperson: formData.salesperson\n      };\n\n      // Create deal (this would be your existing deal creation endpoint)\n      const dealResponse = await fetch('/api/deals', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(dealData)\n      });\n      if (!dealResponse.ok) {\n        throw new Error('Failed to create deal');\n      }\n      const dealResult = await dealResponse.json();\n      const dealId = dealResult.deal._id;\n\n      // Generate document and create vehicle record\n      const documentResponse = await fetch(`/api/documents/generate/${dealId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          dealType2: formData.dealType2SubType,\n          commissionRate: parseFloat(formData.commissionRate) || 0\n        })\n      });\n      if (!documentResponse.ok) {\n        throw new Error('Failed to generate document');\n      }\n      const documentResult = await documentResponse.json();\n      console.log('Deal created and document generated:', documentResult);\n\n      // Show success message with document info\n      const successMessage = isDraft ? 'Draft saved successfully!' : `Deal created successfully!\\n\\nVehicle Record ID: ${documentResult.vehicleRecord.recordId}\\nDocument: ${documentResult.document.documentNumber}\\n\\nDocument has been generated and sent to the finance team for review.`;\n      alert(successMessage);\n\n      // Optionally redirect to a success page or clear form\n      if (!isDraft) {\n        // Clear form or redirect\n        setFormData({\n          vin: '',\n          year: '',\n          make: '',\n          model: '',\n          mileage: '',\n          exteriorColor: '',\n          interiorColor: '',\n          dealType: '',\n          dealType2SubType: '',\n          fundingSource: '',\n          purchaseDate: '',\n          paymentMethod: 'check',\n          currentStage: 'initial-contact',\n          purchasePrice: '',\n          listPrice: '',\n          killPrice: '',\n          wholesalePrice: '',\n          commissionRate: '',\n          brokerageFee: '',\n          brokeerageFeePaidTo: '',\n          payoffBalance: '',\n          amountDueToCustomer: '',\n          amountDueToRP: '',\n          sellerName: '',\n          sellerCompany: '',\n          sellerAddress: '',\n          sellerPhone: '',\n          sellerEmail: '',\n          rpStockNumber: '',\n          vehicleDescription: '',\n          generalNotes: '',\n          contractRequired: false,\n          titlePresent: false,\n          driverLicensePresent: false,\n          odometerPresent: false,\n          dealerLicensePresent: false,\n          documents: [],\n          salesperson: ''\n        });\n        setCurrentStep(1);\n      }\n    } catch (error) {\n      console.error('Save error:', error);\n      alert(`Error saving deal: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleEmailToListingTeam = () => {\n    const emailBody = `New Vehicle Ready for Listing\n\nVehicle: ${formData.year} ${formData.make} ${formData.model}\nVIN: ${formData.vin}\nStock #: ${formData.rpStockNumber}\nMileage: ${formData.mileage}\nExterior: ${formData.exteriorColor}\nInterior: ${formData.interiorColor}\n\nDescription:\n${formData.vehicleDescription}\n\nPlease prepare listing materials for this vehicle.\n\nBest regards,\n${currentUser.name}`;\n    const mailtoLink = `mailto:listing@rpexotics.com?subject=New Vehicle for Listing - ${formData.year} ${formData.make} ${formData.model}&body=${encodeURIComponent(emailBody)}`;\n    window.open(mailtoLink);\n  };\n  const renderStepIndicator = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: Array.from({\n        length: totalSteps\n      }, (_, index) => {\n        const stepNumber = index + 1;\n        const isActive = currentStep === stepNumber;\n        const isCompleted = currentStep > stepNumber;\n        let stepTitle = '';\n        let stepDescription = '';\n        if (stepNumber === 1) {\n          stepTitle = 'Vehicle & Deal Type';\n          stepDescription = 'Enter vehicle information and select deal type';\n        } else if (stepNumber === 2) {\n          stepTitle = 'Deal Configuration';\n          stepDescription = 'Configure funding, payment, and timeline';\n        } else if (stepNumber === 3 && dealTypeFields.showFinancials) {\n          stepTitle = 'Financial Information';\n          stepDescription = 'Set pricing and financial terms';\n        } else if (stepNumber === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo || stepNumber === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo) {\n          stepTitle = 'Seller Information';\n          stepDescription = 'Add seller contact information';\n        } else if (stepNumber === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation || stepNumber === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation || stepNumber === 5 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation) {\n          stepTitle = 'Documentation & Notes';\n          stepDescription = 'Document status and additional notes';\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${isActive ? 'bg-blue-600 border-blue-600 text-white' : isCompleted ? 'bg-green-600 border-green-600 text-white' : 'bg-white/10 border-white/20 text-gray-400'}`,\n            children: isCompleted ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: stepNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-sm font-medium ${isActive ? 'text-white' : 'text-gray-400'}`,\n              children: stepTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: stepDescription\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 15\n          }, this), stepNumber < totalSteps && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-16 h-0.5 mx-4 ${isCompleted ? 'bg-green-600' : 'bg-white/20'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 17\n          }, this)]\n        }, stepNumber, true, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 510,\n    columnNumber: 5\n  }, this);\n  const renderFormField = (label, field, type = 'text', options = null, required = false, icon = null, isDealerBuyer = false) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"flex items-center text-sm font-medium text-gray-300\",\n      children: [icon && /*#__PURE__*/React.createElement(icon, {\n        className: \"h-4 w-4 mr-2\"\n      }), label, required && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-400 ml-1\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 7\n    }, this), type === 'select' ? /*#__PURE__*/_jsxDEV(\"select\", {\n      value: formData[field],\n      onChange: e => handleInputChange(field, e.target.value),\n      className: `w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: [\"Select \", label]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 11\n      }, this), options === null || options === void 0 ? void 0 : options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: option.value,\n        className: \"bg-gray-800\",\n        children: option.label\n      }, option.value, false, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 9\n    }, this) : type === 'textarea' ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: formData[field],\n      onChange: e => handleInputChange(field, e.target.value),\n      rows: 4,\n      placeholder: `Enter ${label.toLowerCase()}...`,\n      className: `w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none ${formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 9\n    }, this) : type === 'checkbox' ? /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"flex items-center space-x-2 cursor-pointer\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: formData[field],\n        onChange: e => handleInputChange(field, e.target.checked),\n        className: \"rounded bg-white/10 border-white/20 text-blue-500 focus:ring-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-gray-300\",\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm\",\n        children: \"$\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: type,\n        value: formData[field],\n        onChange: e => {\n          handleInputChange(field, e.target.value);\n          if (isDealerBuyer && field === 'dealerName') searchDealersBuyer(e.target.value);\n          // Only search for sellerName if not a retail deal\n          if (!isDealerBuyer && field === 'sellerName' && !['retail-pp', 'retail-auction', 'retail-dtod'].includes(formData.dealType)) searchDealers(e.target.value);\n        },\n        placeholder: `Enter ${label.toLowerCase()}...`,\n        className: `w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'} ${field === 'vin' ? 'pr-20' : ''} ${['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) ? 'text-right pl-8' : ''}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 11\n      }, this), field === 'vin' && formData.vin.length === 17 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute right-2 top-1/2 transform -translate-y-1/2\",\n        children: vinDecoding ? /*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"h-5 w-5 text-blue-400 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 17\n        }, this) : vinDecoded ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-5 w-5 text-green-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => decodeVIN(formData.vin),\n          className: \"bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded transition-colors\",\n          children: \"Decode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 13\n      }, this), isDealerBuyer && field === 'dealerName' && dealerBuyerSuggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\",\n        children: dealerBuyerSuggestions.map(dealer => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\",\n          onClick: () => {\n            setFormData(prev => {\n              var _dealer$contact;\n              return {\n                ...prev,\n                dealerName: dealer.name,\n                dealerCompany: dealer.company,\n                dealerPhone: dealer.phone,\n                dealerEmail: ((_dealer$contact = dealer.contact) === null || _dealer$contact === void 0 ? void 0 : _dealer$contact.email) || dealer.email || '',\n                dealerAddress: dealer.location || dealer.address || ''\n              };\n            });\n            setDealerBuyerSuggestions([]);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-medium text-white\",\n            children: dealer.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-400\",\n            children: [dealer.company, \" \\u2022 \", dealer.location]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 19\n          }, this)]\n        }, dealer.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 13\n      }, this), !isDealerBuyer && field === 'sellerName' && !['retail-pp', 'retail-auction', 'retail-dtod'].includes(formData.dealType) && dealerSuggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\",\n        children: dealerSuggestions.map(dealer => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\",\n          onClick: () => {\n            setFormData(prev => {\n              var _dealer$contact2;\n              return {\n                ...prev,\n                sellerName: dealer.name,\n                sellerCompany: dealer.company,\n                sellerPhone: dealer.phone,\n                sellerEmail: ((_dealer$contact2 = dealer.contact) === null || _dealer$contact2 === void 0 ? void 0 : _dealer$contact2.email) || dealer.email || ''\n              };\n            });\n            setDealerSuggestions([]);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-medium text-white\",\n            children: dealer.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-400\",\n            children: [dealer.company, \" \\u2022 \", dealer.location]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 19\n          }, this)]\n        }, dealer.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 9\n    }, this), formErrors[field] && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center text-red-400 text-sm\",\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"h-4 w-4 mr-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 11\n      }, this), formErrors[field]]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 572,\n    columnNumber: 5\n  }, this);\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: \"Deal Type Selection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 15\n            }, this), renderFormField('Deal Type', 'dealType', 'select', dealTypes, true, Car), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4\",\n              children: renderFormField('Deal Type 2', 'dealType2SubType', 'select', dealType2SubOptions, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: \"Vehicle Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: renderFormField('VIN', 'vin', 'text', null, true, Hash)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 17\n              }, this), renderFormField('Year', 'year', 'number', null, true, Calendar), renderFormField('Make', 'make', 'text', null, true), renderFormField('Model', 'model', 'text', null, true), renderFormField('Mileage', 'mileage', 'number', null, false, Gauge), renderFormField('Exterior Color', 'exteriorColor', 'text', null, false, Palette), renderFormField('Interior Color', 'interiorColor', 'text', null, false, Palette)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 11\n        }, this);\n      case 2:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: \"Deal Configuration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 748,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [renderFormField('Funding Source', 'fundingSource', 'select', fundingSources, true, DollarSign), renderFormField('Purchase/Sale Date', 'purchaseDate', 'date', null, true, Calendar), renderFormField('Payment Method', 'paymentMethod', 'select', paymentMethods, true), renderFormField('RP Stock Number', 'rpStockNumber', 'text', null, false, Hash), renderFormField('Salesperson', 'salesperson', 'select', salespersonOptions, true, User)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 749,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 11\n        }, this);\n      case 3:\n        return dealTypeFields.showFinancials ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-4\",\n            children: \"Financial Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 762,\n            columnNumber: 13\n          }, this), formData.dealType2SubType === 'sale' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign), renderFormField('Brokerage Fee', 'brokerageFee', 'number'), renderFormField('Brokerage Fee Paid To', 'brokeerageFeePaidTo', 'text'), renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number'), renderFormField('Amount Due to RP', 'amountDueToRP', 'number')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign), renderFormField('Kill Price', 'killPrice', 'number'), renderFormField('Wholesale Price', 'wholesalePrice', 'number'), renderFormField('List Price', 'listPrice', 'number'), ['consign-a', 'consign-b', 'consign-c', 'consign-rdnc'].includes(formData.dealType2SubType) ? renderFormField('Commission Rate (%)', 'commissionRate', 'number') : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [renderFormField('Brokerage Fee', 'brokerageFee', 'number'), renderFormField('Brokerage Fee Paid To', 'brokeerageFeePaidTo', 'text'), renderFormField('Payoff Balance', 'payoffBalance', 'number'), renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number'), renderFormField('Amount Due to RP', 'amountDueToRP', 'number')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 772,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n            className: \"h-12 w-12 text-gray-400 mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 797,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-2\",\n            children: \"Financial Information Not Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 798,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"This deal type does not require financial information.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 796,\n          columnNumber: 11\n        }, this);\n      case 4:\n        // Seller/Dealer Info step\n        if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10 space-y-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-white mb-4\",\n                children: \"Dealer Info (Buyer)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 809,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [renderFormField('Dealer Name', 'dealerName', 'text', null, true, User, true), renderFormField('Dealer Company', 'dealerCompany', 'text'), renderFormField('Dealer Phone', 'dealerPhone', 'tel', null, false, Phone), renderFormField('Dealer Email', 'dealerEmail', 'email', null, false, Mail), renderFormField('Dealer Address', 'dealerAddress', 'text', null, false, MapPin)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 810,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 808,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-white mb-4\",\n                children: \"Seller Info (Seller)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [renderFormField('Seller Name', 'sellerName', 'text', null, true, User), renderFormField('Seller Company', 'sellerCompany', 'text'), renderFormField('Seller Phone', 'sellerPhone', 'tel', null, false, Phone), renderFormField('Seller Email', 'sellerEmail', 'email', null, false, Mail), renderFormField('Seller Address', 'sellerAddress', 'text', null, false, MapPin)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 13\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: dynamicLabels.sellerSectionTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 833,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: renderFormField(dynamicLabels.sellerLabel, 'sellerName', 'text', null, true, User)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 835,\n                columnNumber: 17\n              }, this), renderFormField('Company/Dealer', 'sellerCompany', 'text'), renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone), renderFormField('Email', 'sellerEmail', 'email', null, false, Mail), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: renderFormField('Address', 'sellerAddress', 'text', null, false, MapPin)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 834,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 832,\n            columnNumber: 13\n          }, this);\n        }\n      case 5:\n        return dealTypeFields.showDocumentation ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-4\",\n            children: \"Documentation & Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-md font-medium text-white mb-4\",\n                  children: \"Documentation Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 856,\n                  columnNumber: 19\n                }, this), renderFormField('Contract Required', 'contractRequired', 'checkbox'), renderFormField('Title Present', 'titlePresent', 'checkbox'), renderFormField('Driver License Present', 'driverLicensePresent', 'checkbox'), renderFormField('Odometer Present', 'odometerPresent', 'checkbox'), renderFormField('Dealer License Present', 'dealerLicensePresent', 'checkbox')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 855,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4\",\n                children: [renderFormField('Vehicle Description', 'vehicleDescription', 'textarea', null, false, Info), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-white mb-2\",\n                    children: \"Upload Documents/Photos\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 867,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    multiple: true,\n                    accept: \"image/*,application/pdf\",\n                    onChange: handleDocumentUpload,\n                    className: \"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 868,\n                    columnNumber: 21\n                  }, this), formData.documents && formData.documents.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 space-y-2\",\n                    children: formData.documents.map((file, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-3 bg-white/10 rounded p-2\",\n                      children: [file.type && file.type.startsWith('image') ? /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: URL.createObjectURL(file),\n                        alt: file.name,\n                        className: \"h-12 w-12 object-cover rounded\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 881,\n                        columnNumber: 31\n                      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-block w-12 h-12 bg-gray-700 text-white flex items-center justify-center rounded\",\n                        children: \"PDF\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 883,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-sm truncate max-w-xs\",\n                        children: file.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 885,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"ml-auto text-red-400 hover:text-red-600 text-xs font-medium\",\n                        onClick: () => handleRemoveDocument(idx),\n                        children: \"Remove\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 886,\n                        columnNumber: 29\n                      }, this)]\n                    }, idx, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 879,\n                      columnNumber: 27\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 877,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 866,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 863,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 854,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: renderFormField('General Notes', 'generalNotes', 'textarea', null, false, Info)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 900,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(Info, {\n            className: \"h-12 w-12 text-gray-400 mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 907,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-2\",\n            children: \"Documentation Not Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 908,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"This deal type does not require documentation tracking.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 909,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 906,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n\n  // Calculate total steps based on deal type\n  const getTotalSteps = () => {\n    let steps = 2; // Always have vehicle info and deal config\n    if (dealTypeFields.showFinancials) steps++;\n    if (dealTypeFields.showSellerInfo) steps++;\n    if (dealTypeFields.showDocumentation) steps++;\n    return steps;\n  };\n  const totalSteps = getTotalSteps();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 overflow-hidden pointer-events-none\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 933,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 934,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 932,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"relative bg-black/20 backdrop-blur-md border-b border-white/10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.history.back(),\n              className: \"mr-4 p-2 bg-white/10 hover:bg-white/20 rounded-lg border border-white/20 transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                className: \"h-5 w-5 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 946,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 942,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-3 mr-4 shadow-lg shadow-blue-500/25\",\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"h-6 w-6 text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 950,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 949,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-xl font-bold text-white\",\n                  children: \"New Deal Entry\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 953,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-300 text-sm\",\n                  children: \"Create a new vehicle deal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 954,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 952,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 948,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSave(true),\n              disabled: saving,\n              className: \"flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-colors disabled:opacity-50\",\n              children: [saving ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 965,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(Save, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 965,\n                columnNumber: 79\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 960,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSave(false),\n              disabled: saving,\n              className: \"flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg shadow-lg transition-colors disabled:opacity-50\",\n              children: [saving ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 79\n              }, this), \"Create Deal\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 969,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 959,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 939,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 938,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative max-w-6xl mx-auto px-6 py-8\",\n      children: [renderStepIndicator(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-2\",\n            children: [currentStep === 1 && 'Vehicle Information & Deal Type', currentStep === 2 && 'Deal Configuration', currentStep === 3 && dealTypeFields.showFinancials && 'Financial Information', currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information', currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes', currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information', currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes', currentStep === 5 && 'Documentation & Notes']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 989,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-300\",\n            children: [currentStep === 1 && 'Enter basic vehicle information and select the deal type', currentStep === 2 && 'Configure deal type, funding, and timeline', currentStep === 3 && dealTypeFields.showFinancials && 'Set pricing and financial terms', currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information', currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes', currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information', currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes', currentStep === 5 && 'Document status and additional notes']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 999,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 988,\n          columnNumber: 11\n        }, this), renderStep(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mt-8 pt-6 border-t border-white/10\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCurrentStep(Math.max(1, currentStep - 1)),\n            disabled: currentStep === 1,\n            className: \"flex items-center px-4 py-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"h-4 w-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1020,\n              columnNumber: 15\n            }, this), \"Previous\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1015,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [currentStep === totalSteps && formData.vehicleDescription && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleEmailToListingTeam,\n              className: \"flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(Send, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1030,\n                columnNumber: 19\n              }, this), \"Email to Listing Team\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1026,\n              columnNumber: 17\n            }, this), currentStep < totalSteps ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCurrentStep(Math.min(totalSteps, currentStep + 1)),\n              className: \"flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg transition-colors\",\n              children: [\"Next\", /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                className: \"h-4 w-4 ml-2 rotate-180\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1041,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSave(false),\n              disabled: saving,\n              className: \"flex items-center px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg transition-colors disabled:opacity-50\",\n              children: [saving ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1049,\n                columnNumber: 29\n              }, this) : /*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1049,\n                columnNumber: 81\n              }, this), \"Complete Deal\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1044,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1024,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1014,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 987,\n        columnNumber: 9\n      }, this), vinDecoding && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed bottom-6 right-6 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"h-4 w-4 mr-2 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 13\n        }, this), \"Decoding VIN...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 11\n      }, this), vinDecoded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed bottom-6 right-6 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-4 w-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1067,\n          columnNumber: 13\n        }, this), \"VIN decoded successfully!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1066,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 982,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 930,\n    columnNumber: 5\n  }, this);\n};\n_s(NewDealEntry, \"mKJZKyzmqwC/7hxIS62D7him+W0=\");\n_c = NewDealEntry;\nexport default NewDealEntry;\nvar _c;\n$RefreshReg$(_c, \"NewDealEntry\");","map":{"version":3,"names":["React","useState","useEffect","Car","ArrowLeft","Save","Send","CheckCircle","Loader2","Calendar","DollarSign","User","MapPin","Phone","Mail","Hash","Palette","Gauge","Info","Plus","AlertCircle","jsxDEV","_jsxDEV","NewDealEntry","_s","currentUser","name","role","permissions","canCreateDeals","canViewFinancials","canManageDealers","formData","setFormData","vin","year","make","model","mileage","exteriorColor","interiorColor","dealType","dealType2SubType","fundingSource","purchaseDate","paymentMethod","currentStage","purchasePrice","listPrice","killPrice","wholesalePrice","commissionRate","brokerageFee","brokeerageFeePaidTo","payoffBalance","amountDueToCustomer","amountDueToRP","sellerName","sellerCompany","sellerAddress","sellerPhone","sellerEmail","rpStockNumber","vehicleDescription","generalNotes","contractRequired","titlePresent","driverLicensePresent","odometerPresent","dealerLicensePresent","documents","salesperson","vinDecoding","setVinDecoding","vinDecoded","setVinDecoded","dealerSuggestions","setDealerSuggestions","dealerBuyerSuggestions","setDealerBuyerSuggestions","formErrors","setFormErrors","saving","setSaving","currentStep","setCurrentStep","uploadingDocs","setUploadingDocs","formatCurrency","value","numericValue","toString","replace","parts","split","length","slice","join","formatCurrencyDisplay","num","parseFloat","isNaN","toLocaleString","style","currency","minimumFractionDigits","maximumFractionDigits","getDynamicLabels","dealType2","purchasePriceLabel","sellerLabel","sellerSectionTitle","dynamicLabels","dealTypes","label","fundingSources","paymentMethods","dealType2SubOptions","salespersonOptions","getDealTypeFields","showFinancials","includes","showSellerInfo","showDocumentation","requiredFields","dealTypeFields","decodeVIN","response","fetch","method","headers","body","JSON","stringify","data","json","success","prev","setTimeout","console","error","alert","searchDealers","query","encodeURIComponent","dealers","searchDealersBuyer","handleInputChange","field","processedValue","handleDocumentUpload","e","files","Array","from","target","handleRemoveDocument","index","filter","_","i","validateForm","errors","forEach","trim","charAt","toUpperCase","Date","getFullYear","Object","keys","handleSave","isDraft","dealData","vehicle","parseInt","color","seller","type","contact","address","phone","email","dealResponse","ok","Error","dealResult","dealId","deal","_id","documentResponse","documentResult","log","successMessage","vehicleRecord","recordId","document","documentNumber","message","handleEmailToListingTeam","emailBody","mailtoLink","window","open","renderStepIndicator","className","children","totalSteps","stepNumber","isActive","isCompleted","stepTitle","stepDescription","fileName","_jsxFileName","lineNumber","columnNumber","renderFormField","options","required","icon","isDealerBuyer","createElement","onChange","map","option","rows","placeholder","toLowerCase","checked","onClick","dealer","_dealer$contact","dealerName","dealerCompany","company","dealerPhone","dealerEmail","dealerAddress","location","id","_dealer$contact2","renderStep","multiple","accept","file","idx","startsWith","src","URL","createObjectURL","alt","getTotalSteps","steps","history","back","disabled","Math","max","min","_c","$RefreshReg$"],"sources":["/Users/bsauer02/Desktop/Opis3.0/rp-exotics-unified/frontend/src/components/NewDealEntry.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Car, ArrowLeft, Save, Send, CheckCircle, Loader2, \n  Calendar, DollarSign, User, \n  MapPin, Phone, Mail, Hash, Palette, Gauge, \n  Info, Plus, AlertCircle \n} from 'lucide-react';\n\nconst NewDealEntry = () => {\n  const [currentUser] = useState({\n    name: 'Chris Murphy',\n    role: 'admin',\n    permissions: {\n      canCreateDeals: true,\n      canViewFinancials: true,\n      canManageDealers: true\n    }\n  });\n\n  const [formData, setFormData] = useState({\n    // Vehicle Information\n    vin: '',\n    year: '',\n    make: '',\n    model: '',\n    mileage: '',\n    exteriorColor: '',\n    interiorColor: '',\n    \n    // Deal Information\n    dealType: '',\n    dealType2SubType: '', // <-- Add this for Deal Type 2 sub-options\n    fundingSource: '',\n    purchaseDate: '',\n    paymentMethod: 'check', // Default to 'check'\n    currentStage: 'initial-contact',\n    \n    // Financial Information\n    purchasePrice: '',\n    listPrice: '',\n    killPrice: '',\n    wholesalePrice: '',\n    commissionRate: '',\n    brokerageFee: '',\n    brokeerageFeePaidTo: '',\n    payoffBalance: '',\n    amountDueToCustomer: '',\n    amountDueToRP: '',\n    \n    // Seller Information\n    sellerName: '',\n    sellerCompany: '',\n    sellerAddress: '',\n    sellerPhone: '',\n    sellerEmail: '',\n    \n    // RP Information\n    rpStockNumber: '',\n    vehicleDescription: '',\n    generalNotes: '',\n    \n    // Documentation\n    contractRequired: false,\n    titlePresent: false,\n    driverLicensePresent: false,\n    odometerPresent: false,\n    dealerLicensePresent: false,\n    documents: [], // For uploaded files\n    salesperson: ''\n  });\n\n  const [vinDecoding, setVinDecoding] = useState(false);\n  const [vinDecoded, setVinDecoded] = useState(false);\n  const [dealerSuggestions, setDealerSuggestions] = useState([]);\n  const [dealerBuyerSuggestions, setDealerBuyerSuggestions] = useState([]); // For Dealer Info (Buyer)\n  const [formErrors, setFormErrors] = useState({});\n  const [saving, setSaving] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [uploadingDocs, setUploadingDocs] = useState(false);\n\n  // Helper function to format currency input\n  const formatCurrency = (value) => {\n    if (!value) return '';\n    // Remove all non-numeric characters except decimal point\n    const numericValue = value.toString().replace(/[^\\d.]/g, '');\n    // Ensure only one decimal point\n    const parts = numericValue.split('.');\n    if (parts.length > 2) {\n      return parts[0] + '.' + parts.slice(1).join('');\n    }\n    return numericValue;\n  };\n\n  // Helper function to format currency display\n  const formatCurrencyDisplay = (value) => {\n    if (!value) return '';\n    const num = parseFloat(value);\n    if (isNaN(num)) return '';\n    return num.toLocaleString('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    });\n  };\n\n  // Get dynamic labels based on deal type\n  const getDynamicLabels = () => {\n    const dealType2 = formData.dealType2SubType;\n    \n    return {\n      purchasePriceLabel: dealType2 === 'sale' ? 'Sale Price' : 'Purchase Price',\n      sellerLabel: dealType2 === 'sale' ? 'Sold To' : 'Purchased From',\n      sellerSectionTitle: dealType2 === 'sale' ? 'Buyer Information' : 'Seller Information'\n    };\n  };\n\n  const dynamicLabels = getDynamicLabels();\n\n  // Remove Deal Type 2 from main dealTypes\n  const dealTypes = [\n    { value: 'wholesale-d2d', label: 'Wholesale - D2D' },\n    { value: 'wholesale-private', label: 'Wholesale - Private Party' },\n    { value: 'wholesale-flip', label: 'Wholesale - Flip' },\n    { value: 'retail-pp', label: 'Retail - PP' },\n    { value: 'retail-auction', label: 'Retail - Auction' },\n    { value: 'retail-dtod', label: 'Retail - DtoD' },\n    { value: 'auction', label: 'Auction' }\n  ];\n\n  const fundingSources = [\n    { value: 'flpn-retail', label: 'FLPN - Retail' },\n    { value: 'flpn-wholesale', label: 'FLPN - Wholesale' },\n    { value: 'cash', label: 'Cash' },\n    { value: 'flooring-line', label: 'Flooring Line' },\n    { value: 'consignment', label: 'Consignment' }\n  ];\n\n  const paymentMethods = [\n    { value: 'check', label: 'Check' },\n    { value: 'wire', label: 'Wire Transfer' },\n    { value: 'ach', label: 'ACH' },\n    { value: 'cash', label: 'Cash' },\n    { value: 'financed', label: 'Financed' }\n  ];\n\n  const dealType2SubOptions = [\n    { value: 'buy', label: 'Buy' },\n    { value: 'sale', label: 'Sale' },\n    { value: 'buy-sell', label: 'Buy/Sell' },\n    { value: 'consign-a', label: 'Consign-A' },\n    { value: 'consign-b', label: 'Consign-B' },\n    { value: 'consign-c', label: 'Consign-C' },\n    { value: 'consign-rdnc', label: 'Consign-RDNC' }\n  ];\n\n  // Add to formData initial state\n  // This block is removed as per the edit hint.\n\n  // Add salesperson options\n  const salespersonOptions = [\n    { value: 'Brennan S', label: 'Brennan S' },\n    { value: 'Parker G', label: 'Parker G' },\n    { value: 'Dan M', label: 'Dan M' },\n    { value: 'Adiana P', label: 'Adiana P' },\n    { value: 'Brett M', label: 'Brett M' },\n    { value: 'Other', label: 'Other' }\n  ];\n\n  // Get deal type specific fields\n  const getDealTypeFields = () => {\n    // Both dealType and dealType2SubType are always required\n    const dealType = formData.dealType;\n    return {\n      showFinancials: [\n        'wholesale-d2d', 'wholesale-private', 'wholesale-flip',\n        'retail-pp', 'retail-auction', 'retail-dtod', 'auction'\n      ].includes(dealType),\n      showSellerInfo: true,\n      showDocumentation: [\n        'wholesale-d2d', 'wholesale-private', 'wholesale-flip',\n        'retail-pp', 'retail-auction', 'retail-dtod', 'auction'\n      ].includes(dealType),\n      requiredFields: ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName']\n    };\n  };\n\n  const dealTypeFields = getDealTypeFields();\n\n  // Real VIN decode function using backend API\n  const decodeVIN = async (vin) => {\n    setVinDecoding(true);\n    try {\n      const response = await fetch('/api/deals/vin/decode', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ vin })\n      });\n      \n      const data = await response.json();\n      \n      if (data.success && data.data) {\n        setFormData(prev => ({\n          ...prev,\n          year: data.data.year || '',\n          make: data.data.make || '',\n          model: data.data.model || ''\n        }));\n        \n        setVinDecoded(true);\n        setTimeout(() => setVinDecoded(false), 3000);\n      } else {\n        console.error('VIN decode failed:', data.error);\n        alert(data.error || 'Unable to decode VIN. Please check the VIN and try again.');\n      }\n    } catch (error) {\n      console.error('VIN decode error:', error);\n      alert('VIN decode service temporarily unavailable. Please try again later.');\n    } finally {\n      setVinDecoding(false);\n    }\n  };\n\n  // Real dealer search using backend API\n  const searchDealers = async (query) => {\n    if (query.length < 2) {\n      setDealerSuggestions([]);\n      return;\n    }\n    // setSearchingDealers(true); // Removed unused state\n    try {\n      const response = await fetch(`/api/dealers/search?q=${encodeURIComponent(query)}`);\n      const data = await response.json();\n      setDealerSuggestions(data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerSuggestions([]);\n    } finally {\n      // setSearchingDealers(false); // Removed unused state\n    }\n  };\n\n  // Dealer search for Dealer Info (Buyer)\n  const searchDealersBuyer = async (query) => {\n    if (query.length < 2) {\n      setDealerBuyerSuggestions([]);\n      return;\n    }\n    try {\n      const response = await fetch(`/api/dealers/search?q=${encodeURIComponent(query)}`);\n      const data = await response.json();\n      setDealerBuyerSuggestions(data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerBuyerSuggestions([]);\n    }\n  };\n\n  // Auto-generate stock number\n  // useEffect(() => {\n  //   if (!formData.rpStockNumber && formData.year && formData.make) {\n  //     const year = new Date().getFullYear();\n  //     const stockNumber = `RP${year}${String(Math.floor(Math.random() * 9999) + 1).padStart(4, '0')}`;\n  //     setFormData(prev => ({ ...prev, rpStockNumber: stockNumber }));\n  //   }\n  // }, [formData.year, formData.make, formData.rpStockNumber]);\n\n  const handleInputChange = (field, value) => {\n    let processedValue = value;\n    \n    // Handle currency formatting for financial fields\n    if (['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field)) {\n      processedValue = formatCurrency(value);\n    }\n    \n    // If changing dealType, reset dealType2SubType unless still deal-type-2\n    if (field === 'dealType') {\n      setFormData(prev => ({\n        ...prev,\n        dealType: processedValue,\n        dealType2SubType: processedValue === 'deal-type-2' ? prev.dealType2SubType : ''\n      }));\n      if (currentStep > 1) setCurrentStep(1);\n      return;\n    }\n    \n    setFormData(prev => ({ ...prev, [field]: processedValue }));\n    \n    // Clear error when user starts typing\n    if (formErrors[field]) {\n      setFormErrors(prev => ({ ...prev, [field]: null }));\n    }\n    \n    // Trigger VIN decode when VIN is 17 characters\n    if (field === 'vin' && processedValue.length === 17 && !vinDecoded) {\n      decodeVIN(processedValue);\n    }\n    \n    // Search dealers when typing in seller field\n    if (field === 'sellerName') {\n      searchDealers(processedValue);\n    }\n\n    // Reset to step 1 when deal type changes\n    if (field === 'dealType' && currentStep > 1) {\n      setCurrentStep(1);\n    }\n  };\n\n  // Handle file uploads for documentation\n  const handleDocumentUpload = (e) => {\n    const files = Array.from(e.target.files);\n    setFormData(prev => ({\n      ...prev,\n      documents: [...(prev.documents || []), ...files]\n    }));\n  };\n  const handleRemoveDocument = (index) => {\n    setFormData(prev => ({\n      ...prev,\n      documents: prev.documents.filter((_, i) => i !== index)\n    }));\n  };\n\n  const validateForm = () => {\n    const errors = {};\n    const requiredFields = dealTypeFields.requiredFields || ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName'];\n    \n    requiredFields.forEach(field => {\n      if (!formData[field] || formData[field].toString().trim() === '') {\n        errors[field] = `${field.charAt(0).toUpperCase() + field.slice(1)} is required`;\n      }\n    });\n\n    // Additional validation for specific fields\n    if (formData.vin && formData.vin.length !== 17) {\n      errors.vin = 'VIN must be exactly 17 characters';\n    }\n\n    if (formData.year && (formData.year < 1900 || formData.year > new Date().getFullYear() + 1)) {\n      errors.year = 'Please enter a valid year';\n    }\n\n    if (formData.mileage && formData.mileage < 0) {\n      errors.mileage = 'Mileage cannot be negative';\n    }\n\n    if (dealTypeFields.showFinancials && formData.purchasePrice && formData.purchasePrice <= 0) {\n      errors.purchasePrice = 'Purchase price must be greater than 0';\n    }\n\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSave = async (isDraft = false) => {\n    if (!isDraft && !validateForm()) {\n      return;\n    }\n    \n    setSaving(true);\n    \n    try {\n      // First, create the deal in the backend\n      const dealData = {\n        vehicle: `${formData.year} ${formData.make} ${formData.model}`,\n        vin: formData.vin,\n        year: parseInt(formData.year),\n        make: formData.make,\n        model: formData.model,\n        rpStockNumber: formData.rpStockNumber,\n        color: formData.exteriorColor,\n        mileage: parseInt(formData.mileage) || 0,\n        purchasePrice: parseFloat(formData.purchasePrice) || 0,\n        listPrice: parseFloat(formData.listPrice) || 0,\n        killPrice: parseFloat(formData.killPrice) || 0,\n        dealType: formData.dealType.includes('retail') ? 'retail' : 'wholesale',\n        seller: {\n          name: formData.sellerName,\n          type: formData.dealType.includes('private') ? 'private' : 'dealer',\n          contact: {\n            address: formData.sellerAddress,\n            phone: formData.sellerPhone,\n            email: formData.sellerEmail\n          }\n        },\n        fundingSource: formData.fundingSource,\n        paymentMethod: formData.paymentMethod,\n        purchaseDate: formData.purchaseDate ? new Date(formData.purchaseDate) : new Date(),\n        currentStage: 'documentation',\n        salesperson: formData.salesperson\n      };\n\n      // Create deal (this would be your existing deal creation endpoint)\n      const dealResponse = await fetch('/api/deals', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(dealData)\n      });\n\n      if (!dealResponse.ok) {\n        throw new Error('Failed to create deal');\n      }\n\n      const dealResult = await dealResponse.json();\n      const dealId = dealResult.deal._id;\n\n      // Generate document and create vehicle record\n      const documentResponse = await fetch(`/api/documents/generate/${dealId}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          dealType2: formData.dealType2SubType,\n          commissionRate: parseFloat(formData.commissionRate) || 0\n        })\n      });\n\n      if (!documentResponse.ok) {\n        throw new Error('Failed to generate document');\n      }\n\n      const documentResult = await documentResponse.json();\n      \n      console.log('Deal created and document generated:', documentResult);\n      \n      // Show success message with document info\n      const successMessage = isDraft \n        ? 'Draft saved successfully!' \n        : `Deal created successfully!\\n\\nVehicle Record ID: ${documentResult.vehicleRecord.recordId}\\nDocument: ${documentResult.document.documentNumber}\\n\\nDocument has been generated and sent to the finance team for review.`;\n      \n      alert(successMessage);\n      \n      // Optionally redirect to a success page or clear form\n      if (!isDraft) {\n        // Clear form or redirect\n        setFormData({\n          vin: '',\n          year: '',\n          make: '',\n          model: '',\n          mileage: '',\n          exteriorColor: '',\n          interiorColor: '',\n          dealType: '',\n          dealType2SubType: '',\n          fundingSource: '',\n          purchaseDate: '',\n          paymentMethod: 'check',\n          currentStage: 'initial-contact',\n          purchasePrice: '',\n          listPrice: '',\n          killPrice: '',\n          wholesalePrice: '',\n          commissionRate: '',\n          brokerageFee: '',\n          brokeerageFeePaidTo: '',\n          payoffBalance: '',\n          amountDueToCustomer: '',\n          amountDueToRP: '',\n          sellerName: '',\n          sellerCompany: '',\n          sellerAddress: '',\n          sellerPhone: '',\n          sellerEmail: '',\n          rpStockNumber: '',\n          vehicleDescription: '',\n          generalNotes: '',\n          contractRequired: false,\n          titlePresent: false,\n          driverLicensePresent: false,\n          odometerPresent: false,\n          dealerLicensePresent: false,\n          documents: [],\n          salesperson: ''\n        });\n        setCurrentStep(1);\n      }\n      \n    } catch (error) {\n      console.error('Save error:', error);\n      alert(`Error saving deal: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleEmailToListingTeam = () => {\n    const emailBody = `New Vehicle Ready for Listing\n\nVehicle: ${formData.year} ${formData.make} ${formData.model}\nVIN: ${formData.vin}\nStock #: ${formData.rpStockNumber}\nMileage: ${formData.mileage}\nExterior: ${formData.exteriorColor}\nInterior: ${formData.interiorColor}\n\nDescription:\n${formData.vehicleDescription}\n\nPlease prepare listing materials for this vehicle.\n\nBest regards,\n${currentUser.name}`;\n\n    const mailtoLink = `mailto:listing@rpexotics.com?subject=New Vehicle for Listing - ${formData.year} ${formData.make} ${formData.model}&body=${encodeURIComponent(emailBody)}`;\n    window.open(mailtoLink);\n  };\n\n  const renderStepIndicator = () => (\n    <div className=\"mb-8\">\n      <div className=\"flex items-center justify-between\">\n        {Array.from({ length: totalSteps }, (_, index) => {\n          const stepNumber = index + 1;\n          const isActive = currentStep === stepNumber;\n          const isCompleted = currentStep > stepNumber;\n          \n          let stepTitle = '';\n          let stepDescription = '';\n          \n          if (stepNumber === 1) {\n            stepTitle = 'Vehicle & Deal Type';\n            stepDescription = 'Enter vehicle information and select deal type';\n          } else if (stepNumber === 2) {\n            stepTitle = 'Deal Configuration';\n            stepDescription = 'Configure funding, payment, and timeline';\n          } else if (stepNumber === 3 && dealTypeFields.showFinancials) {\n            stepTitle = 'Financial Information';\n            stepDescription = 'Set pricing and financial terms';\n          } else if ((stepNumber === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo) || \n                     (stepNumber === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo)) {\n            stepTitle = 'Seller Information';\n            stepDescription = 'Add seller contact information';\n          } else if ((stepNumber === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation) ||\n                     (stepNumber === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation) ||\n                     (stepNumber === 5 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation)) {\n            stepTitle = 'Documentation & Notes';\n            stepDescription = 'Document status and additional notes';\n          }\n          \n          return (\n            <div key={stepNumber} className=\"flex items-center\">\n              <div className={`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${\n                isActive \n                  ? 'bg-blue-600 border-blue-600 text-white' \n                  : isCompleted \n                    ? 'bg-green-600 border-green-600 text-white' \n                    : 'bg-white/10 border-white/20 text-gray-400'\n              }`}>\n                {isCompleted ? (\n                  <CheckCircle className=\"h-5 w-5\" />\n                ) : (\n                  <span className=\"text-sm font-medium\">{stepNumber}</span>\n                )}\n              </div>\n              <div className=\"ml-3\">\n                <p className={`text-sm font-medium ${isActive ? 'text-white' : 'text-gray-400'}`}>\n                  {stepTitle}\n                </p>\n                <p className=\"text-xs text-gray-500\">{stepDescription}</p>\n              </div>\n              {stepNumber < totalSteps && (\n                <div className={`w-16 h-0.5 mx-4 ${isCompleted ? 'bg-green-600' : 'bg-white/20'}`} />\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n\n  const renderFormField = (label, field, type = 'text', options = null, required = false, icon = null, isDealerBuyer = false) => (\n    <div className=\"space-y-2\">\n      <label className=\"flex items-center text-sm font-medium text-gray-300\">\n        {icon && React.createElement(icon, { className: \"h-4 w-4 mr-2\" })}\n        {label}\n        {required && <span className=\"text-red-400 ml-1\">*</span>}\n      </label>\n      \n      {type === 'select' ? (\n        <select\n          value={formData[field]}\n          onChange={(e) => handleInputChange(field, e.target.value)}\n          className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\n            formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n          }`}\n        >\n          <option value=\"\">Select {label}</option>\n          {options?.map(option => (\n            <option key={option.value} value={option.value} className=\"bg-gray-800\">\n              {option.label}\n            </option>\n          ))}\n        </select>\n      ) : type === 'textarea' ? (\n        <textarea\n          value={formData[field]}\n          onChange={(e) => handleInputChange(field, e.target.value)}\n          rows={4}\n          placeholder={`Enter ${label.toLowerCase()}...`}\n          className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none ${\n            formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n          }`}\n        />\n      ) : type === 'checkbox' ? (\n        <label className=\"flex items-center space-x-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={formData[field]}\n            onChange={(e) => handleInputChange(field, e.target.checked)}\n            className=\"rounded bg-white/10 border-white/20 text-blue-500 focus:ring-blue-500\"\n          />\n          <span className=\"text-gray-300\">{label}</span>\n        </label>\n      ) : (\n        <div className=\"relative\">\n          {['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) && (\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm\">$</div>\n          )}\n          <input\n            type={type}\n            value={formData[field]}\n            onChange={(e) => {\n              handleInputChange(field, e.target.value);\n              if (isDealerBuyer && field === 'dealerName') searchDealersBuyer(e.target.value);\n              // Only search for sellerName if not a retail deal\n              if (!isDealerBuyer && field === 'sellerName' && !['retail-pp','retail-auction','retail-dtod'].includes(formData.dealType)) searchDealers(e.target.value);\n            }}\n            placeholder={`Enter ${label.toLowerCase()}...`}\n            className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\n              formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n            } ${field === 'vin' ? 'pr-20' : ''} ${['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) ? 'text-right pl-8' : ''}`}\n          />\n          \n          {field === 'vin' && formData.vin.length === 17 && (\n            <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2\">\n              {vinDecoding ? (\n                <Loader2 className=\"h-5 w-5 text-blue-400 animate-spin\" />\n              ) : vinDecoded ? (\n                <CheckCircle className=\"h-5 w-5 text-green-400\" />\n              ) : (\n                <button\n                  onClick={() => decodeVIN(formData.vin)}\n                  className=\"bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded transition-colors\"\n                >\n                  Decode\n                </button>\n              )}\n            </div>\n          )}\n          \n          {/* Dealer Buyer Autocomplete */}\n          {isDealerBuyer && field === 'dealerName' && dealerBuyerSuggestions.length > 0 && (\n            <div className=\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\">\n              {dealerBuyerSuggestions.map(dealer => (\n                <div\n                  key={dealer.id}\n                  className=\"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\"\n                  onClick={() => {\n                    setFormData(prev => ({\n                      ...prev,\n                      dealerName: dealer.name,\n                      dealerCompany: dealer.company,\n                      dealerPhone: dealer.phone,\n                      dealerEmail: dealer.contact?.email || dealer.email || '',\n                      dealerAddress: dealer.location || dealer.address || ''\n                    }));\n                    setDealerBuyerSuggestions([]);\n                  }}\n                >\n                  <div className=\"font-medium text-white\">{dealer.name}</div>\n                  <div className=\"text-sm text-gray-400\">{dealer.company} • {dealer.location}</div>\n                </div>\n              ))}\n            </div>\n          )}\n          {/* Seller Autocomplete (only for non-retail deals) */}\n          {!isDealerBuyer && field === 'sellerName' && !['retail-pp','retail-auction','retail-dtod'].includes(formData.dealType) && dealerSuggestions.length > 0 && (\n            <div className=\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\">\n              {dealerSuggestions.map(dealer => (\n                <div\n                  key={dealer.id}\n                  className=\"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\"\n                  onClick={() => {\n                    setFormData(prev => ({\n                      ...prev,\n                      sellerName: dealer.name,\n                      sellerCompany: dealer.company,\n                      sellerPhone: dealer.phone,\n                      sellerEmail: dealer.contact?.email || dealer.email || ''\n                    }));\n                    setDealerSuggestions([]);\n                  }}\n                >\n                  <div className=\"font-medium text-white\">{dealer.name}</div>\n                  <div className=\"text-sm text-gray-400\">{dealer.company} • {dealer.location}</div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n      \n      {formErrors[field] && (\n        <div className=\"flex items-center text-red-400 text-sm\">\n          <AlertCircle className=\"h-4 w-4 mr-1\" />\n          {formErrors[field]}\n        </div>\n      )}\n    </div>\n  );\n\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6\">\n            {/* Deal Type Selection */}\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">Deal Type Selection</h3>\n              {renderFormField('Deal Type', 'dealType', 'select', dealTypes, true, Car)}\n              <div className=\"mt-4\">\n                {renderFormField('Deal Type 2', 'dealType2SubType', 'select', dealType2SubOptions, true)}\n              </div>\n            </div>\n            {/* Vehicle Information */}\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">Vehicle Information</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"md:col-span-2\">\n                  {renderFormField('VIN', 'vin', 'text', null, true, Hash)}\n                </div>\n                {renderFormField('Year', 'year', 'number', null, true, Calendar)}\n                {renderFormField('Make', 'make', 'text', null, true)}\n                {renderFormField('Model', 'model', 'text', null, true)}\n                {renderFormField('Mileage', 'mileage', 'number', null, false, Gauge)}\n                {renderFormField('Exterior Color', 'exteriorColor', 'text', null, false, Palette)}\n                {renderFormField('Interior Color', 'interiorColor', 'text', null, false, Palette)}\n              </div>\n            </div>\n          </div>\n        );\n      \n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            {/* Deal Configuration */}\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">Deal Configuration</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {renderFormField('Funding Source', 'fundingSource', 'select', fundingSources, true, DollarSign)}\n                {renderFormField('Purchase/Sale Date', 'purchaseDate', 'date', null, true, Calendar)}\n                {renderFormField('Payment Method', 'paymentMethod', 'select', paymentMethods, true)}\n                {renderFormField('RP Stock Number', 'rpStockNumber', 'text', null, false, Hash)}\n                {renderFormField('Salesperson', 'salesperson', 'select', salespersonOptions, true, User)}\n              </div>\n            </div>\n          </div>\n        );\n      case 3:\n        return dealTypeFields.showFinancials ? (\n          <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n            <h3 className=\"text-lg font-medium text-white mb-4\">Financial Information</h3>\n            {formData.dealType2SubType === 'sale' ? (\n              <div className=\"space-y-6\">\n                {renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign)}\n                {renderFormField('Brokerage Fee', 'brokerageFee', 'number')}\n                {renderFormField('Brokerage Fee Paid To', 'brokeerageFeePaidTo', 'text')}\n                {renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number')}\n                {renderFormField('Amount Due to RP', 'amountDueToRP', 'number')}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {/* Left column */}\n                <div className=\"space-y-6\">\n                  {renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign)}\n                  {renderFormField('Kill Price', 'killPrice', 'number')}\n                  {renderFormField('Wholesale Price', 'wholesalePrice', 'number')}\n                  {renderFormField('List Price', 'listPrice', 'number')}\n                  {/* Only show Commission Rate for consign deals, otherwise keep layout clean */}\n                  {['consign-a','consign-b','consign-c','consign-rdnc'].includes(formData.dealType2SubType)\n                    ? renderFormField('Commission Rate (%)', 'commissionRate', 'number')\n                    : null}\n                </div>\n                {/* Right column */}\n                <div className=\"space-y-6\">\n                  {renderFormField('Brokerage Fee', 'brokerageFee', 'number')}\n                  {renderFormField('Brokerage Fee Paid To', 'brokeerageFeePaidTo', 'text')}\n                  {renderFormField('Payoff Balance', 'payoffBalance', 'number')}\n                  {renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number')}\n                  {renderFormField('Amount Due to RP', 'amountDueToRP', 'number')}\n                </div>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <DollarSign className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-white mb-2\">Financial Information Not Required</h3>\n            <p className=\"text-gray-400\">This deal type does not require financial information.</p>\n          </div>\n        );\n      \n      case 4:\n        // Seller/Dealer Info step\n        if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n          return (\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10 space-y-10\">\n              <div>\n                <h3 className=\"text-lg font-medium text-white mb-4\">Dealer Info (Buyer)</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {renderFormField('Dealer Name', 'dealerName', 'text', null, true, User, true)}\n                  {renderFormField('Dealer Company', 'dealerCompany', 'text')}\n                  {renderFormField('Dealer Phone', 'dealerPhone', 'tel', null, false, Phone)}\n                  {renderFormField('Dealer Email', 'dealerEmail', 'email', null, false, Mail)}\n                  {renderFormField('Dealer Address', 'dealerAddress', 'text', null, false, MapPin)}\n                </div>\n              </div>\n              <div>\n                <h3 className=\"text-lg font-medium text-white mb-4\">Seller Info (Seller)</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {renderFormField('Seller Name', 'sellerName', 'text', null, true, User)}\n                  {renderFormField('Seller Company', 'sellerCompany', 'text')}\n                  {renderFormField('Seller Phone', 'sellerPhone', 'tel', null, false, Phone)}\n                  {renderFormField('Seller Email', 'sellerEmail', 'email', null, false, Mail)}\n                  {renderFormField('Seller Address', 'sellerAddress', 'text', null, false, MapPin)}\n                </div>\n              </div>\n            </div>\n          );\n        } else {\n          return (\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">{dynamicLabels.sellerSectionTitle}</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"md:col-span-2\">\n                  {renderFormField(dynamicLabels.sellerLabel, 'sellerName', 'text', null, true, User)}\n                </div>\n                {renderFormField('Company/Dealer', 'sellerCompany', 'text')}\n                {renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone)}\n                {renderFormField('Email', 'sellerEmail', 'email', null, false, Mail)}\n                <div className=\"md:col-span-2\">\n                  {renderFormField('Address', 'sellerAddress', 'text', null, false, MapPin)}\n                </div>\n              </div>\n            </div>\n          );\n        }\n      \n      case 5:\n        return dealTypeFields.showDocumentation ? (\n          <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n            <h3 className=\"text-lg font-medium text-white mb-4\">Documentation & Notes</h3>\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-4\">\n                  <h4 className=\"text-md font-medium text-white mb-4\">Documentation Status</h4>\n                  {renderFormField('Contract Required', 'contractRequired', 'checkbox')}\n                  {renderFormField('Title Present', 'titlePresent', 'checkbox')}\n                  {renderFormField('Driver License Present', 'driverLicensePresent', 'checkbox')}\n                  {renderFormField('Odometer Present', 'odometerPresent', 'checkbox')}\n                  {renderFormField('Dealer License Present', 'dealerLicensePresent', 'checkbox')}\n                </div>\n                <div className=\"space-y-4\">\n                  {renderFormField('Vehicle Description', 'vehicleDescription', 'textarea', null, false, Info)}\n                  {/* File upload area */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-white mb-2\">Upload Documents/Photos</label>\n                    <input\n                      type=\"file\"\n                      multiple\n                      accept=\"image/*,application/pdf\"\n                      onChange={handleDocumentUpload}\n                      className=\"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700\"\n                    />\n                    {/* Preview uploaded files */}\n                    {formData.documents && formData.documents.length > 0 && (\n                      <div className=\"mt-3 space-y-2\">\n                        {formData.documents.map((file, idx) => (\n                          <div key={idx} className=\"flex items-center space-x-3 bg-white/10 rounded p-2\">\n                            {file.type && file.type.startsWith('image') ? (\n                              <img src={URL.createObjectURL(file)} alt={file.name} className=\"h-12 w-12 object-cover rounded\" />\n                            ) : (\n                              <span className=\"inline-block w-12 h-12 bg-gray-700 text-white flex items-center justify-center rounded\">PDF</span>\n                            )}\n                            <span className=\"text-white text-sm truncate max-w-xs\">{file.name}</span>\n                            <button\n                              type=\"button\"\n                              className=\"ml-auto text-red-400 hover:text-red-600 text-xs font-medium\"\n                              onClick={() => handleRemoveDocument(idx)}\n                            >\n                              Remove\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n              <div>\n                {renderFormField('General Notes', 'generalNotes', 'textarea', null, false, Info)}\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <Info className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-white mb-2\">Documentation Not Required</h3>\n            <p className=\"text-gray-400\">This deal type does not require documentation tracking.</p>\n          </div>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  // Calculate total steps based on deal type\n  const getTotalSteps = () => {\n    let steps = 2; // Always have vehicle info and deal config\n    if (dealTypeFields.showFinancials) steps++;\n    if (dealTypeFields.showSellerInfo) steps++;\n    if (dealTypeFields.showDocumentation) steps++;\n    return steps;\n  };\n\n  const totalSteps = getTotalSteps();\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\">\n      {/* Animated Background */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      {/* Header */}\n      <header className=\"relative bg-black/20 backdrop-blur-md border-b border-white/10\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <button \n                onClick={() => window.history.back()}\n                className=\"mr-4 p-2 bg-white/10 hover:bg-white/20 rounded-lg border border-white/20 transition-colors\"\n              >\n                <ArrowLeft className=\"h-5 w-5 text-white\" />\n              </button>\n              <div className=\"flex items-center\">\n                <div className=\"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-3 mr-4 shadow-lg shadow-blue-500/25\">\n                  <Plus className=\"h-6 w-6 text-white\" />\n                </div>\n                <div>\n                  <h1 className=\"text-xl font-bold text-white\">New Deal Entry</h1>\n                  <p className=\"text-gray-300 text-sm\">Create a new vehicle deal</p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={() => handleSave(true)}\n                disabled={saving}\n                className=\"flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-colors disabled:opacity-50\"\n              >\n                {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Save className=\"h-4 w-4 mr-2\" />}\n                Save Draft\n              </button>\n              \n              <button\n                onClick={() => handleSave(false)}\n                disabled={saving}\n                className=\"flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg shadow-lg transition-colors disabled:opacity-50\"\n              >\n                {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <CheckCircle className=\"h-4 w-4 mr-2\" />}\n                Create Deal\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"relative max-w-6xl mx-auto px-6 py-8\">\n        {/* Step Indicator */}\n        {renderStepIndicator()}\n\n        {/* Form Content */}\n        <div className=\"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-8\">\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-bold text-white mb-2\">\n              {currentStep === 1 && 'Vehicle Information & Deal Type'}\n              {currentStep === 2 && 'Deal Configuration'}\n              {currentStep === 3 && dealTypeFields.showFinancials && 'Financial Information'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes'}\n              {currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information'}\n              {currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes'}\n              {currentStep === 5 && 'Documentation & Notes'}\n            </h2>\n            <p className=\"text-gray-300\">\n              {currentStep === 1 && 'Enter basic vehicle information and select the deal type'}\n              {currentStep === 2 && 'Configure deal type, funding, and timeline'}\n              {currentStep === 3 && dealTypeFields.showFinancials && 'Set pricing and financial terms'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes'}\n              {currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information'}\n              {currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes'}\n              {currentStep === 5 && 'Document status and additional notes'}\n            </p>\n          </div>\n\n          {renderStep()}\n\n          {/* Navigation Buttons */}\n          <div className=\"flex items-center justify-between mt-8 pt-6 border-t border-white/10\">\n            <button\n              onClick={() => setCurrentStep(Math.max(1, currentStep - 1))}\n              disabled={currentStep === 1}\n              className=\"flex items-center px-4 py-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Previous\n            </button>\n\n            <div className=\"flex items-center space-x-3\">\n              {currentStep === totalSteps && formData.vehicleDescription && (\n                <button\n                  onClick={handleEmailToListingTeam}\n                  className=\"flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors\"\n                >\n                  <Send className=\"h-4 w-4 mr-2\" />\n                  Email to Listing Team\n                </button>\n              )}\n              \n              {currentStep < totalSteps ? (\n                <button\n                  onClick={() => setCurrentStep(Math.min(totalSteps, currentStep + 1))}\n                  className=\"flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg transition-colors\"\n                >\n                  Next\n                  <ArrowLeft className=\"h-4 w-4 ml-2 rotate-180\" />\n                </button>\n              ) : (\n                <button\n                  onClick={() => handleSave(false)}\n                  disabled={saving}\n                  className=\"flex items-center px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg transition-colors disabled:opacity-50\"\n                >\n                  {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <CheckCircle className=\"h-4 w-4 mr-2\" />}\n                  Complete Deal\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* VIN Decode Status */}\n        {vinDecoding && (\n          <div className=\"fixed bottom-6 right-6 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\">\n            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n            Decoding VIN...\n          </div>\n        )}\n        \n        {vinDecoded && (\n          <div className=\"fixed bottom-6 right-6 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\">\n            <CheckCircle className=\"h-4 w-4 mr-2\" />\n            VIN decoded successfully!\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NewDealEntry; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,GAAG,EAAEC,SAAS,EAAEC,IAAI,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAChDC,QAAQ,EAAEC,UAAU,EAAEC,IAAI,EAC1BC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,OAAO,EAAEC,KAAK,EACzCC,IAAI,EAAEC,IAAI,EAAEC,WAAW,QAClB,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAM,CAACC,WAAW,CAAC,GAAGxB,QAAQ,CAAC;IAC7ByB,IAAI,EAAE,cAAc;IACpBC,IAAI,EAAE,OAAO;IACbC,WAAW,EAAE;MACXC,cAAc,EAAE,IAAI;MACpBC,iBAAiB,EAAE,IAAI;MACvBC,gBAAgB,EAAE;IACpB;EACF,CAAC,CAAC;EAEF,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGhC,QAAQ,CAAC;IACvC;IACAiC,GAAG,EAAE,EAAE;IACPC,IAAI,EAAE,EAAE;IACRC,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE,EAAE;IACXC,aAAa,EAAE,EAAE;IACjBC,aAAa,EAAE,EAAE;IAEjB;IACAC,QAAQ,EAAE,EAAE;IACZC,gBAAgB,EAAE,EAAE;IAAE;IACtBC,aAAa,EAAE,EAAE;IACjBC,YAAY,EAAE,EAAE;IAChBC,aAAa,EAAE,OAAO;IAAE;IACxBC,YAAY,EAAE,iBAAiB;IAE/B;IACAC,aAAa,EAAE,EAAE;IACjBC,SAAS,EAAE,EAAE;IACbC,SAAS,EAAE,EAAE;IACbC,cAAc,EAAE,EAAE;IAClBC,cAAc,EAAE,EAAE;IAClBC,YAAY,EAAE,EAAE;IAChBC,mBAAmB,EAAE,EAAE;IACvBC,aAAa,EAAE,EAAE;IACjBC,mBAAmB,EAAE,EAAE;IACvBC,aAAa,EAAE,EAAE;IAEjB;IACAC,UAAU,EAAE,EAAE;IACdC,aAAa,EAAE,EAAE;IACjBC,aAAa,EAAE,EAAE;IACjBC,WAAW,EAAE,EAAE;IACfC,WAAW,EAAE,EAAE;IAEf;IACAC,aAAa,EAAE,EAAE;IACjBC,kBAAkB,EAAE,EAAE;IACtBC,YAAY,EAAE,EAAE;IAEhB;IACAC,gBAAgB,EAAE,KAAK;IACvBC,YAAY,EAAE,KAAK;IACnBC,oBAAoB,EAAE,KAAK;IAC3BC,eAAe,EAAE,KAAK;IACtBC,oBAAoB,EAAE,KAAK;IAC3BC,SAAS,EAAE,EAAE;IAAE;IACfC,WAAW,EAAE;EACf,CAAC,CAAC;EAEF,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGxE,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACyE,UAAU,EAAEC,aAAa,CAAC,GAAG1E,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC2E,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG5E,QAAQ,CAAC,EAAE,CAAC;EAC9D,MAAM,CAAC6E,sBAAsB,EAAEC,yBAAyB,CAAC,GAAG9E,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC1E,MAAM,CAAC+E,UAAU,EAAEC,aAAa,CAAC,GAAGhF,QAAQ,CAAC,CAAC,CAAC,CAAC;EAChD,MAAM,CAACiF,MAAM,EAAEC,SAAS,CAAC,GAAGlF,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACmF,WAAW,EAAEC,cAAc,CAAC,GAAGpF,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACqF,aAAa,EAAEC,gBAAgB,CAAC,GAAGtF,QAAQ,CAAC,KAAK,CAAC;;EAEzD;EACA,MAAMuF,cAAc,GAAIC,KAAK,IAAK;IAChC,IAAI,CAACA,KAAK,EAAE,OAAO,EAAE;IACrB;IACA,MAAMC,YAAY,GAAGD,KAAK,CAACE,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;IAC5D;IACA,MAAMC,KAAK,GAAGH,YAAY,CAACI,KAAK,CAAC,GAAG,CAAC;IACrC,IAAID,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;MACpB,OAAOF,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,GAAGA,KAAK,CAACG,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC;IACjD;IACA,OAAOP,YAAY;EACrB,CAAC;;EAED;EACA,MAAMQ,qBAAqB,GAAIT,KAAK,IAAK;IACvC,IAAI,CAACA,KAAK,EAAE,OAAO,EAAE;IACrB,MAAMU,GAAG,GAAGC,UAAU,CAACX,KAAK,CAAC;IAC7B,IAAIY,KAAK,CAACF,GAAG,CAAC,EAAE,OAAO,EAAE;IACzB,OAAOA,GAAG,CAACG,cAAc,CAAC,OAAO,EAAE;MACjCC,KAAK,EAAE,UAAU;MACjBC,QAAQ,EAAE,KAAK;MACfC,qBAAqB,EAAE,CAAC;MACxBC,qBAAqB,EAAE;IACzB,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,SAAS,GAAG5E,QAAQ,CAACU,gBAAgB;IAE3C,OAAO;MACLmE,kBAAkB,EAAED,SAAS,KAAK,MAAM,GAAG,YAAY,GAAG,gBAAgB;MAC1EE,WAAW,EAAEF,SAAS,KAAK,MAAM,GAAG,SAAS,GAAG,gBAAgB;MAChEG,kBAAkB,EAAEH,SAAS,KAAK,MAAM,GAAG,mBAAmB,GAAG;IACnE,CAAC;EACH,CAAC;EAED,MAAMI,aAAa,GAAGL,gBAAgB,CAAC,CAAC;;EAExC;EACA,MAAMM,SAAS,GAAG,CAChB;IAAExB,KAAK,EAAE,eAAe;IAAEyB,KAAK,EAAE;EAAkB,CAAC,EACpD;IAAEzB,KAAK,EAAE,mBAAmB;IAAEyB,KAAK,EAAE;EAA4B,CAAC,EAClE;IAAEzB,KAAK,EAAE,gBAAgB;IAAEyB,KAAK,EAAE;EAAmB,CAAC,EACtD;IAAEzB,KAAK,EAAE,WAAW;IAAEyB,KAAK,EAAE;EAAc,CAAC,EAC5C;IAAEzB,KAAK,EAAE,gBAAgB;IAAEyB,KAAK,EAAE;EAAmB,CAAC,EACtD;IAAEzB,KAAK,EAAE,aAAa;IAAEyB,KAAK,EAAE;EAAgB,CAAC,EAChD;IAAEzB,KAAK,EAAE,SAAS;IAAEyB,KAAK,EAAE;EAAU,CAAC,CACvC;EAED,MAAMC,cAAc,GAAG,CACrB;IAAE1B,KAAK,EAAE,aAAa;IAAEyB,KAAK,EAAE;EAAgB,CAAC,EAChD;IAAEzB,KAAK,EAAE,gBAAgB;IAAEyB,KAAK,EAAE;EAAmB,CAAC,EACtD;IAAEzB,KAAK,EAAE,MAAM;IAAEyB,KAAK,EAAE;EAAO,CAAC,EAChC;IAAEzB,KAAK,EAAE,eAAe;IAAEyB,KAAK,EAAE;EAAgB,CAAC,EAClD;IAAEzB,KAAK,EAAE,aAAa;IAAEyB,KAAK,EAAE;EAAc,CAAC,CAC/C;EAED,MAAME,cAAc,GAAG,CACrB;IAAE3B,KAAK,EAAE,OAAO;IAAEyB,KAAK,EAAE;EAAQ,CAAC,EAClC;IAAEzB,KAAK,EAAE,MAAM;IAAEyB,KAAK,EAAE;EAAgB,CAAC,EACzC;IAAEzB,KAAK,EAAE,KAAK;IAAEyB,KAAK,EAAE;EAAM,CAAC,EAC9B;IAAEzB,KAAK,EAAE,MAAM;IAAEyB,KAAK,EAAE;EAAO,CAAC,EAChC;IAAEzB,KAAK,EAAE,UAAU;IAAEyB,KAAK,EAAE;EAAW,CAAC,CACzC;EAED,MAAMG,mBAAmB,GAAG,CAC1B;IAAE5B,KAAK,EAAE,KAAK;IAAEyB,KAAK,EAAE;EAAM,CAAC,EAC9B;IAAEzB,KAAK,EAAE,MAAM;IAAEyB,KAAK,EAAE;EAAO,CAAC,EAChC;IAAEzB,KAAK,EAAE,UAAU;IAAEyB,KAAK,EAAE;EAAW,CAAC,EACxC;IAAEzB,KAAK,EAAE,WAAW;IAAEyB,KAAK,EAAE;EAAY,CAAC,EAC1C;IAAEzB,KAAK,EAAE,WAAW;IAAEyB,KAAK,EAAE;EAAY,CAAC,EAC1C;IAAEzB,KAAK,EAAE,WAAW;IAAEyB,KAAK,EAAE;EAAY,CAAC,EAC1C;IAAEzB,KAAK,EAAE,cAAc;IAAEyB,KAAK,EAAE;EAAe,CAAC,CACjD;;EAED;EACA;;EAEA;EACA,MAAMI,kBAAkB,GAAG,CACzB;IAAE7B,KAAK,EAAE,WAAW;IAAEyB,KAAK,EAAE;EAAY,CAAC,EAC1C;IAAEzB,KAAK,EAAE,UAAU;IAAEyB,KAAK,EAAE;EAAW,CAAC,EACxC;IAAEzB,KAAK,EAAE,OAAO;IAAEyB,KAAK,EAAE;EAAQ,CAAC,EAClC;IAAEzB,KAAK,EAAE,UAAU;IAAEyB,KAAK,EAAE;EAAW,CAAC,EACxC;IAAEzB,KAAK,EAAE,SAAS;IAAEyB,KAAK,EAAE;EAAU,CAAC,EACtC;IAAEzB,KAAK,EAAE,OAAO;IAAEyB,KAAK,EAAE;EAAQ,CAAC,CACnC;;EAED;EACA,MAAMK,iBAAiB,GAAGA,CAAA,KAAM;IAC9B;IACA,MAAM9E,QAAQ,GAAGT,QAAQ,CAACS,QAAQ;IAClC,OAAO;MACL+E,cAAc,EAAE,CACd,eAAe,EAAE,mBAAmB,EAAE,gBAAgB,EACtD,WAAW,EAAE,gBAAgB,EAAE,aAAa,EAAE,SAAS,CACxD,CAACC,QAAQ,CAAChF,QAAQ,CAAC;MACpBiF,cAAc,EAAE,IAAI;MACpBC,iBAAiB,EAAE,CACjB,eAAe,EAAE,mBAAmB,EAAE,gBAAgB,EACtD,WAAW,EAAE,gBAAgB,EAAE,aAAa,EAAE,SAAS,CACxD,CAACF,QAAQ,CAAChF,QAAQ,CAAC;MACpBmF,cAAc,EAAE,CAAC,KAAK,EAAE,UAAU,EAAE,kBAAkB,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY;IAC/F,CAAC;EACH,CAAC;EAED,MAAMC,cAAc,GAAGN,iBAAiB,CAAC,CAAC;;EAE1C;EACA,MAAMO,SAAS,GAAG,MAAO5F,GAAG,IAAK;IAC/BuC,cAAc,CAAC,IAAI,CAAC;IACpB,IAAI;MACF,MAAMsD,QAAQ,GAAG,MAAMC,KAAK,CAAC,uBAAuB,EAAE;QACpDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEnG;QAAI,CAAC;MAC9B,CAAC,CAAC;MAEF,MAAMoG,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAElC,IAAID,IAAI,CAACE,OAAO,IAAIF,IAAI,CAACA,IAAI,EAAE;QAC7BrG,WAAW,CAACwG,IAAI,KAAK;UACnB,GAAGA,IAAI;UACPtG,IAAI,EAAEmG,IAAI,CAACA,IAAI,CAACnG,IAAI,IAAI,EAAE;UAC1BC,IAAI,EAAEkG,IAAI,CAACA,IAAI,CAAClG,IAAI,IAAI,EAAE;UAC1BC,KAAK,EAAEiG,IAAI,CAACA,IAAI,CAACjG,KAAK,IAAI;QAC5B,CAAC,CAAC,CAAC;QAEHsC,aAAa,CAAC,IAAI,CAAC;QACnB+D,UAAU,CAAC,MAAM/D,aAAa,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;MAC9C,CAAC,MAAM;QACLgE,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEN,IAAI,CAACM,KAAK,CAAC;QAC/CC,KAAK,CAACP,IAAI,CAACM,KAAK,IAAI,2DAA2D,CAAC;MAClF;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MACzCC,KAAK,CAAC,qEAAqE,CAAC;IAC9E,CAAC,SAAS;MACRpE,cAAc,CAAC,KAAK,CAAC;IACvB;EACF,CAAC;;EAED;EACA,MAAMqE,aAAa,GAAG,MAAOC,KAAK,IAAK;IACrC,IAAIA,KAAK,CAAChD,MAAM,GAAG,CAAC,EAAE;MACpBlB,oBAAoB,CAAC,EAAE,CAAC;MACxB;IACF;IACA;IACA,IAAI;MACF,MAAMkD,QAAQ,GAAG,MAAMC,KAAK,CAAC,yBAAyBgB,kBAAkB,CAACD,KAAK,CAAC,EAAE,CAAC;MAClF,MAAMT,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAClC1D,oBAAoB,CAACyD,IAAI,CAACW,OAAO,IAAI,EAAE,CAAC;IAC1C,CAAC,CAAC,OAAOL,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C/D,oBAAoB,CAAC,EAAE,CAAC;IAC1B,CAAC,SAAS;MACR;IAAA;EAEJ,CAAC;;EAED;EACA,MAAMqE,kBAAkB,GAAG,MAAOH,KAAK,IAAK;IAC1C,IAAIA,KAAK,CAAChD,MAAM,GAAG,CAAC,EAAE;MACpBhB,yBAAyB,CAAC,EAAE,CAAC;MAC7B;IACF;IACA,IAAI;MACF,MAAMgD,QAAQ,GAAG,MAAMC,KAAK,CAAC,yBAAyBgB,kBAAkB,CAACD,KAAK,CAAC,EAAE,CAAC;MAClF,MAAMT,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAClCxD,yBAAyB,CAACuD,IAAI,CAACW,OAAO,IAAI,EAAE,CAAC;IAC/C,CAAC,CAAC,OAAOL,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C7D,yBAAyB,CAAC,EAAE,CAAC;IAC/B;EACF,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMoE,iBAAiB,GAAGA,CAACC,KAAK,EAAE3D,KAAK,KAAK;IAC1C,IAAI4D,cAAc,GAAG5D,KAAK;;IAE1B;IACA,IAAI,CAAC,eAAe,EAAE,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE,cAAc,EAAE,eAAe,EAAE,qBAAqB,EAAE,eAAe,CAAC,CAACgC,QAAQ,CAAC2B,KAAK,CAAC,EAAE;MAC1JC,cAAc,GAAG7D,cAAc,CAACC,KAAK,CAAC;IACxC;;IAEA;IACA,IAAI2D,KAAK,KAAK,UAAU,EAAE;MACxBnH,WAAW,CAACwG,IAAI,KAAK;QACnB,GAAGA,IAAI;QACPhG,QAAQ,EAAE4G,cAAc;QACxB3G,gBAAgB,EAAE2G,cAAc,KAAK,aAAa,GAAGZ,IAAI,CAAC/F,gBAAgB,GAAG;MAC/E,CAAC,CAAC,CAAC;MACH,IAAI0C,WAAW,GAAG,CAAC,EAAEC,cAAc,CAAC,CAAC,CAAC;MACtC;IACF;IAEApD,WAAW,CAACwG,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACW,KAAK,GAAGC;IAAe,CAAC,CAAC,CAAC;;IAE3D;IACA,IAAIrE,UAAU,CAACoE,KAAK,CAAC,EAAE;MACrBnE,aAAa,CAACwD,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAACW,KAAK,GAAG;MAAK,CAAC,CAAC,CAAC;IACrD;;IAEA;IACA,IAAIA,KAAK,KAAK,KAAK,IAAIC,cAAc,CAACtD,MAAM,KAAK,EAAE,IAAI,CAACrB,UAAU,EAAE;MAClEoD,SAAS,CAACuB,cAAc,CAAC;IAC3B;;IAEA;IACA,IAAID,KAAK,KAAK,YAAY,EAAE;MAC1BN,aAAa,CAACO,cAAc,CAAC;IAC/B;;IAEA;IACA,IAAID,KAAK,KAAK,UAAU,IAAIhE,WAAW,GAAG,CAAC,EAAE;MAC3CC,cAAc,CAAC,CAAC,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMiE,oBAAoB,GAAIC,CAAC,IAAK;IAClC,MAAMC,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACH,CAAC,CAACI,MAAM,CAACH,KAAK,CAAC;IACxCvH,WAAW,CAACwG,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPnE,SAAS,EAAE,CAAC,IAAImE,IAAI,CAACnE,SAAS,IAAI,EAAE,CAAC,EAAE,GAAGkF,KAAK;IACjD,CAAC,CAAC,CAAC;EACL,CAAC;EACD,MAAMI,oBAAoB,GAAIC,KAAK,IAAK;IACtC5H,WAAW,CAACwG,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPnE,SAAS,EAAEmE,IAAI,CAACnE,SAAS,CAACwF,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKH,KAAK;IACxD,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMI,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,MAAM,GAAG,CAAC,CAAC;IACjB,MAAMtC,cAAc,GAAGC,cAAc,CAACD,cAAc,IAAI,CAAC,KAAK,EAAE,UAAU,EAAE,kBAAkB,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,CAAC;IAEtIA,cAAc,CAACuC,OAAO,CAACf,KAAK,IAAI;MAC9B,IAAI,CAACpH,QAAQ,CAACoH,KAAK,CAAC,IAAIpH,QAAQ,CAACoH,KAAK,CAAC,CAACzD,QAAQ,CAAC,CAAC,CAACyE,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;QAChEF,MAAM,CAACd,KAAK,CAAC,GAAG,GAAGA,KAAK,CAACiB,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGlB,KAAK,CAACpD,KAAK,CAAC,CAAC,CAAC,cAAc;MACjF;IACF,CAAC,CAAC;;IAEF;IACA,IAAIhE,QAAQ,CAACE,GAAG,IAAIF,QAAQ,CAACE,GAAG,CAAC6D,MAAM,KAAK,EAAE,EAAE;MAC9CmE,MAAM,CAAChI,GAAG,GAAG,mCAAmC;IAClD;IAEA,IAAIF,QAAQ,CAACG,IAAI,KAAKH,QAAQ,CAACG,IAAI,GAAG,IAAI,IAAIH,QAAQ,CAACG,IAAI,GAAG,IAAIoI,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;MAC3FN,MAAM,CAAC/H,IAAI,GAAG,2BAA2B;IAC3C;IAEA,IAAIH,QAAQ,CAACM,OAAO,IAAIN,QAAQ,CAACM,OAAO,GAAG,CAAC,EAAE;MAC5C4H,MAAM,CAAC5H,OAAO,GAAG,4BAA4B;IAC/C;IAEA,IAAIuF,cAAc,CAACL,cAAc,IAAIxF,QAAQ,CAACe,aAAa,IAAIf,QAAQ,CAACe,aAAa,IAAI,CAAC,EAAE;MAC1FmH,MAAM,CAACnH,aAAa,GAAG,uCAAuC;IAChE;IAEAkC,aAAa,CAACiF,MAAM,CAAC;IACrB,OAAOO,MAAM,CAACC,IAAI,CAACR,MAAM,CAAC,CAACnE,MAAM,KAAK,CAAC;EACzC,CAAC;EAED,MAAM4E,UAAU,GAAG,MAAAA,CAAOC,OAAO,GAAG,KAAK,KAAK;IAC5C,IAAI,CAACA,OAAO,IAAI,CAACX,YAAY,CAAC,CAAC,EAAE;MAC/B;IACF;IAEA9E,SAAS,CAAC,IAAI,CAAC;IAEf,IAAI;MACF;MACA,MAAM0F,QAAQ,GAAG;QACfC,OAAO,EAAE,GAAG9I,QAAQ,CAACG,IAAI,IAAIH,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACK,KAAK,EAAE;QAC9DH,GAAG,EAAEF,QAAQ,CAACE,GAAG;QACjBC,IAAI,EAAE4I,QAAQ,CAAC/I,QAAQ,CAACG,IAAI,CAAC;QAC7BC,IAAI,EAAEJ,QAAQ,CAACI,IAAI;QACnBC,KAAK,EAAEL,QAAQ,CAACK,KAAK;QACrByB,aAAa,EAAE9B,QAAQ,CAAC8B,aAAa;QACrCkH,KAAK,EAAEhJ,QAAQ,CAACO,aAAa;QAC7BD,OAAO,EAAEyI,QAAQ,CAAC/I,QAAQ,CAACM,OAAO,CAAC,IAAI,CAAC;QACxCS,aAAa,EAAEqD,UAAU,CAACpE,QAAQ,CAACe,aAAa,CAAC,IAAI,CAAC;QACtDC,SAAS,EAAEoD,UAAU,CAACpE,QAAQ,CAACgB,SAAS,CAAC,IAAI,CAAC;QAC9CC,SAAS,EAAEmD,UAAU,CAACpE,QAAQ,CAACiB,SAAS,CAAC,IAAI,CAAC;QAC9CR,QAAQ,EAAET,QAAQ,CAACS,QAAQ,CAACgF,QAAQ,CAAC,QAAQ,CAAC,GAAG,QAAQ,GAAG,WAAW;QACvEwD,MAAM,EAAE;UACNvJ,IAAI,EAAEM,QAAQ,CAACyB,UAAU;UACzByH,IAAI,EAAElJ,QAAQ,CAACS,QAAQ,CAACgF,QAAQ,CAAC,SAAS,CAAC,GAAG,SAAS,GAAG,QAAQ;UAClE0D,OAAO,EAAE;YACPC,OAAO,EAAEpJ,QAAQ,CAAC2B,aAAa;YAC/B0H,KAAK,EAAErJ,QAAQ,CAAC4B,WAAW;YAC3B0H,KAAK,EAAEtJ,QAAQ,CAAC6B;UAClB;QACF,CAAC;QACDlB,aAAa,EAAEX,QAAQ,CAACW,aAAa;QACrCE,aAAa,EAAEb,QAAQ,CAACa,aAAa;QACrCD,YAAY,EAAEZ,QAAQ,CAACY,YAAY,GAAG,IAAI2H,IAAI,CAACvI,QAAQ,CAACY,YAAY,CAAC,GAAG,IAAI2H,IAAI,CAAC,CAAC;QAClFzH,YAAY,EAAE,eAAe;QAC7ByB,WAAW,EAAEvC,QAAQ,CAACuC;MACxB,CAAC;;MAED;MACA,MAAMgH,YAAY,GAAG,MAAMvD,KAAK,CAAC,YAAY,EAAE;QAC7CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACwC,QAAQ;MAC/B,CAAC,CAAC;MAEF,IAAI,CAACU,YAAY,CAACC,EAAE,EAAE;QACpB,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;MAC1C;MAEA,MAAMC,UAAU,GAAG,MAAMH,YAAY,CAAChD,IAAI,CAAC,CAAC;MAC5C,MAAMoD,MAAM,GAAGD,UAAU,CAACE,IAAI,CAACC,GAAG;;MAElC;MACA,MAAMC,gBAAgB,GAAG,MAAM9D,KAAK,CAAC,2BAA2B2D,MAAM,EAAE,EAAE;QACxE1D,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBzB,SAAS,EAAE5E,QAAQ,CAACU,gBAAgB;UACpCS,cAAc,EAAEiD,UAAU,CAACpE,QAAQ,CAACmB,cAAc,CAAC,IAAI;QACzD,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAAC2I,gBAAgB,CAACN,EAAE,EAAE;QACxB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;MAChD;MAEA,MAAMM,cAAc,GAAG,MAAMD,gBAAgB,CAACvD,IAAI,CAAC,CAAC;MAEpDI,OAAO,CAACqD,GAAG,CAAC,sCAAsC,EAAED,cAAc,CAAC;;MAEnE;MACA,MAAME,cAAc,GAAGrB,OAAO,GAC1B,2BAA2B,GAC3B,oDAAoDmB,cAAc,CAACG,aAAa,CAACC,QAAQ,eAAeJ,cAAc,CAACK,QAAQ,CAACC,cAAc,0EAA0E;MAE5NxD,KAAK,CAACoD,cAAc,CAAC;;MAErB;MACA,IAAI,CAACrB,OAAO,EAAE;QACZ;QACA3I,WAAW,CAAC;UACVC,GAAG,EAAE,EAAE;UACPC,IAAI,EAAE,EAAE;UACRC,IAAI,EAAE,EAAE;UACRC,KAAK,EAAE,EAAE;UACTC,OAAO,EAAE,EAAE;UACXC,aAAa,EAAE,EAAE;UACjBC,aAAa,EAAE,EAAE;UACjBC,QAAQ,EAAE,EAAE;UACZC,gBAAgB,EAAE,EAAE;UACpBC,aAAa,EAAE,EAAE;UACjBC,YAAY,EAAE,EAAE;UAChBC,aAAa,EAAE,OAAO;UACtBC,YAAY,EAAE,iBAAiB;UAC/BC,aAAa,EAAE,EAAE;UACjBC,SAAS,EAAE,EAAE;UACbC,SAAS,EAAE,EAAE;UACbC,cAAc,EAAE,EAAE;UAClBC,cAAc,EAAE,EAAE;UAClBC,YAAY,EAAE,EAAE;UAChBC,mBAAmB,EAAE,EAAE;UACvBC,aAAa,EAAE,EAAE;UACjBC,mBAAmB,EAAE,EAAE;UACvBC,aAAa,EAAE,EAAE;UACjBC,UAAU,EAAE,EAAE;UACdC,aAAa,EAAE,EAAE;UACjBC,aAAa,EAAE,EAAE;UACjBC,WAAW,EAAE,EAAE;UACfC,WAAW,EAAE,EAAE;UACfC,aAAa,EAAE,EAAE;UACjBC,kBAAkB,EAAE,EAAE;UACtBC,YAAY,EAAE,EAAE;UAChBC,gBAAgB,EAAE,KAAK;UACvBC,YAAY,EAAE,KAAK;UACnBC,oBAAoB,EAAE,KAAK;UAC3BC,eAAe,EAAE,KAAK;UACtBC,oBAAoB,EAAE,KAAK;UAC3BC,SAAS,EAAE,EAAE;UACbC,WAAW,EAAE;QACf,CAAC,CAAC;QACFc,cAAc,CAAC,CAAC,CAAC;MACnB;IAEF,CAAC,CAAC,OAAOuD,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;MACnCC,KAAK,CAAC,sBAAsBD,KAAK,CAAC0D,OAAO,EAAE,CAAC;IAC9C,CAAC,SAAS;MACRnH,SAAS,CAAC,KAAK,CAAC;IAClB;EACF,CAAC;EAED,MAAMoH,wBAAwB,GAAGA,CAAA,KAAM;IACrC,MAAMC,SAAS,GAAG;AACtB;AACA,WAAWxK,QAAQ,CAACG,IAAI,IAAIH,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACK,KAAK;AAC3D,OAAOL,QAAQ,CAACE,GAAG;AACnB,WAAWF,QAAQ,CAAC8B,aAAa;AACjC,WAAW9B,QAAQ,CAACM,OAAO;AAC3B,YAAYN,QAAQ,CAACO,aAAa;AAClC,YAAYP,QAAQ,CAACQ,aAAa;AAClC;AACA;AACA,EAAER,QAAQ,CAAC+B,kBAAkB;AAC7B;AACA;AACA;AACA;AACA,EAAEtC,WAAW,CAACC,IAAI,EAAE;IAEhB,MAAM+K,UAAU,GAAG,kEAAkEzK,QAAQ,CAACG,IAAI,IAAIH,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACK,KAAK,SAAS2G,kBAAkB,CAACwD,SAAS,CAAC,EAAE;IAC7KE,MAAM,CAACC,IAAI,CAACF,UAAU,CAAC;EACzB,CAAC;EAED,MAAMG,mBAAmB,GAAGA,CAAA,kBAC1BtL,OAAA;IAAKuL,SAAS,EAAC,MAAM;IAAAC,QAAA,eACnBxL,OAAA;MAAKuL,SAAS,EAAC,mCAAmC;MAAAC,QAAA,EAC/CrD,KAAK,CAACC,IAAI,CAAC;QAAE3D,MAAM,EAAEgH;MAAW,CAAC,EAAE,CAAChD,CAAC,EAAEF,KAAK,KAAK;QAChD,MAAMmD,UAAU,GAAGnD,KAAK,GAAG,CAAC;QAC5B,MAAMoD,QAAQ,GAAG7H,WAAW,KAAK4H,UAAU;QAC3C,MAAME,WAAW,GAAG9H,WAAW,GAAG4H,UAAU;QAE5C,IAAIG,SAAS,GAAG,EAAE;QAClB,IAAIC,eAAe,GAAG,EAAE;QAExB,IAAIJ,UAAU,KAAK,CAAC,EAAE;UACpBG,SAAS,GAAG,qBAAqB;UACjCC,eAAe,GAAG,gDAAgD;QACpE,CAAC,MAAM,IAAIJ,UAAU,KAAK,CAAC,EAAE;UAC3BG,SAAS,GAAG,oBAAoB;UAChCC,eAAe,GAAG,0CAA0C;QAC9D,CAAC,MAAM,IAAIJ,UAAU,KAAK,CAAC,IAAInF,cAAc,CAACL,cAAc,EAAE;UAC5D2F,SAAS,GAAG,uBAAuB;UACnCC,eAAe,GAAG,iCAAiC;QACrD,CAAC,MAAM,IAAKJ,UAAU,KAAK,CAAC,IAAI,CAACnF,cAAc,CAACL,cAAc,IAAIK,cAAc,CAACH,cAAc,IACnFsF,UAAU,KAAK,CAAC,IAAInF,cAAc,CAACL,cAAc,IAAIK,cAAc,CAACH,cAAe,EAAE;UAC/FyF,SAAS,GAAG,oBAAoB;UAChCC,eAAe,GAAG,gCAAgC;QACpD,CAAC,MAAM,IAAKJ,UAAU,KAAK,CAAC,IAAI,CAACnF,cAAc,CAACL,cAAc,IAAI,CAACK,cAAc,CAACH,cAAc,IAAIG,cAAc,CAACF,iBAAiB,IACxHqF,UAAU,KAAK,CAAC,IAAInF,cAAc,CAACL,cAAc,IAAI,CAACK,cAAc,CAACH,cAAc,IAAIG,cAAc,CAACF,iBAAkB,IACxHqF,UAAU,KAAK,CAAC,IAAInF,cAAc,CAACL,cAAc,IAAIK,cAAc,CAACH,cAAc,IAAIG,cAAc,CAACF,iBAAkB,EAAE;UACnIwF,SAAS,GAAG,uBAAuB;UACnCC,eAAe,GAAG,sCAAsC;QAC1D;QAEA,oBACE9L,OAAA;UAAsBuL,SAAS,EAAC,mBAAmB;UAAAC,QAAA,gBACjDxL,OAAA;YAAKuL,SAAS,EAAE,sFACdI,QAAQ,GACJ,wCAAwC,GACxCC,WAAW,GACT,0CAA0C,GAC1C,2CAA2C,EAChD;YAAAJ,QAAA,EACAI,WAAW,gBACV5L,OAAA,CAACf,WAAW;cAACsM,SAAS,EAAC;YAAS;cAAAQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,gBAEnClM,OAAA;cAAMuL,SAAS,EAAC,qBAAqB;cAAAC,QAAA,EAAEE;YAAU;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO;UACzD;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eACNlM,OAAA;YAAKuL,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnBxL,OAAA;cAAGuL,SAAS,EAAE,uBAAuBI,QAAQ,GAAG,YAAY,GAAG,eAAe,EAAG;cAAAH,QAAA,EAC9EK;YAAS;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC,eACJlM,OAAA;cAAGuL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAEM;YAAe;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvD,CAAC,EACLR,UAAU,GAAGD,UAAU,iBACtBzL,OAAA;YAAKuL,SAAS,EAAE,mBAAmBK,WAAW,GAAG,cAAc,GAAG,aAAa;UAAG;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CACrF;QAAA,GAtBOR,UAAU;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAuBf,CAAC;MAEV,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EAED,MAAMC,eAAe,GAAGA,CAACvG,KAAK,EAAEkC,KAAK,EAAE8B,IAAI,GAAG,MAAM,EAAEwC,OAAO,GAAG,IAAI,EAAEC,QAAQ,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAEC,aAAa,GAAG,KAAK,kBACxHvM,OAAA;IAAKuL,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBxL,OAAA;MAAOuL,SAAS,EAAC,qDAAqD;MAAAC,QAAA,GACnEc,IAAI,iBAAI5N,KAAK,CAAC8N,aAAa,CAACF,IAAI,EAAE;QAAEf,SAAS,EAAE;MAAe,CAAC,CAAC,EAChE3F,KAAK,EACLyG,QAAQ,iBAAIrM,OAAA;QAAMuL,SAAS,EAAC,mBAAmB;QAAAC,QAAA,EAAC;MAAC;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpD,CAAC,EAEPtC,IAAI,KAAK,QAAQ,gBAChB5J,OAAA;MACEmE,KAAK,EAAEzD,QAAQ,CAACoH,KAAK,CAAE;MACvB2E,QAAQ,EAAGxE,CAAC,IAAKJ,iBAAiB,CAACC,KAAK,EAAEG,CAAC,CAACI,MAAM,CAAClE,KAAK,CAAE;MAC1DoH,SAAS,EAAE,wJACT7H,UAAU,CAACoE,KAAK,CAAC,GAAG,gBAAgB,GAAG,uCAAuC,EAC7E;MAAA0D,QAAA,gBAEHxL,OAAA;QAAQmE,KAAK,EAAC,EAAE;QAAAqH,QAAA,GAAC,SAAO,EAAC5F,KAAK;MAAA;QAAAmG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC,EACvCE,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEM,GAAG,CAACC,MAAM,iBAClB3M,OAAA;QAA2BmE,KAAK,EAAEwI,MAAM,CAACxI,KAAM;QAACoH,SAAS,EAAC,aAAa;QAAAC,QAAA,EACpEmB,MAAM,CAAC/G;MAAK,GADF+G,MAAM,CAACxI,KAAK;QAAA4H,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEjB,CACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC,GACPtC,IAAI,KAAK,UAAU,gBACrB5J,OAAA;MACEmE,KAAK,EAAEzD,QAAQ,CAACoH,KAAK,CAAE;MACvB2E,QAAQ,EAAGxE,CAAC,IAAKJ,iBAAiB,CAACC,KAAK,EAAEG,CAAC,CAACI,MAAM,CAAClE,KAAK,CAAE;MAC1DyI,IAAI,EAAE,CAAE;MACRC,WAAW,EAAE,SAASjH,KAAK,CAACkH,WAAW,CAAC,CAAC,KAAM;MAC/CvB,SAAS,EAAE,oKACT7H,UAAU,CAACoE,KAAK,CAAC,GAAG,gBAAgB,GAAG,uCAAuC;IAC7E;MAAAiE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,GACAtC,IAAI,KAAK,UAAU,gBACrB5J,OAAA;MAAOuL,SAAS,EAAC,4CAA4C;MAAAC,QAAA,gBAC3DxL,OAAA;QACE4J,IAAI,EAAC,UAAU;QACfmD,OAAO,EAAErM,QAAQ,CAACoH,KAAK,CAAE;QACzB2E,QAAQ,EAAGxE,CAAC,IAAKJ,iBAAiB,CAACC,KAAK,EAAEG,CAAC,CAACI,MAAM,CAAC0E,OAAO,CAAE;QAC5DxB,SAAS,EAAC;MAAuE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClF,CAAC,eACFlM,OAAA;QAAMuL,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAE5F;MAAK;QAAAmG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CAAC,gBAERlM,OAAA;MAAKuL,SAAS,EAAC,UAAU;MAAAC,QAAA,GACtB,CAAC,eAAe,EAAE,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE,cAAc,EAAE,eAAe,EAAE,qBAAqB,EAAE,eAAe,CAAC,CAACrF,QAAQ,CAAC2B,KAAK,CAAC,iBACrJ9H,OAAA;QAAKuL,SAAS,EAAC,0EAA0E;QAAAC,QAAA,EAAC;MAAC;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACjG,eACDlM,OAAA;QACE4J,IAAI,EAAEA,IAAK;QACXzF,KAAK,EAAEzD,QAAQ,CAACoH,KAAK,CAAE;QACvB2E,QAAQ,EAAGxE,CAAC,IAAK;UACfJ,iBAAiB,CAACC,KAAK,EAAEG,CAAC,CAACI,MAAM,CAAClE,KAAK,CAAC;UACxC,IAAIoI,aAAa,IAAIzE,KAAK,KAAK,YAAY,EAAEF,kBAAkB,CAACK,CAAC,CAACI,MAAM,CAAClE,KAAK,CAAC;UAC/E;UACA,IAAI,CAACoI,aAAa,IAAIzE,KAAK,KAAK,YAAY,IAAI,CAAC,CAAC,WAAW,EAAC,gBAAgB,EAAC,aAAa,CAAC,CAAC3B,QAAQ,CAACzF,QAAQ,CAACS,QAAQ,CAAC,EAAEqG,aAAa,CAACS,CAAC,CAACI,MAAM,CAAClE,KAAK,CAAC;QAC1J,CAAE;QACF0I,WAAW,EAAE,SAASjH,KAAK,CAACkH,WAAW,CAAC,CAAC,KAAM;QAC/CvB,SAAS,EAAE,wJACT7H,UAAU,CAACoE,KAAK,CAAC,GAAG,gBAAgB,GAAG,uCAAuC,IAC5EA,KAAK,KAAK,KAAK,GAAG,OAAO,GAAG,EAAE,IAAI,CAAC,eAAe,EAAE,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE,cAAc,EAAE,eAAe,EAAE,qBAAqB,EAAE,eAAe,CAAC,CAAC3B,QAAQ,CAAC2B,KAAK,CAAC,GAAG,iBAAiB,GAAG,EAAE;MAAG;QAAAiE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzN,CAAC,EAEDpE,KAAK,KAAK,KAAK,IAAIpH,QAAQ,CAACE,GAAG,CAAC6D,MAAM,KAAK,EAAE,iBAC5CzE,OAAA;QAAKuL,SAAS,EAAC,qDAAqD;QAAAC,QAAA,EACjEtI,WAAW,gBACVlD,OAAA,CAACd,OAAO;UAACqM,SAAS,EAAC;QAAoC;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,GACxD9I,UAAU,gBACZpD,OAAA,CAACf,WAAW;UAACsM,SAAS,EAAC;QAAwB;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAElDlM,OAAA;UACEgN,OAAO,EAAEA,CAAA,KAAMxG,SAAS,CAAC9F,QAAQ,CAACE,GAAG,CAAE;UACvC2K,SAAS,EAAC,sFAAsF;UAAAC,QAAA,EACjG;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MACT;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CACN,EAGAK,aAAa,IAAIzE,KAAK,KAAK,YAAY,IAAItE,sBAAsB,CAACiB,MAAM,GAAG,CAAC,iBAC3EzE,OAAA;QAAKuL,SAAS,EAAC,6HAA6H;QAAAC,QAAA,EACzIhI,sBAAsB,CAACkJ,GAAG,CAACO,MAAM,iBAChCjN,OAAA;UAEEuL,SAAS,EAAC,+EAA+E;UACzFyB,OAAO,EAAEA,CAAA,KAAM;YACbrM,WAAW,CAACwG,IAAI;cAAA,IAAA+F,eAAA;cAAA,OAAK;gBACnB,GAAG/F,IAAI;gBACPgG,UAAU,EAAEF,MAAM,CAAC7M,IAAI;gBACvBgN,aAAa,EAAEH,MAAM,CAACI,OAAO;gBAC7BC,WAAW,EAAEL,MAAM,CAAClD,KAAK;gBACzBwD,WAAW,EAAE,EAAAL,eAAA,GAAAD,MAAM,CAACpD,OAAO,cAAAqD,eAAA,uBAAdA,eAAA,CAAgBlD,KAAK,KAAIiD,MAAM,CAACjD,KAAK,IAAI,EAAE;gBACxDwD,aAAa,EAAEP,MAAM,CAACQ,QAAQ,IAAIR,MAAM,CAACnD,OAAO,IAAI;cACtD,CAAC;YAAA,CAAC,CAAC;YACHrG,yBAAyB,CAAC,EAAE,CAAC;UAC/B,CAAE;UAAA+H,QAAA,gBAEFxL,OAAA;YAAKuL,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAEyB,MAAM,CAAC7M;UAAI;YAAA2L,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC3DlM,OAAA;YAAKuL,SAAS,EAAC,uBAAuB;YAAAC,QAAA,GAAEyB,MAAM,CAACI,OAAO,EAAC,UAAG,EAACJ,MAAM,CAACQ,QAAQ;UAAA;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA,GAf5Ee,MAAM,CAACS,EAAE;UAAA3B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAgBX,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN,EAEA,CAACK,aAAa,IAAIzE,KAAK,KAAK,YAAY,IAAI,CAAC,CAAC,WAAW,EAAC,gBAAgB,EAAC,aAAa,CAAC,CAAC3B,QAAQ,CAACzF,QAAQ,CAACS,QAAQ,CAAC,IAAImC,iBAAiB,CAACmB,MAAM,GAAG,CAAC,iBACpJzE,OAAA;QAAKuL,SAAS,EAAC,6HAA6H;QAAAC,QAAA,EACzIlI,iBAAiB,CAACoJ,GAAG,CAACO,MAAM,iBAC3BjN,OAAA;UAEEuL,SAAS,EAAC,+EAA+E;UACzFyB,OAAO,EAAEA,CAAA,KAAM;YACbrM,WAAW,CAACwG,IAAI;cAAA,IAAAwG,gBAAA;cAAA,OAAK;gBACnB,GAAGxG,IAAI;gBACPhF,UAAU,EAAE8K,MAAM,CAAC7M,IAAI;gBACvBgC,aAAa,EAAE6K,MAAM,CAACI,OAAO;gBAC7B/K,WAAW,EAAE2K,MAAM,CAAClD,KAAK;gBACzBxH,WAAW,EAAE,EAAAoL,gBAAA,GAAAV,MAAM,CAACpD,OAAO,cAAA8D,gBAAA,uBAAdA,gBAAA,CAAgB3D,KAAK,KAAIiD,MAAM,CAACjD,KAAK,IAAI;cACxD,CAAC;YAAA,CAAC,CAAC;YACHzG,oBAAoB,CAAC,EAAE,CAAC;UAC1B,CAAE;UAAAiI,QAAA,gBAEFxL,OAAA;YAAKuL,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAEyB,MAAM,CAAC7M;UAAI;YAAA2L,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC3DlM,OAAA;YAAKuL,SAAS,EAAC,uBAAuB;YAAAC,QAAA,GAAEyB,MAAM,CAACI,OAAO,EAAC,UAAG,EAACJ,MAAM,CAACQ,QAAQ;UAAA;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA,GAd5Ee,MAAM,CAACS,EAAE;UAAA3B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAeX,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN,EAEAxI,UAAU,CAACoE,KAAK,CAAC,iBAChB9H,OAAA;MAAKuL,SAAS,EAAC,wCAAwC;MAAAC,QAAA,gBACrDxL,OAAA,CAACF,WAAW;QAACyL,SAAS,EAAC;MAAc;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACvCxI,UAAU,CAACoE,KAAK,CAAC;IAAA;MAAAiE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACf,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CACN;EAED,MAAM0B,UAAU,GAAGA,CAAA,KAAM;IACvB,QAAQ9J,WAAW;MACjB,KAAK,CAAC;QACJ,oBACE9D,OAAA;UAAKuL,SAAS,EAAC,WAAW;UAAAC,QAAA,gBAExBxL,OAAA;YAAKuL,SAAS,EAAC,kDAAkD;YAAAC,QAAA,gBAC/DxL,OAAA;cAAIuL,SAAS,EAAC,qCAAqC;cAAAC,QAAA,EAAC;YAAmB;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EAC3EC,eAAe,CAAC,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAExG,SAAS,EAAE,IAAI,EAAE9G,GAAG,CAAC,eACzEmB,OAAA;cAAKuL,SAAS,EAAC,MAAM;cAAAC,QAAA,EAClBW,eAAe,CAAC,aAAa,EAAE,kBAAkB,EAAE,QAAQ,EAAEpG,mBAAmB,EAAE,IAAI;YAAC;cAAAgG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENlM,OAAA;YAAKuL,SAAS,EAAC,kDAAkD;YAAAC,QAAA,gBAC/DxL,OAAA;cAAIuL,SAAS,EAAC,qCAAqC;cAAAC,QAAA,EAAC;YAAmB;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC5ElM,OAAA;cAAKuL,SAAS,EAAC,uCAAuC;cAAAC,QAAA,gBACpDxL,OAAA;gBAAKuL,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAC3BW,eAAe,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE1M,IAAI;cAAC;gBAAAsM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrD,CAAC,EACLC,eAAe,CAAC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAEhN,QAAQ,CAAC,EAC/DgN,eAAe,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,EACnDA,eAAe,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,EACrDA,eAAe,CAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAExM,KAAK,CAAC,EACnEwM,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAEzM,OAAO,CAAC,EAChFyM,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAEzM,OAAO,CAAC;YAAA;cAAAqM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9E,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAGV,KAAK,CAAC;QACJ,oBACElM,OAAA;UAAKuL,SAAS,EAAC,WAAW;UAAAC,QAAA,eAExBxL,OAAA;YAAKuL,SAAS,EAAC,kDAAkD;YAAAC,QAAA,gBAC/DxL,OAAA;cAAIuL,SAAS,EAAC,qCAAqC;cAAAC,QAAA,EAAC;YAAkB;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC3ElM,OAAA;cAAKuL,SAAS,EAAC,uCAAuC;cAAAC,QAAA,GACnDW,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,QAAQ,EAAEtG,cAAc,EAAE,IAAI,EAAEzG,UAAU,CAAC,EAC9F+M,eAAe,CAAC,oBAAoB,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAEhN,QAAQ,CAAC,EACnFgN,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,QAAQ,EAAErG,cAAc,EAAE,IAAI,CAAC,EAClFqG,eAAe,CAAC,iBAAiB,EAAE,eAAe,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE1M,IAAI,CAAC,EAC9E0M,eAAe,CAAC,aAAa,EAAE,aAAa,EAAE,QAAQ,EAAEnG,kBAAkB,EAAE,IAAI,EAAE3G,IAAI,CAAC;YAAA;cAAA0M,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAEV,KAAK,CAAC;QACJ,OAAO3F,cAAc,CAACL,cAAc,gBAClClG,OAAA;UAAKuL,SAAS,EAAC,kDAAkD;UAAAC,QAAA,gBAC/DxL,OAAA;YAAIuL,SAAS,EAAC,qCAAqC;YAAAC,QAAA,EAAC;UAAqB;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EAC7ExL,QAAQ,CAACU,gBAAgB,KAAK,MAAM,gBACnCpB,OAAA;YAAKuL,SAAS,EAAC,WAAW;YAAAC,QAAA,GACvBW,eAAe,CAACzG,aAAa,CAACH,kBAAkB,EAAE,eAAe,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAEnG,UAAU,CAAC,EACpG+M,eAAe,CAAC,eAAe,EAAE,cAAc,EAAE,QAAQ,CAAC,EAC1DA,eAAe,CAAC,uBAAuB,EAAE,qBAAqB,EAAE,MAAM,CAAC,EACvEA,eAAe,CAAC,wBAAwB,EAAE,qBAAqB,EAAE,QAAQ,CAAC,EAC1EA,eAAe,CAAC,kBAAkB,EAAE,eAAe,EAAE,QAAQ,CAAC;UAAA;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CAAC,gBAENlM,OAAA;YAAKuL,SAAS,EAAC,uCAAuC;YAAAC,QAAA,gBAEpDxL,OAAA;cAAKuL,SAAS,EAAC,WAAW;cAAAC,QAAA,GACvBW,eAAe,CAACzG,aAAa,CAACH,kBAAkB,EAAE,eAAe,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAEnG,UAAU,CAAC,EACpG+M,eAAe,CAAC,YAAY,EAAE,WAAW,EAAE,QAAQ,CAAC,EACpDA,eAAe,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,QAAQ,CAAC,EAC9DA,eAAe,CAAC,YAAY,EAAE,WAAW,EAAE,QAAQ,CAAC,EAEpD,CAAC,WAAW,EAAC,WAAW,EAAC,WAAW,EAAC,cAAc,CAAC,CAAChG,QAAQ,CAACzF,QAAQ,CAACU,gBAAgB,CAAC,GACrF+K,eAAe,CAAC,qBAAqB,EAAE,gBAAgB,EAAE,QAAQ,CAAC,GAClE,IAAI;YAAA;cAAAJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eAENlM,OAAA;cAAKuL,SAAS,EAAC,WAAW;cAAAC,QAAA,GACvBW,eAAe,CAAC,eAAe,EAAE,cAAc,EAAE,QAAQ,CAAC,EAC1DA,eAAe,CAAC,uBAAuB,EAAE,qBAAqB,EAAE,MAAM,CAAC,EACvEA,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,QAAQ,CAAC,EAC5DA,eAAe,CAAC,wBAAwB,EAAE,qBAAqB,EAAE,QAAQ,CAAC,EAC1EA,eAAe,CAAC,kBAAkB,EAAE,eAAe,EAAE,QAAQ,CAAC;YAAA;cAAAJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5D,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,gBAENlM,OAAA;UAAKuL,SAAS,EAAC,mBAAmB;UAAAC,QAAA,gBAChCxL,OAAA,CAACZ,UAAU;YAACmM,SAAS,EAAC;UAAsC;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC/DlM,OAAA;YAAIuL,SAAS,EAAC,qCAAqC;YAAAC,QAAA,EAAC;UAAkC;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC3FlM,OAAA;YAAGuL,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAsD;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpF,CACN;MAEH,KAAK,CAAC;QACJ;QACA,IAAIxL,QAAQ,CAACS,QAAQ,KAAK,gBAAgB,IAAIT,QAAQ,CAACU,gBAAgB,KAAK,UAAU,EAAE;UACtF,oBACEpB,OAAA;YAAKuL,SAAS,EAAC,6DAA6D;YAAAC,QAAA,gBAC1ExL,OAAA;cAAAwL,QAAA,gBACExL,OAAA;gBAAIuL,SAAS,EAAC,qCAAqC;gBAAAC,QAAA,EAAC;cAAmB;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC5ElM,OAAA;gBAAKuL,SAAS,EAAC,uCAAuC;gBAAAC,QAAA,GACnDW,eAAe,CAAC,aAAa,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE9M,IAAI,EAAE,IAAI,CAAC,EAC5E8M,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,MAAM,CAAC,EAC1DA,eAAe,CAAC,cAAc,EAAE,aAAa,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE5M,KAAK,CAAC,EACzE4M,eAAe,CAAC,cAAc,EAAE,aAAa,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE3M,IAAI,CAAC,EAC1E2M,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE7M,MAAM,CAAC;cAAA;gBAAAyM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7E,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACNlM,OAAA;cAAAwL,QAAA,gBACExL,OAAA;gBAAIuL,SAAS,EAAC,qCAAqC;gBAAAC,QAAA,EAAC;cAAoB;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC7ElM,OAAA;gBAAKuL,SAAS,EAAC,uCAAuC;gBAAAC,QAAA,GACnDW,eAAe,CAAC,aAAa,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE9M,IAAI,CAAC,EACtE8M,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,MAAM,CAAC,EAC1DA,eAAe,CAAC,cAAc,EAAE,aAAa,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE5M,KAAK,CAAC,EACzE4M,eAAe,CAAC,cAAc,EAAE,aAAa,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE3M,IAAI,CAAC,EAC1E2M,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE7M,MAAM,CAAC;cAAA;gBAAAyM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7E,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAEV,CAAC,MAAM;UACL,oBACElM,OAAA;YAAKuL,SAAS,EAAC,kDAAkD;YAAAC,QAAA,gBAC/DxL,OAAA;cAAIuL,SAAS,EAAC,qCAAqC;cAAAC,QAAA,EAAE9F,aAAa,CAACD;YAAkB;cAAAsG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC3FlM,OAAA;cAAKuL,SAAS,EAAC,uCAAuC;cAAAC,QAAA,gBACpDxL,OAAA;gBAAKuL,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAC3BW,eAAe,CAACzG,aAAa,CAACF,WAAW,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAEnG,IAAI;cAAC;gBAAA0M,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChF,CAAC,EACLC,eAAe,CAAC,gBAAgB,EAAE,eAAe,EAAE,MAAM,CAAC,EAC1DA,eAAe,CAAC,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE5M,KAAK,CAAC,EAClE4M,eAAe,CAAC,OAAO,EAAE,aAAa,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE3M,IAAI,CAAC,eACpEQ,OAAA;gBAAKuL,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAC3BW,eAAe,CAAC,SAAS,EAAE,eAAe,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE7M,MAAM;cAAC;gBAAAyM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAEV;MAEF,KAAK,CAAC;QACJ,OAAO3F,cAAc,CAACF,iBAAiB,gBACrCrG,OAAA;UAAKuL,SAAS,EAAC,kDAAkD;UAAAC,QAAA,gBAC/DxL,OAAA;YAAIuL,SAAS,EAAC,qCAAqC;YAAAC,QAAA,EAAC;UAAqB;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC9ElM,OAAA;YAAKuL,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACxBxL,OAAA;cAAKuL,SAAS,EAAC,uCAAuC;cAAAC,QAAA,gBACpDxL,OAAA;gBAAKuL,SAAS,EAAC,WAAW;gBAAAC,QAAA,gBACxBxL,OAAA;kBAAIuL,SAAS,EAAC,qCAAqC;kBAAAC,QAAA,EAAC;gBAAoB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,EAC5EC,eAAe,CAAC,mBAAmB,EAAE,kBAAkB,EAAE,UAAU,CAAC,EACpEA,eAAe,CAAC,eAAe,EAAE,cAAc,EAAE,UAAU,CAAC,EAC5DA,eAAe,CAAC,wBAAwB,EAAE,sBAAsB,EAAE,UAAU,CAAC,EAC7EA,eAAe,CAAC,kBAAkB,EAAE,iBAAiB,EAAE,UAAU,CAAC,EAClEA,eAAe,CAAC,wBAAwB,EAAE,sBAAsB,EAAE,UAAU,CAAC;cAAA;gBAAAJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3E,CAAC,eACNlM,OAAA;gBAAKuL,SAAS,EAAC,WAAW;gBAAAC,QAAA,GACvBW,eAAe,CAAC,qBAAqB,EAAE,oBAAoB,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAEvM,IAAI,CAAC,eAE5FI,OAAA;kBAAAwL,QAAA,gBACExL,OAAA;oBAAOuL,SAAS,EAAC,2CAA2C;oBAAAC,QAAA,EAAC;kBAAuB;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC5FlM,OAAA;oBACE4J,IAAI,EAAC,MAAM;oBACXiE,QAAQ;oBACRC,MAAM,EAAC,yBAAyB;oBAChCrB,QAAQ,EAAEzE,oBAAqB;oBAC/BuD,SAAS,EAAC;kBAAwL;oBAAAQ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnM,CAAC,EAEDxL,QAAQ,CAACsC,SAAS,IAAItC,QAAQ,CAACsC,SAAS,CAACyB,MAAM,GAAG,CAAC,iBAClDzE,OAAA;oBAAKuL,SAAS,EAAC,gBAAgB;oBAAAC,QAAA,EAC5B9K,QAAQ,CAACsC,SAAS,CAAC0J,GAAG,CAAC,CAACqB,IAAI,EAAEC,GAAG,kBAChChO,OAAA;sBAAeuL,SAAS,EAAC,qDAAqD;sBAAAC,QAAA,GAC3EuC,IAAI,CAACnE,IAAI,IAAImE,IAAI,CAACnE,IAAI,CAACqE,UAAU,CAAC,OAAO,CAAC,gBACzCjO,OAAA;wBAAKkO,GAAG,EAAEC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAE;wBAACM,GAAG,EAAEN,IAAI,CAAC3N,IAAK;wBAACmL,SAAS,EAAC;sBAAgC;wBAAAQ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,gBAElGlM,OAAA;wBAAMuL,SAAS,EAAC,wFAAwF;wBAAAC,QAAA,EAAC;sBAAG;wBAAAO,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CACnH,eACDlM,OAAA;wBAAMuL,SAAS,EAAC,sCAAsC;wBAAAC,QAAA,EAAEuC,IAAI,CAAC3N;sBAAI;wBAAA2L,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,eACzElM,OAAA;wBACE4J,IAAI,EAAC,QAAQ;wBACb2B,SAAS,EAAC,6DAA6D;wBACvEyB,OAAO,EAAEA,CAAA,KAAM1E,oBAAoB,CAAC0F,GAAG,CAAE;wBAAAxC,QAAA,EAC1C;sBAED;wBAAAO,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CAAC;oBAAA,GAbD8B,GAAG;sBAAAjC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAcR,CACN;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CACN;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACNlM,OAAA;cAAAwL,QAAA,EACGW,eAAe,CAAC,eAAe,EAAE,cAAc,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAEvM,IAAI;YAAC;cAAAmM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7E,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,gBAENlM,OAAA;UAAKuL,SAAS,EAAC,mBAAmB;UAAAC,QAAA,gBAChCxL,OAAA,CAACJ,IAAI;YAAC2L,SAAS,EAAC;UAAsC;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACzDlM,OAAA;YAAIuL,SAAS,EAAC,qCAAqC;YAAAC,QAAA,EAAC;UAA0B;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACnFlM,OAAA;YAAGuL,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAuD;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrF,CACN;MAEH;QACE,OAAO,IAAI;IACf;EACF,CAAC;;EAED;EACA,MAAMoC,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIC,KAAK,GAAG,CAAC,CAAC,CAAC;IACf,IAAIhI,cAAc,CAACL,cAAc,EAAEqI,KAAK,EAAE;IAC1C,IAAIhI,cAAc,CAACH,cAAc,EAAEmI,KAAK,EAAE;IAC1C,IAAIhI,cAAc,CAACF,iBAAiB,EAAEkI,KAAK,EAAE;IAC7C,OAAOA,KAAK;EACd,CAAC;EAED,MAAM9C,UAAU,GAAG6C,aAAa,CAAC,CAAC;EAElC,oBACEtO,OAAA;IAAKuL,SAAS,EAAC,oEAAoE;IAAAC,QAAA,gBAEjFxL,OAAA;MAAKuL,SAAS,EAAC,mDAAmD;MAAAC,QAAA,gBAChExL,OAAA;QAAKuL,SAAS,EAAC;MAAwF;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC9GlM,OAAA;QAAKuL,SAAS,EAAC;MAAuG;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1H,CAAC,eAGNlM,OAAA;MAAQuL,SAAS,EAAC,gEAAgE;MAAAC,QAAA,eAChFxL,OAAA;QAAKuL,SAAS,EAAC,6BAA6B;QAAAC,QAAA,eAC1CxL,OAAA;UAAKuL,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDxL,OAAA;YAAKuL,SAAS,EAAC,mBAAmB;YAAAC,QAAA,gBAChCxL,OAAA;cACEgN,OAAO,EAAEA,CAAA,KAAM5B,MAAM,CAACoD,OAAO,CAACC,IAAI,CAAC,CAAE;cACrClD,SAAS,EAAC,4FAA4F;cAAAC,QAAA,eAEtGxL,OAAA,CAAClB,SAAS;gBAACyM,SAAS,EAAC;cAAoB;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtC,CAAC,eACTlM,OAAA;cAAKuL,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChCxL,OAAA;gBAAKuL,SAAS,EAAC,6FAA6F;gBAAAC,QAAA,eAC1GxL,OAAA,CAACH,IAAI;kBAAC0L,SAAS,EAAC;gBAAoB;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpC,CAAC,eACNlM,OAAA;gBAAAwL,QAAA,gBACExL,OAAA;kBAAIuL,SAAS,EAAC,8BAA8B;kBAAAC,QAAA,EAAC;gBAAc;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAChElM,OAAA;kBAAGuL,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,EAAC;gBAAyB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/D,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENlM,OAAA;YAAKuL,SAAS,EAAC,6BAA6B;YAAAC,QAAA,gBAC1CxL,OAAA;cACEgN,OAAO,EAAEA,CAAA,KAAM3D,UAAU,CAAC,IAAI,CAAE;cAChCqF,QAAQ,EAAE9K,MAAO;cACjB2H,SAAS,EAAC,8IAA8I;cAAAC,QAAA,GAEvJ5H,MAAM,gBAAG5D,OAAA,CAACd,OAAO;gBAACqM,SAAS,EAAC;cAA2B;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAAGlM,OAAA,CAACjB,IAAI;gBAACwM,SAAS,EAAC;cAAc;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,EAAC,YAElG;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAETlM,OAAA;cACEgN,OAAO,EAAEA,CAAA,KAAM3D,UAAU,CAAC,KAAK,CAAE;cACjCqF,QAAQ,EAAE9K,MAAO;cACjB2H,SAAS,EAAC,oLAAoL;cAAAC,QAAA,GAE7L5H,MAAM,gBAAG5D,OAAA,CAACd,OAAO;gBAACqM,SAAS,EAAC;cAA2B;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAAGlM,OAAA,CAACf,WAAW;gBAACsM,SAAS,EAAC;cAAc;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,EAAC,aAEzG;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAETlM,OAAA;MAAKuL,SAAS,EAAC,sCAAsC;MAAAC,QAAA,GAElDF,mBAAmB,CAAC,CAAC,eAGtBtL,OAAA;QAAKuL,SAAS,EAAC,oEAAoE;QAAAC,QAAA,gBACjFxL,OAAA;UAAKuL,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACnBxL,OAAA;YAAIuL,SAAS,EAAC,oCAAoC;YAAAC,QAAA,GAC/C1H,WAAW,KAAK,CAAC,IAAI,iCAAiC,EACtDA,WAAW,KAAK,CAAC,IAAI,oBAAoB,EACzCA,WAAW,KAAK,CAAC,IAAIyC,cAAc,CAACL,cAAc,IAAI,uBAAuB,EAC7EpC,WAAW,KAAK,CAAC,IAAI,CAACyC,cAAc,CAACL,cAAc,IAAIK,cAAc,CAACH,cAAc,IAAI,oBAAoB,EAC5GtC,WAAW,KAAK,CAAC,IAAI,CAACyC,cAAc,CAACL,cAAc,IAAI,CAACK,cAAc,CAACH,cAAc,IAAIG,cAAc,CAACF,iBAAiB,IAAI,uBAAuB,EACpJvC,WAAW,KAAK,CAAC,IAAIyC,cAAc,CAACL,cAAc,IAAIK,cAAc,CAACH,cAAc,IAAI,oBAAoB,EAC3GtC,WAAW,KAAK,CAAC,IAAIyC,cAAc,CAACL,cAAc,IAAI,CAACK,cAAc,CAACH,cAAc,IAAIG,cAAc,CAACF,iBAAiB,IAAI,uBAAuB,EACnJvC,WAAW,KAAK,CAAC,IAAI,uBAAuB;UAAA;YAAAiI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3C,CAAC,eACLlM,OAAA;YAAGuL,SAAS,EAAC,eAAe;YAAAC,QAAA,GACzB1H,WAAW,KAAK,CAAC,IAAI,0DAA0D,EAC/EA,WAAW,KAAK,CAAC,IAAI,4CAA4C,EACjEA,WAAW,KAAK,CAAC,IAAIyC,cAAc,CAACL,cAAc,IAAI,iCAAiC,EACvFpC,WAAW,KAAK,CAAC,IAAI,CAACyC,cAAc,CAACL,cAAc,IAAIK,cAAc,CAACH,cAAc,IAAI,gCAAgC,EACxHtC,WAAW,KAAK,CAAC,IAAI,CAACyC,cAAc,CAACL,cAAc,IAAI,CAACK,cAAc,CAACH,cAAc,IAAIG,cAAc,CAACF,iBAAiB,IAAI,sCAAsC,EACnKvC,WAAW,KAAK,CAAC,IAAIyC,cAAc,CAACL,cAAc,IAAIK,cAAc,CAACH,cAAc,IAAI,gCAAgC,EACvHtC,WAAW,KAAK,CAAC,IAAIyC,cAAc,CAACL,cAAc,IAAI,CAACK,cAAc,CAACH,cAAc,IAAIG,cAAc,CAACF,iBAAiB,IAAI,sCAAsC,EAClKvC,WAAW,KAAK,CAAC,IAAI,sCAAsC;UAAA;YAAAiI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,EAEL0B,UAAU,CAAC,CAAC,eAGb5N,OAAA;UAAKuL,SAAS,EAAC,sEAAsE;UAAAC,QAAA,gBACnFxL,OAAA;YACEgN,OAAO,EAAEA,CAAA,KAAMjJ,cAAc,CAAC4K,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE9K,WAAW,GAAG,CAAC,CAAC,CAAE;YAC5D4K,QAAQ,EAAE5K,WAAW,KAAK,CAAE;YAC5ByH,SAAS,EAAC,8HAA8H;YAAAC,QAAA,gBAExIxL,OAAA,CAAClB,SAAS;cAACyM,SAAS,EAAC;YAAc;cAAAQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,YAExC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAETlM,OAAA;YAAKuL,SAAS,EAAC,6BAA6B;YAAAC,QAAA,GACzC1H,WAAW,KAAK2H,UAAU,IAAI/K,QAAQ,CAAC+B,kBAAkB,iBACxDzC,OAAA;cACEgN,OAAO,EAAE/B,wBAAyB;cAClCM,SAAS,EAAC,uGAAuG;cAAAC,QAAA,gBAEjHxL,OAAA,CAAChB,IAAI;gBAACuM,SAAS,EAAC;cAAc;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,yBAEnC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CACT,EAEApI,WAAW,GAAG2H,UAAU,gBACvBzL,OAAA;cACEgN,OAAO,EAAEA,CAAA,KAAMjJ,cAAc,CAAC4K,IAAI,CAACE,GAAG,CAACpD,UAAU,EAAE3H,WAAW,GAAG,CAAC,CAAC,CAAE;cACrEyH,SAAS,EAAC,sJAAsJ;cAAAC,QAAA,GACjK,MAEC,eAAAxL,OAAA,CAAClB,SAAS;gBAACyM,SAAS,EAAC;cAAyB;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3C,CAAC,gBAETlM,OAAA;cACEgN,OAAO,EAAEA,CAAA,KAAM3D,UAAU,CAAC,KAAK,CAAE;cACjCqF,QAAQ,EAAE9K,MAAO;cACjB2H,SAAS,EAAC,kLAAkL;cAAAC,QAAA,GAE3L5H,MAAM,gBAAG5D,OAAA,CAACd,OAAO;gBAACqM,SAAS,EAAC;cAA2B;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAAGlM,OAAA,CAACf,WAAW;gBAACsM,SAAS,EAAC;cAAc;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,EAAC,eAEzG;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CACT;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGLhJ,WAAW,iBACVlD,OAAA;QAAKuL,SAAS,EAAC,gGAAgG;QAAAC,QAAA,gBAC7GxL,OAAA,CAACd,OAAO;UAACqM,SAAS,EAAC;QAA2B;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,mBAEnD;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN,EAEA9I,UAAU,iBACTpD,OAAA;QAAKuL,SAAS,EAAC,iGAAiG;QAAAC,QAAA,gBAC9GxL,OAAA,CAACf,WAAW;UAACsM,SAAS,EAAC;QAAc;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,6BAE1C;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAChM,EAAA,CAziCID,YAAY;AAAA6O,EAAA,GAAZ7O,YAAY;AA2iClB,eAAeA,YAAY;AAAC,IAAA6O,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}