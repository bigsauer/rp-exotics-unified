{"ast":null,"code":"var _jsxFileName = \"/Users/bsauer02/Desktop/Opis3.0/rp-exotics-unified/frontend/src/components/NewDealEntry.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Car, ArrowLeft, Save, Send, CheckCircle, Loader2, Calendar, DollarSign, User, MapPin, Phone, Mail, Hash, Palette, Gauge, Info, Plus, AlertCircle } from 'lucide-react';\nimport { useAuth } from './AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NewDealEntry = () => {\n  _s();\n  const {\n    user: currentUser,\n    getAuthHeaders\n  } = useAuth();\n  const navigate = useNavigate();\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!currentUser) {\n      navigate('/login');\n    }\n  }, [currentUser, navigate]);\n\n  // Utility to get backend API URL\n  const API_BASE = process.env.NODE_ENV === 'production' ? '' : 'http://localhost:5001';\n\n  // Utility to merge auth headers\n  const buildHeaders = (extra = {}) => {\n    const headers = {\n      ...getAuthHeaders(),\n      'Content-Type': 'application/json',\n      ...extra\n    };\n    // Debug: log token presence\n    if (!headers['Authorization']) {\n      console.warn('[DEAL SUBMIT] No Authorization token in headers!');\n    } else {\n      console.log('[DEAL SUBMIT] Using Authorization header:', headers['Authorization']);\n    }\n    return headers;\n  };\n  const todayStr = new Date().toISOString().slice(0, 10);\n  const [formData, setFormData] = useState({\n    // Vehicle Information\n    vin: '',\n    year: '',\n    make: '',\n    model: '',\n    mileage: '',\n    exteriorColor: '',\n    interiorColor: '',\n    // Deal Information\n    dealType: '',\n    dealType2SubType: '',\n    // <-- Add this for Deal Type 2 sub-options\n    fundingSource: '',\n    purchaseDate: todayStr,\n    paymentMethod: 'check',\n    // Default to 'check'\n    currentStage: 'initial-contact',\n    // Financial Information\n    purchasePrice: '',\n    listPrice: '',\n    killPrice: '',\n    wholesalePrice: '',\n    commissionRate: '',\n    brokerageFee: '',\n    brokerageFeePaidTo: '',\n    payoffBalance: '',\n    amountDueToCustomer: '',\n    amountDueToRP: '',\n    // Seller Information\n    sellerName: '',\n    sellerAddress: '',\n    sellerPhone: '',\n    sellerEmail: '',\n    sellerLicenseNumber: '',\n    sellerTier: 'Tier 1',\n    // Buyer Information (for buy/sell deals)\n    buyerName: '',\n    buyerAddress: '',\n    buyerPhone: '',\n    buyerEmail: '',\n    buyerLicenseNumber: '',\n    buyerTier: 'Tier 1',\n    // Buy/Sell Configuration\n    buyerType: 'dealer',\n    // 'private' or 'dealer' - default to dealer for buy/sell\n    sellerType: 'private',\n    // 'private' or 'dealer'\n\n    // RP Information\n    rpStockNumber: '',\n    vehicleDescription: '',\n    generalNotes: '',\n    // Documentation\n    contractRequired: false,\n    titlePresent: false,\n    driverLicensePresent: false,\n    odometerPresent: false,\n    dealerLicensePresent: false,\n    documents: [],\n    // For uploaded files\n    salesperson: ''\n  });\n  const [vinDecoding, setVinDecoding] = useState(false);\n  const [vinDecoded, setVinDecoded] = useState(false);\n  const [dealerSuggestions, setDealerSuggestions] = useState([]);\n  const [dealerBuyerSuggestions, setDealerBuyerSuggestions] = useState([]); // For Dealer Info (Buyer)\n  const [dealerSearch, setDealerSearch] = useState('');\n  const [formErrors, setFormErrors] = useState({});\n  const [saving, setSaving] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  // Remove documentTypes and documentTypeSelections state\n  // Add notes state for each file\n  const [documentNotes, setDocumentNotes] = useState([]); // Array of {fileIndex, note}\n\n  useEffect(() => {\n    // Fetch document types from backend\n    fetch(`${API_BASE}/api/backoffice/document-types`, {\n      credentials: 'include'\n    }).then(res => res.json()).then(data => {\n      if (data.success && Array.isArray(data.data)) {\n        // setDocumentTypes(data.data); // This line is removed\n      }\n    }).catch(() => {\n      // setDocumentTypes([]); // This line is removed\n    });\n  }, []);\n\n  // Helper function to format currency input\n  const formatCurrency = value => {\n    if (!value) return '';\n    // Remove all non-numeric characters except decimal point\n    const numericValue = value.toString().replace(/[^\\d.]/g, '');\n    // Ensure only one decimal point\n    const parts = numericValue.split('.');\n    if (parts.length > 2) {\n      return parts[0] + '.' + parts.slice(1).join('');\n    }\n    return numericValue;\n  };\n\n  // Add a helper to join address parts into a single line\n  function joinAddress(address) {\n    if (!address) return '';\n    const {\n      street,\n      city,\n      state,\n      zip\n    } = address;\n    return [street, city, state, zip].filter(Boolean).join(', ');\n  }\n  // Add a helper to parse a single line address into parts\n  function parseAddress(full) {\n    if (!full) return {\n      street: '',\n      city: '',\n      state: '',\n      zip: ''\n    };\n    const parts = full.split(',').map(s => s.trim());\n    return {\n      street: parts[0] || '',\n      city: parts[1] || '',\n      state: parts[2] || '',\n      zip: parts[3] || ''\n    };\n  }\n\n  // Get dynamic labels based on deal type\n  const getDynamicLabels = () => {\n    const dealType2 = formData.dealType2SubType;\n    const isRetailPP = formData.dealType === 'retail-pp';\n    return {\n      purchasePriceLabel: dealType2 === 'sale' ? 'Sale Price' : 'Purchase Price',\n      sellerLabel: dealType2 === 'sale' ? 'Sold To' : 'Purchased From',\n      sellerSectionTitle: dealType2 === 'sale' ? 'Buyer Information' : 'Seller Information',\n      // For retail PP deals, use more generic labels\n      companyLabel: isRetailPP ? 'Company (if applicable)' : 'Company/Dealer',\n      licenseLabel: isRetailPP ? 'License Number (if applicable)' : 'Dealer License Number',\n      addressLabel: isRetailPP ? 'Address' : 'Seller Address'\n    };\n  };\n  const dynamicLabels = getDynamicLabels();\n\n  // Remove Deal Type 2 from main dealTypes\n  const dealTypes = [{\n    value: 'wholesale-d2d',\n    label: 'Wholesale - D2D'\n  }, {\n    value: 'wholesale-private',\n    label: 'Wholesale - Private Party'\n  }, {\n    value: 'wholesale-flip',\n    label: 'Wholesale - Flip'\n  }, {\n    value: 'retail-pp',\n    label: 'Retail - PP'\n  }, {\n    value: 'retail-auction',\n    label: 'Retail - Auction'\n  }, {\n    value: 'retail-dtod',\n    label: 'Retail - DtoD'\n  }, {\n    value: 'auction',\n    label: 'Auction'\n  }];\n  const fundingSources = [{\n    value: 'flpn-retail',\n    label: 'FLPN - Retail'\n  }, {\n    value: 'flpn-wholesale',\n    label: 'FLPN - Wholesale'\n  }, {\n    value: 'cash',\n    label: 'Cash'\n  }, {\n    value: 'flooring-line',\n    label: 'Flooring Line'\n  }, {\n    value: 'consignment',\n    label: 'Consignment'\n  }];\n  const paymentMethods = [{\n    value: 'check',\n    label: 'Check'\n  }, {\n    value: 'wire',\n    label: 'Wire Transfer'\n  }, {\n    value: 'ach',\n    label: 'ACH'\n  }, {\n    value: 'cash',\n    label: 'Cash'\n  }, {\n    value: 'financed',\n    label: 'Financed'\n  }];\n  const dealType2SubOptions = [{\n    value: 'buy',\n    label: 'Buy'\n  }, {\n    value: 'sale',\n    label: 'Sale'\n  }, {\n    value: 'buy-sell',\n    label: 'Buy/Sell'\n  }, {\n    value: 'consign-a',\n    label: 'Consign-A'\n  }, {\n    value: 'consign-b',\n    label: 'Consign-B'\n  }, {\n    value: 'consign-c',\n    label: 'Consign-C'\n  }, {\n    value: 'consign-rdnc',\n    label: 'Consign-RDNC'\n  }];\n\n  // Add to formData initial state\n  // This block is removed as per the edit hint.\n\n  // Add salesperson options\n  const salespersonOptions = [{\n    value: 'Brennan S',\n    label: 'Brennan S'\n  }, {\n    value: 'Parker G',\n    label: 'Parker G'\n  }, {\n    value: 'Dan M',\n    label: 'Dan M'\n  }, {\n    value: 'Adiana P',\n    label: 'Adiana P'\n  }, {\n    value: 'Brett M',\n    label: 'Brett M'\n  }, {\n    value: 'Other',\n    label: 'Other'\n  }];\n\n  // Get deal type specific fields\n  const getDealTypeFields = () => {\n    // Both dealType and dealType2SubType are always required\n    const dealType = formData.dealType;\n    return {\n      showFinancials: ['wholesale-d2d', 'wholesale-private', 'wholesale-flip', 'retail-pp', 'retail-auction', 'retail-dtod', 'auction'].includes(dealType),\n      showSellerInfo: true,\n      showDocumentation: ['wholesale-d2d', 'wholesale-private', 'wholesale-flip', 'retail-pp', 'retail-auction', 'retail-dtod', 'auction'].includes(dealType),\n      requiredFields: ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName']\n    };\n  };\n  const dealTypeFields = getDealTypeFields();\n\n  // Real VIN decode function using backend API\n  const decodeVIN = async vin => {\n    setVinDecoding(true);\n    try {\n      const headers = {\n        ...getAuthHeaders(),\n        'Content-Type': 'application/json'\n      };\n      console.log('[VIN DECODE] Sending request with headers:', headers);\n      const response = await fetch(`${API_BASE}/api/deals/vin/decode`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          vin\n        }),\n        credentials: 'include'\n      });\n      console.log('[VIN DECODE] Response status:', response.status);\n      const data = await response.json();\n      console.log('[VIN DECODE] Response data:', data);\n      if (data.success && data.data) {\n        setFormData(prev => ({\n          ...prev,\n          year: data.data.year || '',\n          make: data.data.make || '',\n          model: data.data.model || ''\n        }));\n        setVinDecoded(true);\n        setTimeout(() => setVinDecoded(false), 3000);\n      } else {\n        console.error('VIN decode failed:', data.error);\n        alert(data.error || 'Unable to decode VIN. Please check the VIN and try again.');\n      }\n    } catch (error) {\n      console.error('[VIN DECODE] Error:', error);\n      alert('Unable to decode VIN. Please check your connection and try again.');\n    } finally {\n      setVinDecoding(false);\n    }\n  };\n\n  // Real dealer search using backend API\n  const searchDealers = async query => {\n    if (query.length < 2) {\n      setDealerSuggestions([]);\n      return;\n    }\n    // setSearchingDealers(true); // Removed unused state\n    try {\n      const response = await fetch(`${API_BASE}/api/dealers/search?q=${encodeURIComponent(query)}`, {\n        credentials: 'include'\n      });\n      const data = await response.json();\n      setDealerSuggestions(data.dealers || []);\n      console.log('[DEALER SEARCH] Suggestions:', data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerSuggestions([]);\n    }\n  };\n\n  // Dealer search for Dealer Info (Buyer)\n  const searchDealersBuyer = async query => {\n    if (query.length < 2) {\n      setDealerBuyerSuggestions([]);\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/api/dealers/search?q=${encodeURIComponent(query)}`, {\n        credentials: 'include'\n      });\n      const data = await response.json();\n      setDealerBuyerSuggestions(data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerBuyerSuggestions([]);\n    }\n  };\n\n  // Autofill dealer info when a suggestion is selected\n  const handleDealerSuggestionClick = dealer => {\n    setFormData(prev => {\n      const updated = {\n        ...prev,\n        sellerName: dealer.name || '',\n        sellerAddress: dealer.addressString || '',\n        sellerPhone: dealer.phone || '',\n        sellerEmail: dealer.email || '',\n        sellerLicenseNumber: dealer.licenseNumber || '',\n        sellerTier: dealer.tier || 'Tier 1',\n        sellerType: 'dealer' // Set sellerType to dealer when a dealer is selected\n      };\n      console.log('[DEBUG] handleDealerSuggestionClick - sellerType set to:', updated.sellerType);\n      return updated;\n    });\n    setDealerSuggestions([]);\n    setDealerSearch('');\n    console.log('[DEALER AUTOFILL] Selected dealer:', dealer);\n    console.log('[DEALER AUTOFILL] Autofilled address:', dealer.addressString);\n    console.log('[DEALER AUTOFILL] Autofilled license number:', dealer.licenseNumber);\n  };\n\n  // Auto-generate stock number\n  // useEffect(() => {\n  //   if (!formData.rpStockNumber && formData.year && formData.make) {\n  //     const year = new Date().getFullYear();\n  //     const stockNumber = `RP${year}${String(Math.floor(Math.random() * 9999) + 1).padStart(4, '0')}`;\n  //     setFormData(prev => ({ ...prev, rpStockNumber: stockNumber }));\n  //   }\n  // }, [formData.year, formData.make, formData.rpStockNumber]);\n\n  const handleInputChange = (field, value) => {\n    let processedValue = value;\n\n    // Handle currency formatting for financial fields\n    if (['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field)) {\n      processedValue = formatCurrency(value);\n    }\n\n    // If changing dealType, reset dealType2SubType unless still deal-type-2\n    if (field === 'dealType') {\n      setFormData(prev => ({\n        ...prev,\n        dealType: processedValue,\n        dealType2SubType: processedValue === 'deal-type-2' ? prev.dealType2SubType : processedValue === 'wholesale-flip' ? 'buy-sell' : ''\n      }));\n      if (currentStep > 1) setCurrentStep(1);\n      return;\n    }\n    setFormData(prev => ({\n      ...prev,\n      [field]: processedValue\n    }));\n\n    // Clear error when user starts typing\n    if (formErrors[field]) {\n      setFormErrors(prev => ({\n        ...prev,\n        [field]: null\n      }));\n    }\n\n    // Trigger VIN decode when VIN is 17 characters\n    if (field === 'vin' && processedValue.length === 17 && !vinDecoded) {\n      decodeVIN(processedValue);\n    }\n\n    // Search dealers when typing in seller field (only if seller type is dealer)\n    if (field === 'sellerName') {\n      if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n        // For buy/sell deals, only search if seller type is dealer\n        if (formData.sellerType === 'dealer') {\n          searchDealers(processedValue);\n        } else {\n          setDealerSuggestions([]); // Clear suggestions for private party\n        }\n      } else {\n        // For other deals, always search\n        searchDealers(processedValue);\n      }\n    }\n\n    // Search dealers when typing in buyer field (only if buyer type is dealer)\n    if (field === 'buyerName') {\n      if (formData.buyerType === 'dealer') {\n        searchDealersBuyer(processedValue);\n      } else {\n        setDealerBuyerSuggestions([]); // Clear suggestions for private party\n      }\n    }\n\n    // Clear dealer suggestions when switching types\n    if (field === 'sellerType' || field === 'buyerType') {\n      if (field === 'sellerType' && processedValue === 'private') {\n        setDealerSuggestions([]);\n      }\n      if (field === 'buyerType' && processedValue === 'private') {\n        setDealerBuyerSuggestions([]);\n      }\n    }\n\n    // Reset to step 1 when deal type changes\n    if (field === 'dealType' && currentStep > 1) {\n      setCurrentStep(1);\n    }\n  };\n\n  // Handle file uploads for documentation\n  const handleDocumentUpload = e => {\n    const files = Array.from(e.target.files);\n    setFormData(prev => ({\n      ...prev,\n      documents: [...(prev.documents || []), ...files]\n    }));\n    setDocumentNotes(prev => [...prev, ...files.map((_, i) => ({\n      fileIndex: prev.length + i,\n      note: ''\n    }))]);\n  };\n  const handleRemoveDocument = index => {\n    setFormData(prev => ({\n      ...prev,\n      documents: prev.documents.filter((_, i) => i !== index)\n    }));\n    setDocumentNotes(prev => prev.filter(sel => sel.fileIndex !== index).map(sel => ({\n      ...sel,\n      fileIndex: sel.fileIndex > index ? sel.fileIndex - 1 : sel.fileIndex\n    })));\n  };\n  const handleDocumentNoteChange = (fileIndex, note) => {\n    setDocumentNotes(prev => {\n      const found = prev.find(sel => sel.fileIndex === fileIndex);\n      if (found) {\n        return prev.map(sel => sel.fileIndex === fileIndex ? {\n          ...sel,\n          note\n        } : sel);\n      } else {\n        return [...prev, {\n          fileIndex,\n          note\n        }];\n      }\n    });\n  };\n\n  // When a dealer is selected for seller, autofill full address and license number\n  const handleDealerSuggestionSelect = dealer => {\n    setFormData(prev => {\n      const updated = {\n        ...prev,\n        sellerName: dealer.name || '',\n        sellerCompany: dealer.company || '',\n        sellerPhone: dealer.phone || '',\n        sellerEmail: dealer.email || '',\n        sellerAddress: dealer.addressString || '',\n        sellerLicenseNumber: dealer.licenseNumber || '',\n        sellerTier: dealer.tier || 'Tier 1',\n        sellerType: 'dealer' // Set sellerType to dealer when a dealer is selected\n      };\n      console.log('[DEBUG] handleDealerSuggestionSelect - sellerType set to:', updated.sellerType);\n      return updated;\n    });\n    setDealerSuggestions([]);\n    setDealerSearch('');\n  };\n\n  // When a dealer is selected for buyer, autofill full address and license number\n  const handleBuyerDealerSuggestionSelect = dealer => {\n    setFormData(prev => ({\n      ...prev,\n      buyerName: dealer.name || '',\n      buyerAddress: dealer.addressString || '',\n      buyerPhone: dealer.phone || '',\n      buyerEmail: dealer.email || '',\n      buyerLicenseNumber: dealer.licenseNumber || '',\n      buyerTier: dealer.tier || 'Tier 1'\n    }));\n    setDealerBuyerSuggestions([]);\n    console.log('[BUYER DEALER AUTOFILL] Selected dealer:', dealer);\n  };\n  const validateForm = () => {\n    const errors = {};\n    let requiredFields = dealTypeFields.requiredFields || ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName'];\n\n    // Add buyer fields for buy/sell deals\n    if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n      requiredFields = [...requiredFields, 'buyerName'];\n    }\n    requiredFields.forEach(field => {\n      if (!formData[field] || formData[field].toString().trim() === '') {\n        errors[field] = `${field.charAt(0).toUpperCase() + field.slice(1)} is required`;\n      }\n    });\n\n    // Additional validation for specific fields\n    if (formData.vin && formData.vin.length !== 17) {\n      errors.vin = 'VIN must be exactly 17 characters';\n    }\n    if (formData.year && (formData.year < 1900 || formData.year > new Date().getFullYear() + 1)) {\n      errors.year = 'Please enter a valid year';\n    }\n    if (formData.mileage && formData.mileage < 0) {\n      errors.mileage = 'Mileage cannot be negative';\n    }\n    if (dealTypeFields.showFinancials && formData.purchasePrice && formData.purchasePrice <= 0) {\n      errors.purchasePrice = 'Purchase price must be greater than 0';\n    }\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n  const handleSave = async (isDraft = false) => {\n    if (!currentUser) {\n      alert('You must be logged in to submit a deal.');\n      navigate('/login');\n      return;\n    }\n    if (!isDraft && !validateForm()) {\n      console.log('[DEAL SUBMIT] Validation errors:', formErrors);\n      return;\n    }\n    setSaving(true);\n    try {\n      // Debug: log formData before building dealData\n      console.log('[DEAL SUBMIT] formData:', formData);\n      console.log('[DEBUG] handleSave - sellerType in formData:', formData.sellerType);\n      // Log all financial fields from formData\n      console.log('[DEAL SUBMIT] Financial fields:', {\n        brokerageFee: formData.brokerageFee,\n        brokerageFeePaidTo: formData.brokerageFeePaidTo,\n        payoffBalance: formData.payoffBalance,\n        amountDueToCustomer: formData.amountDueToCustomer,\n        amountDueToRP: formData.amountDueToRP,\n        commissionRate: formData.commissionRate\n      });\n      // First, create the deal in the backend\n      const dealData = {\n        vehicle: `${formData.year} ${formData.make} ${formData.model}`,\n        vin: formData.vin,\n        year: parseInt(formData.year),\n        make: formData.make,\n        model: formData.model,\n        rpStockNumber: formData.rpStockNumber,\n        color: formData.exteriorColor,\n        exteriorColor: formData.exteriorColor,\n        // Add this field\n        interiorColor: formData.interiorColor,\n        // Add this field\n        mileage: parseInt(formData.mileage) || 0,\n        purchasePrice: parseFloat(formData.purchasePrice) || 0,\n        listPrice: parseFloat(formData.listPrice) || 0,\n        killPrice: parseFloat(formData.killPrice) || 0,\n        wholesalePrice: parseFloat(formData.wholesalePrice) || 0,\n        dealType: formData.dealType,\n        dealType2SubType: formData.dealType2SubType,\n        // <-- Ensure this is sent\n        dealType2: formData.dealType2SubType,\n        // <-- Add this for backend compatibility\n        seller: {\n          name: formData.sellerName,\n          type: formData.sellerType || (formData.dealType === 'wholesale-flip' ? 'private' : formData.dealType.includes('private') ? 'private' : 'dealer'),\n          contact: {\n            address: parseAddress(formData.sellerAddress),\n            // Use parsed address\n            phone: formData.sellerPhone,\n            email: formData.sellerEmail\n          },\n          licenseNumber: formData.sellerLicenseNumber,\n          tier: formData.sellerTier\n        },\n        // Always include buyer info if present\n        buyer: {\n          name: formData.buyerName,\n          type: formData.buyerType,\n          contact: {\n            address: parseAddress(formData.buyerAddress),\n            phone: formData.buyerPhone,\n            email: formData.buyerEmail\n          },\n          licenseNumber: formData.buyerLicenseNumber,\n          tier: formData.buyerTier\n        },\n        fundingSource: formData.fundingSource,\n        paymentMethod: formData.paymentMethod,\n        purchaseDate: formData.purchaseDate ? new Date(formData.purchaseDate) : new Date(),\n        currentStage: 'documentation',\n        salesperson: currentUser.name || 'Unknown',\n        // Use current user's name as salesperson\n        // --- Add all financial fields below ---\n        brokerFee: parseFloat(formData.brokerageFee) || 0,\n        brokerFeePaidTo: formData.brokerageFeePaidTo || '',\n        payoffBalance: parseFloat(formData.payoffBalance) || 0,\n        amountDueToCustomer: parseFloat(formData.amountDueToCustomer) || 0,\n        amountDueToRP: parseFloat(formData.amountDueToRP) || 0,\n        commissionRate: parseFloat(formData.commissionRate) || 0,\n        generalNotes: formData.generalNotes // <-- Ensure this is sent\n      };\n      console.log('[DEBUG] handleSave - dealData.seller.type:', dealData.seller.type);\n      // Debug: log license numbers being sent\n      console.log('[DEAL SUBMIT] SENDING seller license number:', formData.sellerLicenseNumber);\n      console.log('[DEAL SUBMIT] SENDING buyer license number:', formData.buyerLicenseNumber);\n      // Debug: log dealData before sending\n      console.log('[DEAL SUBMIT] dealData to backend:', dealData);\n      // Create deal (this would be your existing deal creation endpoint)\n      const dealResponse = await fetch(`${API_BASE}/api/deals`, {\n        method: 'POST',\n        headers: buildHeaders(),\n        body: JSON.stringify(dealData),\n        credentials: 'include'\n      });\n      // Debug: log backend response status\n      console.log('[DEAL SUBMIT] Backend response status:', dealResponse.status);\n      const dealResult = await dealResponse.json().catch(() => ({}));\n      console.log('[DEAL SUBMIT] Backend response JSON:', dealResult);\n      if (!dealResponse.ok) {\n        console.log('[DEAL SUBMIT] Backend error response:', dealResult);\n        throw new Error('Failed to create deal');\n      }\n      const dealId = dealResult.deal._id;\n\n      // Generate document and create vehicle record\n      const documentResponse = await fetch(`${API_BASE}/api/documents/generate/${dealId}`, {\n        method: 'POST',\n        headers: buildHeaders(),\n        body: JSON.stringify({\n          dealType2: formData.dealType2SubType,\n          commissionRate: parseFloat(formData.commissionRate) || 0,\n          stockNumber: formData.rpStockNumber,\n          wholesalePrice: parseFloat(formData.wholesalePrice) || 0,\n          generalNotes: formData.generalNotes,\n          vehicleDescription: formData.vehicleDescription,\n          buyerName: formData.buyerName,\n          buyerType: formData.buyerType,\n          buyerAddress: formData.buyerAddress,\n          buyerPhone: formData.buyerPhone,\n          buyerEmail: formData.buyerEmail,\n          buyerLicenseNumber: formData.buyerLicenseNumber,\n          buyerTier: formData.buyerTier,\n          sellerType: formData.sellerType\n        }),\n        credentials: 'include' // Ensure cookies/session are sent for authentication\n      });\n      if (!documentResponse.ok) {\n        const err = await documentResponse.json().catch(() => ({}));\n        throw new Error(err.error || 'Failed to generate document');\n      }\n      const documentResult = await documentResponse.json();\n\n      // --- UPLOAD USER DOCUMENTS ---\n      if (formData.documents && formData.documents.length > 0) {\n        for (let i = 0; i < formData.documents.length; i++) {\n          const file = formData.documents[i];\n          const noteObj = documentNotes.find(sel => sel.fileIndex === i);\n          const note = noteObj ? noteObj.note : '';\n          const documentType = 'extra_doc';\n          const form = new FormData();\n          form.append('document', file);\n          if (note) form.append('notes', note);\n          try {\n            const uploadRes = await fetch(`${API_BASE}/api/backoffice/deals/${dealId}/documents/${documentType}/upload`, {\n              method: 'POST',\n              headers: {\n                'Authorization': getAuthHeaders()['Authorization']\n              },\n              body: form,\n              credentials: 'include'\n            });\n            if (!uploadRes.ok) {\n              const err = await uploadRes.json().catch(() => ({}));\n              toast.error(`Failed to upload ${file.name}: ${err.error || uploadRes.statusText}`);\n            } else {\n              toast.success(`Uploaded ${file.name}`);\n            }\n          } catch (err) {\n            toast.error(`Error uploading ${file.name}: ${err.message}`);\n          }\n        }\n      }\n      // --- END UPLOAD USER DOCUMENTS ---\n\n      console.log('Deal created and document generated:', documentResult);\n\n      // Show success message with document info\n      const successMessage = isDraft ? 'Draft saved successfully!' : `Deal submitted successfully!\\n\\nYour deal has been sent to the back office for processing. You will be notified when the deal is complete.`;\n      toast.success(successMessage);\n\n      // Optionally redirect to a success page or clear form\n      if (!isDraft) {\n        // Clear form or redirect\n        setFormData({\n          vin: '',\n          year: '',\n          make: '',\n          model: '',\n          mileage: '',\n          exteriorColor: '',\n          interiorColor: '',\n          dealType: '',\n          dealType2SubType: '',\n          fundingSource: '',\n          purchaseDate: todayStr,\n          paymentMethod: 'check',\n          currentStage: 'initial-contact',\n          purchasePrice: '',\n          listPrice: '',\n          killPrice: '',\n          wholesalePrice: '',\n          commissionRate: '',\n          brokerageFee: '',\n          brokerageFeePaidTo: '',\n          payoffBalance: '',\n          amountDueToCustomer: '',\n          amountDueToRP: '',\n          sellerName: '',\n          sellerAddress: '',\n          sellerPhone: '',\n          sellerEmail: '',\n          sellerLicenseNumber: '',\n          sellerTier: 'Tier 1',\n          buyerName: '',\n          buyerAddress: '',\n          buyerPhone: '',\n          buyerEmail: '',\n          buyerLicenseNumber: '',\n          buyerTier: 'Tier 1',\n          buyerType: 'dealer',\n          sellerType: 'private',\n          rpStockNumber: '',\n          vehicleDescription: '',\n          generalNotes: '',\n          contractRequired: false,\n          titlePresent: false,\n          driverLicensePresent: false,\n          odometerPresent: false,\n          dealerLicensePresent: false,\n          documents: [],\n          salesperson: ''\n        });\n        setCurrentStep(1);\n      }\n    } catch (error) {\n      if (error.message.includes('401') || error.message.includes('not authorized')) {\n        alert('Session expired or not authorized. Please log in again.');\n        navigate('/login');\n      } else {\n        alert(`Error saving deal: ${error.message}`);\n        console.log('[DEAL SUBMIT] Error:', error);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleEmailToListingTeam = () => {\n    const emailBody = `New Vehicle Ready for Listing\n\nVehicle: ${formData.year} ${formData.make} ${formData.model}\nVIN: ${formData.vin}\nStock #: ${formData.rpStockNumber}\nMileage: ${formData.mileage}\nExterior: ${formData.exteriorColor}\nInterior: ${formData.interiorColor}\n\nDescription:\n${formData.vehicleDescription}\n\nPlease prepare listing materials for this vehicle.\n\nBest regards,\n${currentUser.name}`;\n    const mailtoLink = `mailto:listing@rpexotics.com?subject=New Vehicle for Listing - ${formData.year} ${formData.make} ${formData.model}&body=${encodeURIComponent(emailBody)}`;\n    window.open(mailtoLink);\n  };\n\n  // Remove handleCompleteDeal and use handleSave for final submission\n  // Update button text and alerts\n\n  const renderStepIndicator = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: Array.from({\n        length: totalSteps\n      }, (_, index) => {\n        const stepNumber = index + 1;\n        const isActive = currentStep === stepNumber;\n        const isCompleted = currentStep > stepNumber;\n        let stepTitle = '';\n        let stepDescription = '';\n        if (stepNumber === 1) {\n          stepTitle = 'Vehicle & Deal Type';\n          stepDescription = 'Enter vehicle information and select deal type';\n        } else if (stepNumber === 2) {\n          stepTitle = 'Deal Configuration';\n          stepDescription = 'Configure funding, payment, and timeline';\n        } else if (stepNumber === 3 && dealTypeFields.showFinancials) {\n          stepTitle = 'Financial Information';\n          stepDescription = 'Set pricing and financial terms';\n        } else if (stepNumber === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo || stepNumber === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo) {\n          stepTitle = 'Seller Information';\n          stepDescription = 'Add seller contact information';\n        } else if (stepNumber === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation || stepNumber === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation || stepNumber === 5 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation) {\n          stepTitle = 'Documentation & Notes';\n          stepDescription = 'Document status and additional notes';\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${isActive ? 'bg-blue-600 border-blue-600 text-white' : isCompleted ? 'bg-green-600 border-green-600 text-white' : 'bg-white/10 border-white/20 text-gray-400'}`,\n            children: isCompleted ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 843,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: stepNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 845,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-sm font-medium ${isActive ? 'text-white' : 'text-gray-400'}`,\n              children: stepTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 849,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: stepDescription\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 852,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 848,\n            columnNumber: 15\n          }, this), stepNumber < totalSteps && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-16 h-0.5 mx-4 ${isCompleted ? 'bg-green-600' : 'bg-white/20'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 17\n          }, this)]\n        }, stepNumber, true, {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 804,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 803,\n    columnNumber: 5\n  }, this);\n  const renderFormField = (label, field, type = 'text', options = null, required = false, icon = null, isDealerBuyer = false) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"flex items-center text-sm font-medium text-gray-300\",\n        children: [icon && /*#__PURE__*/React.createElement(icon, {\n          className: \"h-4 w-4 mr-2\"\n        }), label, required && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-400 ml-1\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 870,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 867,\n        columnNumber: 9\n      }, this), type === 'select' ? /*#__PURE__*/_jsxDEV(\"select\", {\n        value: formData[field],\n        onChange: e => handleInputChange(field, e.target.value),\n        className: `w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: [\"Select \", label]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 13\n        }, this), options === null || options === void 0 ? void 0 : options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: option.value,\n          className: \"bg-gray-800\",\n          children: option.label\n        }, option.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 883,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 11\n      }, this) : type === 'textarea' ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: formData[field],\n        onChange: e => handleInputChange(field, e.target.value),\n        rows: 4,\n        placeholder: `Enter ${label.toLowerCase()}...`,\n        className: `w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none ${formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 889,\n        columnNumber: 11\n      }, this) : type === 'checkbox' ? /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"flex items-center space-x-2 cursor-pointer\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: !!formData[field],\n          onChange: e => handleInputChange(field, e.target.checked),\n          className: \"rounded bg-white/10 border-white/20 text-blue-500 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 900,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-300\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 906,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 899,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm\",\n          children: \"$\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 911,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: type,\n          value: formData[field] || '',\n          onChange: e => {\n            handleInputChange(field, e.target.value);\n          },\n          placeholder: `Enter ${label.toLowerCase()}...`,\n          className: `w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'} ${field === 'vin' ? 'pr-20' : ''} ${['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) ? 'pl-8' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 913,\n          columnNumber: 13\n        }, this), field === 'vin' && formData.vin.length === 17 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute right-2 top-1/2 transform -translate-y-1/2\",\n          children: vinDecoding ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"h-5 w-5 text-blue-400 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 928,\n            columnNumber: 19\n          }, this) : vinDecoded ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n            className: \"h-5 w-5 text-green-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 930,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => decodeVIN(formData.vin),\n            className: \"bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded transition-colors\",\n            children: \"Decode\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 932,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 926,\n          columnNumber: 15\n        }, this), isDealerBuyer && field === 'dealerName' && dealerBuyerSuggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\",\n          children: dealerBuyerSuggestions.map(dealer => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\",\n            onClick: () => {\n              setFormData(prev => {\n                var _dealer$contact;\n                return {\n                  ...prev,\n                  dealerName: dealer.name,\n                  dealerCompany: dealer.company,\n                  dealerPhone: dealer.phone,\n                  dealerEmail: ((_dealer$contact = dealer.contact) === null || _dealer$contact === void 0 ? void 0 : _dealer$contact.email) || dealer.email || '',\n                  dealerAddress: dealer.location || dealer.address || ''\n                };\n              });\n              setDealerBuyerSuggestions([]);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium text-white\",\n              children: dealer.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 961,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-400\",\n              children: [dealer.company, \" \\u2022 \", dealer.location]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 962,\n              columnNumber: 21\n            }, this)]\n          }, dealer.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 946,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 944,\n          columnNumber: 15\n        }, this), field === 'buyerName' && formData.buyerType === 'dealer' && dealerBuyerSuggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\",\n          children: dealerBuyerSuggestions.map(dealer => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\",\n            onClick: () => {\n              handleBuyerDealerSuggestionSelect(dealer);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium text-white\",\n              children: dealer.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 979,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-400\",\n              children: [dealer.company, \" \\u2022 \", dealer.location]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 980,\n              columnNumber: 21\n            }, this)]\n          }, dealer.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 972,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 970,\n          columnNumber: 15\n        }, this), field === 'sellerName' && dealerSuggestions.length > 0 && (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell' && formData.sellerType === 'dealer' || !['retail-pp', 'retail-auction', 'retail-dtod'].includes(formData.dealType) && !(formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell')) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\",\n          children: dealerSuggestions.map(dealer => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\",\n            onClick: () => {\n              handleDealerSuggestionSelect(dealer);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium text-white\",\n              children: dealer.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1001,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-400\",\n              children: [dealer.company, \" \\u2022 \", dealer.location]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1002,\n              columnNumber: 21\n            }, this)]\n          }, dealer.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 992,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 909,\n        columnNumber: 11\n      }, this), formErrors[field] && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center text-red-400 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"h-4 w-4 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1012,\n          columnNumber: 13\n        }, this), formErrors[field]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1011,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 866,\n      columnNumber: 7\n    }, this);\n  };\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: \"Deal Type Selection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1027,\n              columnNumber: 15\n            }, this), renderFormField('Deal Type', 'dealType', 'select', dealTypes, true, Car), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4\",\n              children: renderFormField('Deal Type 2', 'dealType2SubType', 'select', dealType2SubOptions, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1029,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1026,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: \"Vehicle Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1035,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: renderFormField('VIN', 'vin', 'text', null, true, Hash)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1037,\n                columnNumber: 17\n              }, this), renderFormField('Year', 'year', 'number', null, true, Calendar), renderFormField('Make', 'make', 'text', null, true), renderFormField('Model', 'model', 'text', null, true), renderFormField('Mileage', 'mileage', 'number', null, false, Gauge), renderFormField('Exterior Color', 'exteriorColor', 'text', null, false, Palette), renderFormField('Interior Color', 'interiorColor', 'text', null, false, Palette)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1034,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1024,\n          columnNumber: 11\n        }, this);\n      case 2:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: \"Deal Configuration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1057,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [renderFormField('Funding Source', 'fundingSource', 'select', fundingSources, true, DollarSign), renderFormField('Purchase/Sale Date', 'purchaseDate', 'date', null, true, Calendar), renderFormField('Payment Method', 'paymentMethod', 'select', paymentMethods, true), renderFormField('RP Stock Number', 'rpStockNumber', 'text', null, false, Hash), renderFormField('Salesperson', 'salesperson', 'select', salespersonOptions, true, User)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1058,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1056,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1054,\n          columnNumber: 11\n        }, this);\n      case 3:\n        return dealTypeFields.showFinancials ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-4\",\n            children: \"Financial Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1071,\n            columnNumber: 13\n          }, this), formData.dealType2SubType === 'sale' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign), renderFormField('Brokerage Fee', 'brokerageFee', 'number'), renderFormField('Brokerage Fee Paid To', 'brokerageFeePaidTo', 'text'), renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number'), renderFormField('Amount Due to RP', 'amountDueToRP', 'number')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1073,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign), renderFormField('Kill Price', 'killPrice', 'number'), renderFormField('Wholesale Price', 'wholesalePrice', 'number'), renderFormField('List Price', 'listPrice', 'number'), ['consign-a', 'consign-b', 'consign-c', 'consign-rdnc'].includes(formData.dealType2SubType) ? renderFormField('Commission Rate (%)', 'commissionRate', 'number') : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1083,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [renderFormField('Brokerage Fee', 'brokerageFee', 'number'), renderFormField('Brokerage Fee Paid To', 'brokerageFeePaidTo', 'text'), renderFormField('Payoff Balance', 'payoffBalance', 'number'), renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number'), renderFormField('Amount Due to RP', 'amountDueToRP', 'number')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1094,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1081,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1070,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n            className: \"h-12 w-12 text-gray-400 mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-2\",\n            children: \"Financial Information Not Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"This deal type does not require financial information.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1105,\n          columnNumber: 11\n        }, this);\n      case 4:\n        // Seller/Dealer Info step\n        if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10 space-y-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-medium text-white\",\n                  children: \"Buyer Information\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1120,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleInputChange('buyerType', 'private'),\n                    className: `px-3 py-1 rounded-lg border transition-colors text-sm ${formData.buyerType === 'private' ? 'bg-blue-600 border-blue-500 text-white' : 'bg-white/10 border-white/20 text-white hover:bg-white/20'}`,\n                    children: \"Private Party\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1122,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleInputChange('buyerType', 'dealer'),\n                    className: `px-3 py-1 rounded-lg border transition-colors text-sm ${formData.buyerType === 'dealer' ? 'bg-green-600 border-green-500 text-white' : 'bg-white/10 border-white/20 text-white hover:bg-white/20'}`,\n                    children: \"Dealer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1133,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1121,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1119,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [renderFormField(formData.buyerType === 'dealer' ? 'Dealer Name' : 'Buyer Name', 'buyerName', 'text', null, true, User), renderFormField('Phone', 'buyerPhone', 'tel', null, false, Phone), renderFormField('Email', 'buyerEmail', 'email', null, false, Mail), renderFormField('Address', 'buyerAddress', 'text', null, false, MapPin), formData.buyerType === 'dealer' && renderFormField('Dealer License Number', 'buyerLicenseNumber', 'text'), formData.buyerType === 'dealer' && renderFormField('Dealer Tier', 'buyerTier', 'select', [{\n                  value: 'Tier 1',\n                  label: 'Tier 1: Pay Upon Title'\n                }, {\n                  value: 'Tier 2',\n                  label: 'Tier 2: Pay Prior to Release'\n                }])]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1146,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-medium text-white\",\n                  children: \"Seller Information\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1162,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleInputChange('sellerType', 'private'),\n                    className: `px-3 py-1 rounded-lg border transition-colors text-sm ${formData.sellerType === 'private' ? 'bg-blue-600 border-blue-500 text-white' : 'bg-white/10 border-white/20 text-white hover:bg-white/20'}`,\n                    children: \"Private Party\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1164,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleInputChange('sellerType', 'dealer'),\n                    className: `px-3 py-1 rounded-lg border transition-colors text-sm ${formData.sellerType === 'dealer' ? 'bg-green-600 border-green-500 text-white' : 'bg-white/10 border-white/20 text-white hover:bg-white/20'}`,\n                    children: \"Dealer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1175,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1163,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1161,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [renderFormField(formData.sellerType === 'dealer' ? 'Dealer Name' : 'Seller Name', 'sellerName', 'text', null, true, User), renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone), renderFormField('Email', 'sellerEmail', 'email', null, false, Mail), renderFormField('Address', 'sellerAddress', 'text', null, false, MapPin), formData.sellerType === 'dealer' && renderFormField('Dealer License Number', 'sellerLicenseNumber', 'text'), formData.sellerType === 'dealer' && renderFormField('Dealer Tier', 'sellerTier', 'select', [{\n                  value: 'Tier 1',\n                  label: 'Tier 1: Pay Upon Title'\n                }, {\n                  value: 'Tier 2',\n                  label: 'Tier 2: Pay Prior to Release'\n                }])]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1188,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1160,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1116,\n            columnNumber: 13\n          }, this);\n        } else {\n          const isRetailPP = formData.dealType === 'retail-pp';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: dynamicLabels.sellerSectionTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1206,\n              columnNumber: 15\n            }, this), isRetailPP ?\n            /*#__PURE__*/\n            // Retail PP - 2x2 grid layout\n            _jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: renderFormField(dynamicLabels.sellerLabel, 'sellerName', 'text', null, true, User)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1210,\n                columnNumber: 19\n              }, this), renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone), renderFormField('Email', 'sellerEmail', 'email', null, false, Mail), renderFormField('Address', 'sellerAddress', 'text', null, false, MapPin)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1209,\n              columnNumber: 17\n            }, this) :\n            /*#__PURE__*/\n            // Other deal types - original layout\n            _jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: renderFormField(dynamicLabels.sellerLabel, 'sellerName', 'text', null, true, User)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1220,\n                columnNumber: 19\n              }, this), !isRetailPP && renderFormField(dynamicLabels.companyLabel, 'sellerCompany', 'text'), renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone), renderFormField('Email', 'sellerEmail', 'email', null, false, Mail), renderFormField(dynamicLabels.addressLabel, 'sellerAddress', 'text', null, false, MapPin), formData.dealType === 'wholesale-d2d' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"seller-license-number\",\n                    className: \"block text-sm font-medium text-gray-300 mb-1\",\n                    children: \"Dealer License Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1232,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"seller-license-number\",\n                    value: formData.sellerLicenseNumber || '',\n                    onChange: e => handleInputChange('sellerLicenseNumber', e.target.value),\n                    className: \"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1233,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1231,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"md:col-span-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-white mb-2\",\n                    children: \"Dealer Tier\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1244,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex space-x-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      onClick: () => handleInputChange('sellerTier', 'Tier 1'),\n                      className: `px-4 py-2 rounded-lg border transition-colors ${formData.sellerTier === 'Tier 1' ? 'bg-red-600 border-red-500 text-white' : 'bg-white/10 border-white/20 text-white hover:bg-white/20'}`,\n                      children: \"Tier 1 - Pay Upon Title\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1248,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      onClick: () => handleInputChange('sellerTier', 'Tier 2'),\n                      className: `px-4 py-2 rounded-lg border transition-colors ${formData.sellerTier === 'Tier 2' ? 'bg-green-600 border-green-500 text-white' : 'bg-white/10 border-white/20 text-white hover:bg-white/20'}`,\n                      children: \"Tier 2 - Pay Prior to Release\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1259,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1247,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-400 mt-1\",\n                    children: \"Tier 1: Pay Upon Title. Tier 2: Pay Prior to Release.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1271,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1243,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1219,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1205,\n            columnNumber: 13\n          }, this);\n        }\n      case 5:\n        return dealTypeFields.showDocumentation ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/5 rounded-xl p-6 border border-white/10\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-4\",\n            children: \"Documentation & Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-md font-medium text-white mb-4\",\n                  children: \"Documentation Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1290,\n                  columnNumber: 19\n                }, this), renderFormField('Contract Required', 'contractRequired', 'checkbox'), renderFormField('Title Present', 'titlePresent', 'checkbox'), renderFormField('Driver License Present', 'driverLicensePresent', 'checkbox'), renderFormField('Odometer Present', 'odometerPresent', 'checkbox'), renderFormField('Dealer License Present', 'dealerLicensePresent', 'checkbox')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1289,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4\",\n                children: [renderFormField('Vehicle Description', 'vehicleDescription', 'textarea', null, false, Info), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-white mb-2\",\n                    children: \"Upload Documents/Photos\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1301,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    multiple: true,\n                    accept: \"image/*,application/pdf\",\n                    onChange: handleDocumentUpload,\n                    className: \"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1302,\n                    columnNumber: 21\n                  }, this), formData.documents && formData.documents.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 space-y-2\",\n                    children: formData.documents.map((file, i) => {\n                      var _documentNotes$find;\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center space-x-3 bg-white/10 rounded p-2\",\n                        children: [file.type && file.type.startsWith('image') ? /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: URL.createObjectURL(file),\n                          alt: file.name,\n                          className: \"h-12 w-12 object-cover rounded\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1315,\n                          columnNumber: 31\n                        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"inline-block w-12 h-12 bg-gray-700 text-white flex items-center justify-center rounded\",\n                          children: \"PDF\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1317,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-white text-sm truncate max-w-xs\",\n                          children: file.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1319,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: ((_documentNotes$find = documentNotes.find(sel => sel.fileIndex === i)) === null || _documentNotes$find === void 0 ? void 0 : _documentNotes$find.note) || '',\n                          onChange: e => handleDocumentNoteChange(i, e.target.value),\n                          placeholder: \"Add a note (optional)\",\n                          className: \"bg-white/10 border rounded-lg px-2 py-1 text-white text-sm\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1320,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          className: \"ml-auto text-red-400 hover:text-red-600 text-xs font-medium\",\n                          onClick: () => handleRemoveDocument(i),\n                          children: \"Remove\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1327,\n                          columnNumber: 29\n                        }, this)]\n                      }, i, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1313,\n                        columnNumber: 27\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1311,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1300,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1297,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: renderFormField('General Notes', 'generalNotes', 'textarea', null, false, Info)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1341,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1285,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(Info, {\n            className: \"h-12 w-12 text-gray-400 mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white mb-2\",\n            children: \"Documentation Not Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"This deal type does not require documentation tracking.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1350,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1347,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n\n  // Calculate total steps based on deal type\n  const getTotalSteps = () => {\n    let steps = 2; // Always have vehicle info and deal config\n    if (dealTypeFields.showFinancials) steps++;\n    if (dealTypeFields.showSellerInfo) steps++;\n    if (dealTypeFields.showDocumentation) steps++;\n    return steps;\n  };\n  const totalSteps = getTotalSteps();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 overflow-hidden pointer-events-none\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1374,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1375,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1373,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"relative bg-black/20 backdrop-blur-md border-b border-white/10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.history.back(),\n              className: \"mr-4 p-2 bg-white/10 hover:bg-white/20 rounded-lg border border-white/20 transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                className: \"h-5 w-5 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1387,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-3 mr-4 shadow-lg shadow-blue-500/25\",\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"h-6 w-6 text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1391,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1390,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-xl font-bold text-white\",\n                  children: \"New Deal Entry\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1394,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-300 text-sm\",\n                  children: \"Create a new vehicle deal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1395,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1393,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1389,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSave(true),\n              disabled: saving,\n              className: \"flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-colors disabled:opacity-50\",\n              children: [saving ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1406,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(Save, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1406,\n                columnNumber: 79\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1401,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSave(false),\n              disabled: saving,\n              className: \"flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg shadow-lg transition-colors disabled:opacity-50\",\n              children: [saving ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1415,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1415,\n                columnNumber: 79\n              }, this), \"Create Deal\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1410,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1400,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1381,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1380,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1379,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative max-w-6xl mx-auto px-6 py-8\",\n      children: [renderStepIndicator(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-2\",\n            children: [currentStep === 1 && 'Vehicle Information & Deal Type', currentStep === 2 && 'Deal Configuration', currentStep === 3 && dealTypeFields.showFinancials && 'Financial Information', currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information', currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes', currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information', currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes', currentStep === 5 && 'Documentation & Notes']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1430,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-300\",\n            children: [currentStep === 1 && 'Enter basic vehicle information and select the deal type', currentStep === 2 && 'Configure deal type, funding, and timeline', currentStep === 3 && dealTypeFields.showFinancials && 'Set pricing and financial terms', currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information', currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes', currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information', currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes', currentStep === 5 && 'Document status and additional notes']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1440,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1429,\n          columnNumber: 11\n        }, this), renderStep(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mt-8 pt-6 border-t border-white/10\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCurrentStep(Math.max(1, currentStep - 1)),\n            disabled: currentStep === 1,\n            className: \"flex items-center px-4 py-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"h-4 w-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1461,\n              columnNumber: 15\n            }, this), \"Previous\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1456,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [currentStep === totalSteps && formData.vehicleDescription && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleEmailToListingTeam,\n              className: \"flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(Send, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1471,\n                columnNumber: 19\n              }, this), \"Email to Listing Team\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1467,\n              columnNumber: 17\n            }, this), currentStep < totalSteps ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCurrentStep(Math.min(totalSteps, currentStep + 1)),\n              className: \"flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg transition-colors\",\n              children: [\"Next\", /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                className: \"h-4 w-4 ml-2 rotate-180\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1482,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1477,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSave(false),\n              disabled: saving,\n              className: \"flex items-center px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg transition-colors disabled:opacity-50\",\n              children: [saving ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1490,\n                columnNumber: 29\n              }, this) : /*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1490,\n                columnNumber: 81\n              }, this), \"Submit Deal\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1485,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1455,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1428,\n        columnNumber: 9\n      }, this), vinDecoding && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed bottom-6 right-6 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"h-4 w-4 mr-2 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1501,\n          columnNumber: 13\n        }, this), \"Decoding VIN...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1500,\n        columnNumber: 11\n      }, this), vinDecoded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed bottom-6 right-6 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-4 w-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1508,\n          columnNumber: 13\n        }, this), \"VIN decoded successfully!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1507,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1423,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1513,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1371,\n    columnNumber: 5\n  }, this);\n};\n_s(NewDealEntry, \"hSUUVpNh2uEkNGXaXXMtbVtkf/k=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = NewDealEntry;\nexport default NewDealEntry;\nvar _c;\n$RefreshReg$(_c, \"NewDealEntry\");","map":{"version":3,"names":["React","useState","useEffect","Car","ArrowLeft","Save","Send","CheckCircle","Loader2","Calendar","DollarSign","User","MapPin","Phone","Mail","Hash","Palette","Gauge","Info","Plus","AlertCircle","useAuth","useNavigate","ToastContainer","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","NewDealEntry","_s","user","currentUser","getAuthHeaders","navigate","API_BASE","process","env","NODE_ENV","buildHeaders","extra","headers","console","warn","log","todayStr","Date","toISOString","slice","formData","setFormData","vin","year","make","model","mileage","exteriorColor","interiorColor","dealType","dealType2SubType","fundingSource","purchaseDate","paymentMethod","currentStage","purchasePrice","listPrice","killPrice","wholesalePrice","commissionRate","brokerageFee","brokerageFeePaidTo","payoffBalance","amountDueToCustomer","amountDueToRP","sellerName","sellerAddress","sellerPhone","sellerEmail","sellerLicenseNumber","sellerTier","buyerName","buyerAddress","buyerPhone","buyerEmail","buyerLicenseNumber","buyerTier","buyerType","sellerType","rpStockNumber","vehicleDescription","generalNotes","contractRequired","titlePresent","driverLicensePresent","odometerPresent","dealerLicensePresent","documents","salesperson","vinDecoding","setVinDecoding","vinDecoded","setVinDecoded","dealerSuggestions","setDealerSuggestions","dealerBuyerSuggestions","setDealerBuyerSuggestions","dealerSearch","setDealerSearch","formErrors","setFormErrors","saving","setSaving","currentStep","setCurrentStep","documentNotes","setDocumentNotes","fetch","credentials","then","res","json","data","success","Array","isArray","catch","formatCurrency","value","numericValue","toString","replace","parts","split","length","join","joinAddress","address","street","city","state","zip","filter","Boolean","parseAddress","full","map","s","trim","getDynamicLabels","dealType2","isRetailPP","purchasePriceLabel","sellerLabel","sellerSectionTitle","companyLabel","licenseLabel","addressLabel","dynamicLabels","dealTypes","label","fundingSources","paymentMethods","dealType2SubOptions","salespersonOptions","getDealTypeFields","showFinancials","includes","showSellerInfo","showDocumentation","requiredFields","dealTypeFields","decodeVIN","response","method","body","JSON","stringify","status","prev","setTimeout","error","alert","searchDealers","query","encodeURIComponent","dealers","searchDealersBuyer","handleDealerSuggestionClick","dealer","updated","name","addressString","phone","email","licenseNumber","tier","handleInputChange","field","processedValue","handleDocumentUpload","e","files","from","target","_","i","fileIndex","note","handleRemoveDocument","index","sel","handleDocumentNoteChange","found","find","handleDealerSuggestionSelect","sellerCompany","company","handleBuyerDealerSuggestionSelect","validateForm","errors","forEach","charAt","toUpperCase","getFullYear","Object","keys","handleSave","isDraft","dealData","vehicle","parseInt","color","parseFloat","seller","type","contact","buyer","brokerFee","brokerFeePaidTo","dealResponse","dealResult","ok","Error","dealId","deal","_id","documentResponse","stockNumber","err","documentResult","file","noteObj","documentType","form","FormData","append","uploadRes","statusText","message","successMessage","handleEmailToListingTeam","emailBody","mailtoLink","window","open","renderStepIndicator","className","children","totalSteps","stepNumber","isActive","isCompleted","stepTitle","stepDescription","fileName","_jsxFileName","lineNumber","columnNumber","renderFormField","options","required","icon","isDealerBuyer","createElement","onChange","option","rows","placeholder","toLowerCase","checked","onClick","_dealer$contact","dealerName","dealerCompany","dealerPhone","dealerEmail","dealerAddress","location","id","renderStep","htmlFor","multiple","accept","_documentNotes$find","startsWith","src","URL","createObjectURL","alt","getTotalSteps","steps","history","back","disabled","Math","max","min","_c","$RefreshReg$"],"sources":["/Users/bsauer02/Desktop/Opis3.0/rp-exotics-unified/frontend/src/components/NewDealEntry.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Car, ArrowLeft, Save, Send, CheckCircle, Loader2, \n  Calendar, DollarSign, User, \n  MapPin, Phone, Mail, Hash, Palette, Gauge, \n  Info, Plus, AlertCircle \n} from 'lucide-react';\nimport { useAuth } from './AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst NewDealEntry = () => {\n  const { user: currentUser, getAuthHeaders } = useAuth();\n  const navigate = useNavigate();\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!currentUser) {\n      navigate('/login');\n    }\n  }, [currentUser, navigate]);\n\n  // Utility to get backend API URL\n  const API_BASE = process.env.NODE_ENV === 'production' ? '' : 'http://localhost:5001';\n\n  // Utility to merge auth headers\n  const buildHeaders = (extra = {}) => {\n    const headers = {\n      ...getAuthHeaders(),\n      'Content-Type': 'application/json',\n      ...extra\n    };\n    // Debug: log token presence\n    if (!headers['Authorization']) {\n      console.warn('[DEAL SUBMIT] No Authorization token in headers!');\n    } else {\n      console.log('[DEAL SUBMIT] Using Authorization header:', headers['Authorization']);\n    }\n    return headers;\n  };\n\n  const todayStr = new Date().toISOString().slice(0, 10);\n\n  const [formData, setFormData] = useState({\n    // Vehicle Information\n    vin: '',\n    year: '',\n    make: '',\n    model: '',\n    mileage: '',\n    exteriorColor: '',\n    interiorColor: '',\n    \n    // Deal Information\n    dealType: '',\n    dealType2SubType: '', // <-- Add this for Deal Type 2 sub-options\n    fundingSource: '',\n    purchaseDate: todayStr,\n    paymentMethod: 'check', // Default to 'check'\n    currentStage: 'initial-contact',\n    \n    // Financial Information\n    purchasePrice: '',\n    listPrice: '',\n    killPrice: '',\n    wholesalePrice: '',\n    commissionRate: '',\n    brokerageFee: '',\n    brokerageFeePaidTo: '',\n    payoffBalance: '',\n    amountDueToCustomer: '',\n    amountDueToRP: '',\n    \n    // Seller Information\n    sellerName: '',\n    sellerAddress: '',\n    sellerPhone: '',\n    sellerEmail: '',\n    sellerLicenseNumber: '',\n    sellerTier: 'Tier 1',\n    \n    // Buyer Information (for buy/sell deals)\n    buyerName: '',\n    buyerAddress: '',\n    buyerPhone: '',\n    buyerEmail: '',\n    buyerLicenseNumber: '',\n    buyerTier: 'Tier 1',\n    \n    // Buy/Sell Configuration\n    buyerType: 'dealer', // 'private' or 'dealer' - default to dealer for buy/sell\n    sellerType: 'private', // 'private' or 'dealer'\n    \n    // RP Information\n    rpStockNumber: '',\n    vehicleDescription: '',\n    generalNotes: '',\n    \n    // Documentation\n    contractRequired: false,\n    titlePresent: false,\n    driverLicensePresent: false,\n    odometerPresent: false,\n    dealerLicensePresent: false,\n    documents: [], // For uploaded files\n    salesperson: ''\n  });\n\n  const [vinDecoding, setVinDecoding] = useState(false);\n  const [vinDecoded, setVinDecoded] = useState(false);\n  const [dealerSuggestions, setDealerSuggestions] = useState([]);\n  const [dealerBuyerSuggestions, setDealerBuyerSuggestions] = useState([]); // For Dealer Info (Buyer)\n  const [dealerSearch, setDealerSearch] = useState('');\n  const [formErrors, setFormErrors] = useState({});\n  const [saving, setSaving] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  // Remove documentTypes and documentTypeSelections state\n  // Add notes state for each file\n  const [documentNotes, setDocumentNotes] = useState([]); // Array of {fileIndex, note}\n\n  useEffect(() => {\n    // Fetch document types from backend\n    fetch(`${API_BASE}/api/backoffice/document-types`, { credentials: 'include' })\n      .then(res => res.json())\n      .then(data => {\n        if (data.success && Array.isArray(data.data)) {\n          // setDocumentTypes(data.data); // This line is removed\n        }\n      })\n      .catch(() => {\n        // setDocumentTypes([]); // This line is removed\n      });\n  }, []);\n\n  // Helper function to format currency input\n  const formatCurrency = (value) => {\n    if (!value) return '';\n    // Remove all non-numeric characters except decimal point\n    const numericValue = value.toString().replace(/[^\\d.]/g, '');\n    // Ensure only one decimal point\n    const parts = numericValue.split('.');\n    if (parts.length > 2) {\n      return parts[0] + '.' + parts.slice(1).join('');\n    }\n    return numericValue;\n  };\n\n  // Add a helper to join address parts into a single line\n  function joinAddress(address) {\n    if (!address) return '';\n    const { street, city, state, zip } = address;\n    return [street, city, state, zip].filter(Boolean).join(', ');\n  }\n  // Add a helper to parse a single line address into parts\n  function parseAddress(full) {\n    if (!full) return { street: '', city: '', state: '', zip: '' };\n    const parts = full.split(',').map(s => s.trim());\n    return {\n      street: parts[0] || '',\n      city: parts[1] || '',\n      state: parts[2] || '',\n      zip: parts[3] || ''\n    };\n  }\n\n\n  // Get dynamic labels based on deal type\n  const getDynamicLabels = () => {\n    const dealType2 = formData.dealType2SubType;\n    const isRetailPP = formData.dealType === 'retail-pp';\n    \n    return {\n      purchasePriceLabel: dealType2 === 'sale' ? 'Sale Price' : 'Purchase Price',\n      sellerLabel: dealType2 === 'sale' ? 'Sold To' : 'Purchased From',\n      sellerSectionTitle: dealType2 === 'sale' ? 'Buyer Information' : 'Seller Information',\n      // For retail PP deals, use more generic labels\n      companyLabel: isRetailPP ? 'Company (if applicable)' : 'Company/Dealer',\n      licenseLabel: isRetailPP ? 'License Number (if applicable)' : 'Dealer License Number',\n      addressLabel: isRetailPP ? 'Address' : 'Seller Address'\n    };\n  };\n\n  const dynamicLabels = getDynamicLabels();\n\n  // Remove Deal Type 2 from main dealTypes\n  const dealTypes = [\n    { value: 'wholesale-d2d', label: 'Wholesale - D2D' },\n    { value: 'wholesale-private', label: 'Wholesale - Private Party' },\n    { value: 'wholesale-flip', label: 'Wholesale - Flip' },\n    { value: 'retail-pp', label: 'Retail - PP' },\n    { value: 'retail-auction', label: 'Retail - Auction' },\n    { value: 'retail-dtod', label: 'Retail - DtoD' },\n    { value: 'auction', label: 'Auction' }\n  ];\n\n  const fundingSources = [\n    { value: 'flpn-retail', label: 'FLPN - Retail' },\n    { value: 'flpn-wholesale', label: 'FLPN - Wholesale' },\n    { value: 'cash', label: 'Cash' },\n    { value: 'flooring-line', label: 'Flooring Line' },\n    { value: 'consignment', label: 'Consignment' }\n  ];\n\n  const paymentMethods = [\n    { value: 'check', label: 'Check' },\n    { value: 'wire', label: 'Wire Transfer' },\n    { value: 'ach', label: 'ACH' },\n    { value: 'cash', label: 'Cash' },\n    { value: 'financed', label: 'Financed' }\n  ];\n\n  const dealType2SubOptions = [\n    { value: 'buy', label: 'Buy' },\n    { value: 'sale', label: 'Sale' },\n    { value: 'buy-sell', label: 'Buy/Sell' },\n    { value: 'consign-a', label: 'Consign-A' },\n    { value: 'consign-b', label: 'Consign-B' },\n    { value: 'consign-c', label: 'Consign-C' },\n    { value: 'consign-rdnc', label: 'Consign-RDNC' }\n  ];\n\n  // Add to formData initial state\n  // This block is removed as per the edit hint.\n\n  // Add salesperson options\n  const salespersonOptions = [\n    { value: 'Brennan S', label: 'Brennan S' },\n    { value: 'Parker G', label: 'Parker G' },\n    { value: 'Dan M', label: 'Dan M' },\n    { value: 'Adiana P', label: 'Adiana P' },\n    { value: 'Brett M', label: 'Brett M' },\n    { value: 'Other', label: 'Other' }\n  ];\n\n  // Get deal type specific fields\n  const getDealTypeFields = () => {\n    // Both dealType and dealType2SubType are always required\n    const dealType = formData.dealType;\n    return {\n      showFinancials: [\n        'wholesale-d2d', 'wholesale-private', 'wholesale-flip',\n        'retail-pp', 'retail-auction', 'retail-dtod', 'auction'\n      ].includes(dealType),\n      showSellerInfo: true,\n      showDocumentation: [\n        'wholesale-d2d', 'wholesale-private', 'wholesale-flip',\n        'retail-pp', 'retail-auction', 'retail-dtod', 'auction'\n      ].includes(dealType),\n      requiredFields: ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName']\n    };\n  };\n\n  const dealTypeFields = getDealTypeFields();\n\n  // Real VIN decode function using backend API\n  const decodeVIN = async (vin) => {\n    setVinDecoding(true);\n    try {\n      const headers = { ...getAuthHeaders(), 'Content-Type': 'application/json' };\n      console.log('[VIN DECODE] Sending request with headers:', headers);\n      const response = await fetch(`${API_BASE}/api/deals/vin/decode`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({ vin }),\n        credentials: 'include'\n      });\n      console.log('[VIN DECODE] Response status:', response.status);\n      const data = await response.json();\n      console.log('[VIN DECODE] Response data:', data);\n      if (data.success && data.data) {\n        setFormData(prev => ({\n          ...prev,\n          year: data.data.year || '',\n          make: data.data.make || '',\n          model: data.data.model || ''\n        }));\n        setVinDecoded(true);\n        setTimeout(() => setVinDecoded(false), 3000);\n      } else {\n        console.error('VIN decode failed:', data.error);\n        alert(data.error || 'Unable to decode VIN. Please check the VIN and try again.');\n      }\n    } catch (error) {\n      console.error('[VIN DECODE] Error:', error);\n      alert('Unable to decode VIN. Please check your connection and try again.');\n    } finally {\n      setVinDecoding(false);\n    }\n  };\n\n  // Real dealer search using backend API\n  const searchDealers = async (query) => {\n    if (query.length < 2) {\n      setDealerSuggestions([]);\n      return;\n    }\n    // setSearchingDealers(true); // Removed unused state\n    try {\n      const response = await fetch(`${API_BASE}/api/dealers/search?q=${encodeURIComponent(query)}`, { credentials: 'include' });\n      const data = await response.json();\n      setDealerSuggestions(data.dealers || []);\n      console.log('[DEALER SEARCH] Suggestions:', data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerSuggestions([]);\n    }\n  };\n\n  // Dealer search for Dealer Info (Buyer)\n  const searchDealersBuyer = async (query) => {\n    if (query.length < 2) {\n      setDealerBuyerSuggestions([]);\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/api/dealers/search?q=${encodeURIComponent(query)}`, { credentials: 'include' });\n      const data = await response.json();\n      setDealerBuyerSuggestions(data.dealers || []);\n    } catch (error) {\n      console.error('Dealer search error:', error);\n      setDealerBuyerSuggestions([]);\n    }\n  };\n\n  // Autofill dealer info when a suggestion is selected\n  const handleDealerSuggestionClick = (dealer) => {\n    setFormData(prev => {\n      const updated = {\n        ...prev,\n        sellerName: dealer.name || '',\n        sellerAddress: dealer.addressString || '',\n        sellerPhone: dealer.phone || '',\n        sellerEmail: dealer.email || '',\n        sellerLicenseNumber: dealer.licenseNumber || '',\n        sellerTier: dealer.tier || 'Tier 1',\n        sellerType: 'dealer', // Set sellerType to dealer when a dealer is selected\n      };\n      console.log('[DEBUG] handleDealerSuggestionClick - sellerType set to:', updated.sellerType);\n      return updated;\n    });\n    setDealerSuggestions([]);\n    setDealerSearch('');\n    console.log('[DEALER AUTOFILL] Selected dealer:', dealer);\n    console.log('[DEALER AUTOFILL] Autofilled address:', dealer.addressString);\n    console.log('[DEALER AUTOFILL] Autofilled license number:', dealer.licenseNumber);\n  };\n\n  // Auto-generate stock number\n  // useEffect(() => {\n  //   if (!formData.rpStockNumber && formData.year && formData.make) {\n  //     const year = new Date().getFullYear();\n  //     const stockNumber = `RP${year}${String(Math.floor(Math.random() * 9999) + 1).padStart(4, '0')}`;\n  //     setFormData(prev => ({ ...prev, rpStockNumber: stockNumber }));\n  //   }\n  // }, [formData.year, formData.make, formData.rpStockNumber]);\n\n  const handleInputChange = (field, value) => {\n    let processedValue = value;\n    \n    // Handle currency formatting for financial fields\n    if (['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field)) {\n      processedValue = formatCurrency(value);\n    }\n    \n    // If changing dealType, reset dealType2SubType unless still deal-type-2\n    if (field === 'dealType') {\n      setFormData(prev => ({\n        ...prev,\n        dealType: processedValue,\n        dealType2SubType: processedValue === 'deal-type-2' ? prev.dealType2SubType : \n                         processedValue === 'wholesale-flip' ? 'buy-sell' : ''\n      }));\n      if (currentStep > 1) setCurrentStep(1);\n      return;\n    }\n    \n    setFormData(prev => ({ ...prev, [field]: processedValue }));\n    \n    // Clear error when user starts typing\n    if (formErrors[field]) {\n      setFormErrors(prev => ({ ...prev, [field]: null }));\n    }\n    \n    // Trigger VIN decode when VIN is 17 characters\n    if (field === 'vin' && processedValue.length === 17 && !vinDecoded) {\n      decodeVIN(processedValue);\n    }\n    \n    // Search dealers when typing in seller field (only if seller type is dealer)\n    if (field === 'sellerName') {\n      if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n        // For buy/sell deals, only search if seller type is dealer\n        if (formData.sellerType === 'dealer') {\n          searchDealers(processedValue);\n        } else {\n          setDealerSuggestions([]); // Clear suggestions for private party\n        }\n      } else {\n        // For other deals, always search\n        searchDealers(processedValue);\n      }\n    }\n\n    // Search dealers when typing in buyer field (only if buyer type is dealer)\n    if (field === 'buyerName') {\n      if (formData.buyerType === 'dealer') {\n        searchDealersBuyer(processedValue);\n      } else {\n        setDealerBuyerSuggestions([]); // Clear suggestions for private party\n      }\n    }\n\n    // Clear dealer suggestions when switching types\n    if (field === 'sellerType' || field === 'buyerType') {\n      if (field === 'sellerType' && processedValue === 'private') {\n        setDealerSuggestions([]);\n      }\n      if (field === 'buyerType' && processedValue === 'private') {\n        setDealerBuyerSuggestions([]);\n      }\n    }\n\n    // Reset to step 1 when deal type changes\n    if (field === 'dealType' && currentStep > 1) {\n      setCurrentStep(1);\n    }\n  };\n\n  // Handle file uploads for documentation\n  const handleDocumentUpload = (e) => {\n    const files = Array.from(e.target.files);\n    setFormData(prev => ({\n      ...prev,\n      documents: [...(prev.documents || []), ...files]\n    }));\n    setDocumentNotes(prev => ([\n      ...prev,\n      ...files.map((_, i) => ({ fileIndex: (prev.length + i), note: '' }))\n    ]));\n  };\n  const handleRemoveDocument = (index) => {\n    setFormData(prev => ({\n      ...prev,\n      documents: prev.documents.filter((_, i) => i !== index)\n    }));\n    setDocumentNotes(prev => prev.filter(sel => sel.fileIndex !== index).map(sel => ({ ...sel, fileIndex: sel.fileIndex > index ? sel.fileIndex - 1 : sel.fileIndex })));\n  };\n  const handleDocumentNoteChange = (fileIndex, note) => {\n    setDocumentNotes(prev => {\n      const found = prev.find(sel => sel.fileIndex === fileIndex);\n      if (found) {\n        return prev.map(sel => sel.fileIndex === fileIndex ? { ...sel, note } : sel);\n      } else {\n        return [...prev, { fileIndex, note }];\n      }\n    });\n  };\n\n  // When a dealer is selected for seller, autofill full address and license number\n  const handleDealerSuggestionSelect = (dealer) => {\n    setFormData(prev => {\n      const updated = {\n        ...prev,\n        sellerName: dealer.name || '',\n        sellerCompany: dealer.company || '',\n        sellerPhone: dealer.phone || '',\n        sellerEmail: dealer.email || '',\n        sellerAddress: dealer.addressString || '',\n        sellerLicenseNumber: dealer.licenseNumber || '',\n        sellerTier: dealer.tier || 'Tier 1',\n        sellerType: 'dealer', // Set sellerType to dealer when a dealer is selected\n      };\n      console.log('[DEBUG] handleDealerSuggestionSelect - sellerType set to:', updated.sellerType);\n      return updated;\n    });\n    setDealerSuggestions([]);\n    setDealerSearch('');\n  };\n\n  // When a dealer is selected for buyer, autofill full address and license number\n  const handleBuyerDealerSuggestionSelect = (dealer) => {\n    setFormData(prev => ({\n      ...prev,\n      buyerName: dealer.name || '',\n      buyerAddress: dealer.addressString || '',\n      buyerPhone: dealer.phone || '',\n      buyerEmail: dealer.email || '',\n      buyerLicenseNumber: dealer.licenseNumber || '',\n      buyerTier: dealer.tier || 'Tier 1'\n    }));\n    setDealerBuyerSuggestions([]);\n    console.log('[BUYER DEALER AUTOFILL] Selected dealer:', dealer);\n  };\n\n  const validateForm = () => {\n    const errors = {};\n    let requiredFields = dealTypeFields.requiredFields || ['vin', 'dealType', 'dealType2SubType', 'year', 'make', 'model', 'sellerName'];\n    \n    // Add buyer fields for buy/sell deals\n    if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n      requiredFields = [...requiredFields, 'buyerName'];\n    }\n    \n    requiredFields.forEach(field => {\n      if (!formData[field] || formData[field].toString().trim() === '') {\n        errors[field] = `${field.charAt(0).toUpperCase() + field.slice(1)} is required`;\n      }\n    });\n\n    // Additional validation for specific fields\n    if (formData.vin && formData.vin.length !== 17) {\n      errors.vin = 'VIN must be exactly 17 characters';\n    }\n\n    if (formData.year && (formData.year < 1900 || formData.year > new Date().getFullYear() + 1)) {\n      errors.year = 'Please enter a valid year';\n    }\n\n    if (formData.mileage && formData.mileage < 0) {\n      errors.mileage = 'Mileage cannot be negative';\n    }\n\n    if (dealTypeFields.showFinancials && formData.purchasePrice && formData.purchasePrice <= 0) {\n      errors.purchasePrice = 'Purchase price must be greater than 0';\n    }\n\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSave = async (isDraft = false) => {\n    if (!currentUser) {\n      alert('You must be logged in to submit a deal.');\n      navigate('/login');\n      return;\n    }\n    if (!isDraft && !validateForm()) {\n      console.log('[DEAL SUBMIT] Validation errors:', formErrors);\n      return;\n    }\n    \n    setSaving(true);\n    \n    try {\n      // Debug: log formData before building dealData\n      console.log('[DEAL SUBMIT] formData:', formData);\n      console.log('[DEBUG] handleSave - sellerType in formData:', formData.sellerType);\n      // Log all financial fields from formData\n      console.log('[DEAL SUBMIT] Financial fields:', {\n        brokerageFee: formData.brokerageFee,\n        brokerageFeePaidTo: formData.brokerageFeePaidTo,\n        payoffBalance: formData.payoffBalance,\n        amountDueToCustomer: formData.amountDueToCustomer,\n        amountDueToRP: formData.amountDueToRP,\n        commissionRate: formData.commissionRate\n      });\n      // First, create the deal in the backend\n      const dealData = {\n        vehicle: `${formData.year} ${formData.make} ${formData.model}`,\n        vin: formData.vin,\n        year: parseInt(formData.year),\n        make: formData.make,\n        model: formData.model,\n        rpStockNumber: formData.rpStockNumber,\n        color: formData.exteriorColor,\n        exteriorColor: formData.exteriorColor, // Add this field\n        interiorColor: formData.interiorColor, // Add this field\n        mileage: parseInt(formData.mileage) || 0,\n        purchasePrice: parseFloat(formData.purchasePrice) || 0,\n        listPrice: parseFloat(formData.listPrice) || 0,\n        killPrice: parseFloat(formData.killPrice) || 0,\n        wholesalePrice: parseFloat(formData.wholesalePrice) || 0,\n        dealType: formData.dealType,\n        dealType2SubType: formData.dealType2SubType, // <-- Ensure this is sent\n        dealType2: formData.dealType2SubType, // <-- Add this for backend compatibility\n        seller: {\n          name: formData.sellerName,\n          type: formData.sellerType || (formData.dealType === 'wholesale-flip' ? 'private' : formData.dealType.includes('private') ? 'private' : 'dealer'),\n          contact: {\n            address: parseAddress(formData.sellerAddress), // Use parsed address\n            phone: formData.sellerPhone,\n            email: formData.sellerEmail\n          },\n          licenseNumber: formData.sellerLicenseNumber,\n          tier: formData.sellerTier\n        },\n        // Always include buyer info if present\n        buyer: {\n          name: formData.buyerName,\n          type: formData.buyerType,\n          contact: {\n            address: parseAddress(formData.buyerAddress),\n            phone: formData.buyerPhone,\n            email: formData.buyerEmail\n          },\n          licenseNumber: formData.buyerLicenseNumber,\n          tier: formData.buyerTier\n        },\n        fundingSource: formData.fundingSource,\n        paymentMethod: formData.paymentMethod,\n        purchaseDate: formData.purchaseDate ? new Date(formData.purchaseDate) : new Date(),\n        currentStage: 'documentation',\n        salesperson: currentUser.name || 'Unknown', // Use current user's name as salesperson\n        // --- Add all financial fields below ---\n        brokerFee: parseFloat(formData.brokerageFee) || 0,\n        brokerFeePaidTo: formData.brokerageFeePaidTo || '',\n        payoffBalance: parseFloat(formData.payoffBalance) || 0,\n        amountDueToCustomer: parseFloat(formData.amountDueToCustomer) || 0,\n        amountDueToRP: parseFloat(formData.amountDueToRP) || 0,\n        commissionRate: parseFloat(formData.commissionRate) || 0,\n        generalNotes: formData.generalNotes // <-- Ensure this is sent\n      };\n      console.log('[DEBUG] handleSave - dealData.seller.type:', dealData.seller.type);\n      // Debug: log license numbers being sent\n      console.log('[DEAL SUBMIT] SENDING seller license number:', formData.sellerLicenseNumber);\n      console.log('[DEAL SUBMIT] SENDING buyer license number:', formData.buyerLicenseNumber);\n      // Debug: log dealData before sending\n      console.log('[DEAL SUBMIT] dealData to backend:', dealData);\n      // Create deal (this would be your existing deal creation endpoint)\n      const dealResponse = await fetch(`${API_BASE}/api/deals`, {\n        method: 'POST',\n        headers: buildHeaders(),\n        body: JSON.stringify(dealData),\n        credentials: 'include'\n      });\n      // Debug: log backend response status\n      console.log('[DEAL SUBMIT] Backend response status:', dealResponse.status);\n      const dealResult = await dealResponse.json().catch(() => ({}));\n      console.log('[DEAL SUBMIT] Backend response JSON:', dealResult);\n      if (!dealResponse.ok) {\n        console.log('[DEAL SUBMIT] Backend error response:', dealResult);\n        throw new Error('Failed to create deal');\n      }\n\n      const dealId = dealResult.deal._id;\n\n      // Generate document and create vehicle record\n      const documentResponse = await fetch(`${API_BASE}/api/documents/generate/${dealId}`, {\n        method: 'POST',\n        headers: buildHeaders(),\n        body: JSON.stringify({\n          dealType2: formData.dealType2SubType,\n          commissionRate: parseFloat(formData.commissionRate) || 0,\n          stockNumber: formData.rpStockNumber,\n          wholesalePrice: parseFloat(formData.wholesalePrice) || 0,\n          generalNotes: formData.generalNotes,\n          vehicleDescription: formData.vehicleDescription,\n          buyerName: formData.buyerName,\n          buyerType: formData.buyerType,\n          buyerAddress: formData.buyerAddress,\n          buyerPhone: formData.buyerPhone,\n          buyerEmail: formData.buyerEmail,\n          buyerLicenseNumber: formData.buyerLicenseNumber,\n          buyerTier: formData.buyerTier,\n          sellerType: formData.sellerType\n        }),\n        credentials: 'include' // Ensure cookies/session are sent for authentication\n      });\n\n      if (!documentResponse.ok) {\n        const err = await documentResponse.json().catch(() => ({}));\n        throw new Error(err.error || 'Failed to generate document');\n      }\n\n      const documentResult = await documentResponse.json();\n      \n      // --- UPLOAD USER DOCUMENTS ---\n      if (formData.documents && formData.documents.length > 0) {\n        for (let i = 0; i < formData.documents.length; i++) {\n          const file = formData.documents[i];\n          const noteObj = documentNotes.find(sel => sel.fileIndex === i);\n          const note = noteObj ? noteObj.note : '';\n          const documentType = 'extra_doc';\n          const form = new FormData();\n          form.append('document', file);\n          if (note) form.append('notes', note);\n          try {\n            const uploadRes = await fetch(`${API_BASE}/api/backoffice/deals/${dealId}/documents/${documentType}/upload`, {\n              method: 'POST',\n              headers: {\n                'Authorization': getAuthHeaders()['Authorization']\n              },\n              body: form,\n              credentials: 'include'\n            });\n            if (!uploadRes.ok) {\n              const err = await uploadRes.json().catch(() => ({}));\n              toast.error(`Failed to upload ${file.name}: ${err.error || uploadRes.statusText}`);\n            } else {\n              toast.success(`Uploaded ${file.name}`);\n            }\n          } catch (err) {\n            toast.error(`Error uploading ${file.name}: ${err.message}`);\n          }\n        }\n      }\n      // --- END UPLOAD USER DOCUMENTS ---\n      \n      console.log('Deal created and document generated:', documentResult);\n      \n      // Show success message with document info\n      const successMessage = isDraft \n        ? 'Draft saved successfully!' \n        : `Deal submitted successfully!\\n\\nYour deal has been sent to the back office for processing. You will be notified when the deal is complete.`;\n      \n      toast.success(successMessage);\n      \n      // Optionally redirect to a success page or clear form\n      if (!isDraft) {\n        // Clear form or redirect\n        setFormData({\n          vin: '',\n          year: '',\n          make: '',\n          model: '',\n          mileage: '',\n          exteriorColor: '',\n          interiorColor: '',\n          dealType: '',\n          dealType2SubType: '',\n          fundingSource: '',\n          purchaseDate: todayStr,\n          paymentMethod: 'check',\n          currentStage: 'initial-contact',\n          purchasePrice: '',\n          listPrice: '',\n          killPrice: '',\n          wholesalePrice: '',\n          commissionRate: '',\n          brokerageFee: '',\n          brokerageFeePaidTo: '',\n          payoffBalance: '',\n          amountDueToCustomer: '',\n          amountDueToRP: '',\n          sellerName: '',\n          sellerAddress: '',\n          sellerPhone: '',\n          sellerEmail: '',\n          sellerLicenseNumber: '',\n          sellerTier: 'Tier 1',\n          buyerName: '',\n          buyerAddress: '',\n          buyerPhone: '',\n          buyerEmail: '',\n          buyerLicenseNumber: '',\n          buyerTier: 'Tier 1',\n          buyerType: 'dealer',\n          sellerType: 'private',\n          rpStockNumber: '',\n          vehicleDescription: '',\n          generalNotes: '',\n          contractRequired: false,\n          titlePresent: false,\n          driverLicensePresent: false,\n          odometerPresent: false,\n          dealerLicensePresent: false,\n          documents: [],\n          salesperson: ''\n        });\n        setCurrentStep(1);\n      }\n      \n    } catch (error) {\n      if (error.message.includes('401') || error.message.includes('not authorized')) {\n        alert('Session expired or not authorized. Please log in again.');\n        navigate('/login');\n      } else {\n        alert(`Error saving deal: ${error.message}`);\n        console.log('[DEAL SUBMIT] Error:', error);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleEmailToListingTeam = () => {\n    const emailBody = `New Vehicle Ready for Listing\n\nVehicle: ${formData.year} ${formData.make} ${formData.model}\nVIN: ${formData.vin}\nStock #: ${formData.rpStockNumber}\nMileage: ${formData.mileage}\nExterior: ${formData.exteriorColor}\nInterior: ${formData.interiorColor}\n\nDescription:\n${formData.vehicleDescription}\n\nPlease prepare listing materials for this vehicle.\n\nBest regards,\n${currentUser.name}`;\n\n    const mailtoLink = `mailto:listing@rpexotics.com?subject=New Vehicle for Listing - ${formData.year} ${formData.make} ${formData.model}&body=${encodeURIComponent(emailBody)}`;\n    window.open(mailtoLink);\n  };\n\n  // Remove handleCompleteDeal and use handleSave for final submission\n  // Update button text and alerts\n\n  const renderStepIndicator = () => (\n    <div className=\"mb-8\">\n      <div className=\"flex items-center justify-between\">\n        {Array.from({ length: totalSteps }, (_, index) => {\n          const stepNumber = index + 1;\n          const isActive = currentStep === stepNumber;\n          const isCompleted = currentStep > stepNumber;\n          \n          let stepTitle = '';\n          let stepDescription = '';\n          \n          if (stepNumber === 1) {\n            stepTitle = 'Vehicle & Deal Type';\n            stepDescription = 'Enter vehicle information and select deal type';\n          } else if (stepNumber === 2) {\n            stepTitle = 'Deal Configuration';\n            stepDescription = 'Configure funding, payment, and timeline';\n          } else if (stepNumber === 3 && dealTypeFields.showFinancials) {\n            stepTitle = 'Financial Information';\n            stepDescription = 'Set pricing and financial terms';\n          } else if ((stepNumber === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo) || \n                     (stepNumber === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo)) {\n            stepTitle = 'Seller Information';\n            stepDescription = 'Add seller contact information';\n          } else if ((stepNumber === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation) ||\n                     (stepNumber === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation) ||\n                     (stepNumber === 5 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation)) {\n            stepTitle = 'Documentation & Notes';\n            stepDescription = 'Document status and additional notes';\n          }\n          \n          return (\n            <div key={stepNumber} className=\"flex items-center\">\n              <div className={`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${\n                isActive \n                  ? 'bg-blue-600 border-blue-600 text-white' \n                  : isCompleted \n                    ? 'bg-green-600 border-green-600 text-white' \n                    : 'bg-white/10 border-white/20 text-gray-400'\n              }`}>\n                {isCompleted ? (\n                  <CheckCircle className=\"h-5 w-5\" />\n                ) : (\n                  <span className=\"text-sm font-medium\">{stepNumber}</span>\n                )}\n              </div>\n              <div className=\"ml-3\">\n                <p className={`text-sm font-medium ${isActive ? 'text-white' : 'text-gray-400'}`}>\n                  {stepTitle}\n                </p>\n                <p className=\"text-xs text-gray-500\">{stepDescription}</p>\n              </div>\n              {stepNumber < totalSteps && (\n                <div className={`w-16 h-0.5 mx-4 ${isCompleted ? 'bg-green-600' : 'bg-white/20'}`} />\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n\n  const renderFormField = (label, field, type = 'text', options = null, required = false, icon = null, isDealerBuyer = false) => {\n    return (\n      <div className=\"space-y-2\">\n        <label className=\"flex items-center text-sm font-medium text-gray-300\">\n          {icon && React.createElement(icon, { className: \"h-4 w-4 mr-2\" })}\n          {label}\n          {required && <span className=\"text-red-400 ml-1\">*</span>}\n        </label>\n        \n        {type === 'select' ? (\n          <select\n            value={formData[field]}\n            onChange={(e) => handleInputChange(field, e.target.value)}\n            className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\n              formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n            }`}\n          >\n            <option value=\"\">Select {label}</option>\n            {options?.map(option => (\n              <option key={option.value} value={option.value} className=\"bg-gray-800\">\n                {option.label}\n              </option>\n            ))}\n          </select>\n        ) : type === 'textarea' ? (\n          <textarea\n            value={formData[field]}\n            onChange={(e) => handleInputChange(field, e.target.value)}\n            rows={4}\n            placeholder={`Enter ${label.toLowerCase()}...`}\n            className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none ${\n              formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n            }`}\n          />\n        ) : type === 'checkbox' ? (\n          <label className=\"flex items-center space-x-2 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={!!formData[field]}\n              onChange={(e) => handleInputChange(field, e.target.checked)}\n              className=\"rounded bg-white/10 border-white/20 text-blue-500 focus:ring-blue-500\"\n            />\n            <span className=\"text-gray-300\">{label}</span>\n          </label>\n        ) : (\n          <div className=\"relative\">\n            {['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) && (\n              <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm\">$</div>\n            )}\n            <input\n              type={type}\n              value={formData[field] || ''}\n              onChange={(e) => {\n                handleInputChange(field, e.target.value);\n              }}\n              placeholder={`Enter ${label.toLowerCase()}...`}\n              className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\n                formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n              } ${field === 'vin' ? 'pr-20' : ''} ${['purchasePrice', 'listPrice', 'killPrice', 'wholesalePrice', 'brokerageFee', 'payoffBalance', 'amountDueToCustomer', 'amountDueToRP'].includes(field) ? 'pl-8' : ''}`}\n            />\n            \n            {field === 'vin' && formData.vin.length === 17 && (\n              <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2\">\n                {vinDecoding ? (\n                  <Loader2 className=\"h-5 w-5 text-blue-400 animate-spin\" />\n                ) : vinDecoded ? (\n                  <CheckCircle className=\"h-5 w-5 text-green-400\" />\n                ) : (\n                  <button\n                    onClick={() => decodeVIN(formData.vin)}\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded transition-colors\"\n                  >\n                    Decode\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {/* Dealer Buyer Autocomplete */}\n            {isDealerBuyer && field === 'dealerName' && dealerBuyerSuggestions.length > 0 && (\n              <div className=\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\">\n                {dealerBuyerSuggestions.map(dealer => (\n                  <div\n                    key={dealer.id}\n                    className=\"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\"\n                    onClick={() => {\n                      setFormData(prev => ({\n                        ...prev,\n                        dealerName: dealer.name,\n                        dealerCompany: dealer.company,\n                        dealerPhone: dealer.phone,\n                        dealerEmail: dealer.contact?.email || dealer.email || '',\n                        dealerAddress: dealer.location || dealer.address || ''\n                      }));\n                      setDealerBuyerSuggestions([]);\n                    }}\n                  >\n                    <div className=\"font-medium text-white\">{dealer.name}</div>\n                    <div className=\"text-sm text-gray-400\">{dealer.company}  {dealer.location}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n            \n            {/* Buyer Name Autocomplete for buy/sell deals */}\n            {field === 'buyerName' && formData.buyerType === 'dealer' && dealerBuyerSuggestions.length > 0 && (\n              <div className=\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\">\n                {dealerBuyerSuggestions.map(dealer => (\n                  <div\n                    key={dealer.id}\n                    className=\"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\"\n                    onClick={() => {\n                      handleBuyerDealerSuggestionSelect(dealer);\n                    }}\n                  >\n                    <div className=\"font-medium text-white\">{dealer.name}</div>\n                    <div className=\"text-sm text-gray-400\">{dealer.company}  {dealer.location}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n            \n            {/* Seller Autocomplete (only for non-retail deals and when seller type is dealer for buy/sell) */}\n            {field === 'sellerName' && dealerSuggestions.length > 0 && (\n              (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell' && formData.sellerType === 'dealer') ||\n              (!['retail-pp','retail-auction','retail-dtod'].includes(formData.dealType) && \n               !(formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell'))\n            ) && (\n              <div className=\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\">\n                {dealerSuggestions.map(dealer => (\n                  <div\n                    key={dealer.id}\n                    className=\"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\"\n                    onClick={() => {\n                      handleDealerSuggestionSelect(dealer);\n                    }}\n                  >\n                    <div className=\"font-medium text-white\">{dealer.name}</div>\n                    <div className=\"text-sm text-gray-400\">{dealer.company}  {dealer.location}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n        \n        {formErrors[field] && (\n          <div className=\"flex items-center text-red-400 text-sm\">\n            <AlertCircle className=\"h-4 w-4 mr-1\" />\n            {formErrors[field]}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6\">\n            {/* Deal Type Selection */}\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">Deal Type Selection</h3>\n              {renderFormField('Deal Type', 'dealType', 'select', dealTypes, true, Car)}\n              <div className=\"mt-4\">\n                {renderFormField('Deal Type 2', 'dealType2SubType', 'select', dealType2SubOptions, true)}\n              </div>\n            </div>\n            {/* Vehicle Information */}\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">Vehicle Information</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"md:col-span-2\">\n                  {renderFormField('VIN', 'vin', 'text', null, true, Hash)}\n                </div>\n                {renderFormField('Year', 'year', 'number', null, true, Calendar)}\n                {renderFormField('Make', 'make', 'text', null, true)}\n                {renderFormField('Model', 'model', 'text', null, true)}\n                {renderFormField('Mileage', 'mileage', 'number', null, false, Gauge)}\n                {renderFormField('Exterior Color', 'exteriorColor', 'text', null, false, Palette)}\n                {renderFormField('Interior Color', 'interiorColor', 'text', null, false, Palette)}\n                {/* Stock Number field removed for all deal types */}\n              </div>\n            </div>\n          </div>\n        );\n      \n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            {/* Deal Configuration */}\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">Deal Configuration</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {renderFormField('Funding Source', 'fundingSource', 'select', fundingSources, true, DollarSign)}\n                {renderFormField('Purchase/Sale Date', 'purchaseDate', 'date', null, true, Calendar)}\n                {renderFormField('Payment Method', 'paymentMethod', 'select', paymentMethods, true)}\n                {renderFormField('RP Stock Number', 'rpStockNumber', 'text', null, false, Hash)}\n                {renderFormField('Salesperson', 'salesperson', 'select', salespersonOptions, true, User)}\n              </div>\n            </div>\n          </div>\n        );\n      case 3:\n        return dealTypeFields.showFinancials ? (\n          <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n            <h3 className=\"text-lg font-medium text-white mb-4\">Financial Information</h3>\n            {formData.dealType2SubType === 'sale' ? (\n              <div className=\"space-y-6\">\n                {renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign)}\n                {renderFormField('Brokerage Fee', 'brokerageFee', 'number')}\n                {renderFormField('Brokerage Fee Paid To', 'brokerageFeePaidTo', 'text')}\n                {renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number')}\n                {renderFormField('Amount Due to RP', 'amountDueToRP', 'number')}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {/* Left column */}\n                <div className=\"space-y-6\">\n                  {renderFormField(dynamicLabels.purchasePriceLabel, 'purchasePrice', 'number', null, true, DollarSign)}\n                  {renderFormField('Kill Price', 'killPrice', 'number')}\n                  {renderFormField('Wholesale Price', 'wholesalePrice', 'number')}\n                  {renderFormField('List Price', 'listPrice', 'number')}\n                  {/* Only show Commission Rate for consign deals, otherwise keep layout clean */}\n                  {['consign-a','consign-b','consign-c','consign-rdnc'].includes(formData.dealType2SubType)\n                    ? renderFormField('Commission Rate (%)', 'commissionRate', 'number')\n                    : null}\n                </div>\n                {/* Right column */}\n                <div className=\"space-y-6\">\n                  {renderFormField('Brokerage Fee', 'brokerageFee', 'number')}\n                  {renderFormField('Brokerage Fee Paid To', 'brokerageFeePaidTo', 'text')}\n                  {renderFormField('Payoff Balance', 'payoffBalance', 'number')}\n                  {renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number')}\n                  {renderFormField('Amount Due to RP', 'amountDueToRP', 'number')}\n                </div>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <DollarSign className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-white mb-2\">Financial Information Not Required</h3>\n            <p className=\"text-gray-400\">This deal type does not require financial information.</p>\n          </div>\n        );\n      \n      case 4:\n        // Seller/Dealer Info step\n        if (formData.dealType === 'wholesale-flip' && formData.dealType2SubType === 'buy-sell') {\n          return (\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10 space-y-10\">\n              {/* Buyer Section */}\n              <div>\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-medium text-white\">Buyer Information</h3>\n                  <div className=\"flex space-x-2\">\n                    <button\n                      type=\"button\"\n                      onClick={() => handleInputChange('buyerType', 'private')}\n                      className={`px-3 py-1 rounded-lg border transition-colors text-sm ${\n                        formData.buyerType === 'private'\n                          ? 'bg-blue-600 border-blue-500 text-white'\n                          : 'bg-white/10 border-white/20 text-white hover:bg-white/20'\n                      }`}\n                    >\n                      Private Party\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleInputChange('buyerType', 'dealer')}\n                      className={`px-3 py-1 rounded-lg border transition-colors text-sm ${\n                        formData.buyerType === 'dealer'\n                          ? 'bg-green-600 border-green-500 text-white'\n                          : 'bg-white/10 border-white/20 text-white hover:bg-white/20'\n                      }`}\n                    >\n                      Dealer\n                    </button>\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {renderFormField(formData.buyerType === 'dealer' ? 'Dealer Name' : 'Buyer Name', 'buyerName', 'text', null, true, User)}\n                  {renderFormField('Phone', 'buyerPhone', 'tel', null, false, Phone)}\n                  {renderFormField('Email', 'buyerEmail', 'email', null, false, Mail)}\n                  {renderFormField('Address', 'buyerAddress', 'text', null, false, MapPin)}\n                  {formData.buyerType === 'dealer' && renderFormField('Dealer License Number', 'buyerLicenseNumber', 'text')}\n                  {formData.buyerType === 'dealer' && renderFormField('Dealer Tier', 'buyerTier', 'select', [\n                    { value: 'Tier 1', label: 'Tier 1: Pay Upon Title' },\n                    { value: 'Tier 2', label: 'Tier 2: Pay Prior to Release' }\n                  ])}\n                </div>\n              </div>\n              \n              {/* Seller Section */}\n              <div>\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-medium text-white\">Seller Information</h3>\n                  <div className=\"flex space-x-2\">\n                    <button\n                      type=\"button\"\n                      onClick={() => handleInputChange('sellerType', 'private')}\n                      className={`px-3 py-1 rounded-lg border transition-colors text-sm ${\n                        formData.sellerType === 'private'\n                          ? 'bg-blue-600 border-blue-500 text-white'\n                          : 'bg-white/10 border-white/20 text-white hover:bg-white/20'\n                      }`}\n                    >\n                      Private Party\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleInputChange('sellerType', 'dealer')}\n                      className={`px-3 py-1 rounded-lg border transition-colors text-sm ${\n                        formData.sellerType === 'dealer'\n                          ? 'bg-green-600 border-green-500 text-white'\n                          : 'bg-white/10 border-white/20 text-white hover:bg-white/20'\n                      }`}\n                    >\n                      Dealer\n                    </button>\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {renderFormField(formData.sellerType === 'dealer' ? 'Dealer Name' : 'Seller Name', 'sellerName', 'text', null, true, User)}\n                  {renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone)}\n                  {renderFormField('Email', 'sellerEmail', 'email', null, false, Mail)}\n                  {renderFormField('Address', 'sellerAddress', 'text', null, false, MapPin)}\n                  {formData.sellerType === 'dealer' && renderFormField('Dealer License Number', 'sellerLicenseNumber', 'text')}\n                  {formData.sellerType === 'dealer' && renderFormField('Dealer Tier', 'sellerTier', 'select', [\n                    { value: 'Tier 1', label: 'Tier 1: Pay Upon Title' },\n                    { value: 'Tier 2', label: 'Tier 2: Pay Prior to Release' }\n                  ])}\n                </div>\n              </div>\n            </div>\n          );\n        } else {\n          const isRetailPP = formData.dealType === 'retail-pp';\n          return (\n            <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n              <h3 className=\"text-lg font-medium text-white mb-4\">{dynamicLabels.sellerSectionTitle}</h3>\n              {isRetailPP ? (\n                // Retail PP - 2x2 grid layout\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"md:col-span-2\">\n                    {renderFormField(dynamicLabels.sellerLabel, 'sellerName', 'text', null, true, User)}\n                  </div>\n                  {renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone)}\n                  {renderFormField('Email', 'sellerEmail', 'email', null, false, Mail)}\n                  {renderFormField('Address', 'sellerAddress', 'text', null, false, MapPin)}\n                </div>\n              ) : (\n                // Other deal types - original layout\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"md:col-span-2\">\n                    {renderFormField(dynamicLabels.sellerLabel, 'sellerName', 'text', null, true, User)}\n                  </div>\n                  {!isRetailPP && renderFormField(dynamicLabels.companyLabel, 'sellerCompany', 'text')}\n                  {renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone)}\n                  {renderFormField('Email', 'sellerEmail', 'email', null, false, Mail)}\n                  {renderFormField(dynamicLabels.addressLabel, 'sellerAddress', 'text', null, false, MapPin)}\n                  \n                  {/* Show license number and tier only for wholesale d2d deals */}\n                  {formData.dealType === 'wholesale-d2d' && (\n                    <>\n                      <div>\n                        <label htmlFor=\"seller-license-number\" className=\"block text-sm font-medium text-gray-300 mb-1\">Dealer License Number</label>\n                        <input\n                          type=\"text\"\n                          id=\"seller-license-number\"\n                          value={formData.sellerLicenseNumber || ''}\n                          onChange={e => handleInputChange('sellerLicenseNumber', e.target.value)}\n                          className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                        />\n                      </div>\n                      \n                      {/* Tier Selection */}\n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-white mb-2\">\n                          Dealer Tier\n                        </label>\n                        <div className=\"flex space-x-4\">\n                          <button\n                            type=\"button\"\n                            onClick={() => handleInputChange('sellerTier', 'Tier 1')}\n                            className={`px-4 py-2 rounded-lg border transition-colors ${\n                              formData.sellerTier === 'Tier 1'\n                                ? 'bg-red-600 border-red-500 text-white'\n                                : 'bg-white/10 border-white/20 text-white hover:bg-white/20'\n                            }`}\n                          >\n                            Tier 1 - Pay Upon Title\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => handleInputChange('sellerTier', 'Tier 2')}\n                            className={`px-4 py-2 rounded-lg border transition-colors ${\n                              formData.sellerTier === 'Tier 2'\n                                ? 'bg-green-600 border-green-500 text-white'\n                                : 'bg-white/10 border-white/20 text-white hover:bg-white/20'\n                            }`}\n                          >\n                            Tier 2 - Pay Prior to Release\n                          </button>\n                        </div>\n                        <p className=\"text-xs text-gray-400 mt-1\">\n                          Tier 1: Pay Upon Title. Tier 2: Pay Prior to Release.\n                        </p>\n                      </div>\n                    </>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        }\n      \n      case 5:\n        return dealTypeFields.showDocumentation ? (\n          <div className=\"bg-white/5 rounded-xl p-6 border border-white/10\">\n            <h3 className=\"text-lg font-medium text-white mb-4\">Documentation & Notes</h3>\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-4\">\n                  <h4 className=\"text-md font-medium text-white mb-4\">Documentation Status</h4>\n                  {renderFormField('Contract Required', 'contractRequired', 'checkbox')}\n                  {renderFormField('Title Present', 'titlePresent', 'checkbox')}\n                  {renderFormField('Driver License Present', 'driverLicensePresent', 'checkbox')}\n                  {renderFormField('Odometer Present', 'odometerPresent', 'checkbox')}\n                  {renderFormField('Dealer License Present', 'dealerLicensePresent', 'checkbox')}\n                </div>\n                <div className=\"space-y-4\">\n                  {renderFormField('Vehicle Description', 'vehicleDescription', 'textarea', null, false, Info)}\n                  {/* File upload area */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-white mb-2\">Upload Documents/Photos</label>\n                    <input\n                      type=\"file\"\n                      multiple\n                      accept=\"image/*,application/pdf\"\n                      onChange={handleDocumentUpload}\n                      className=\"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700\"\n                    />\n                    {/* Preview uploaded files */}\n                    {formData.documents && formData.documents.length > 0 && (\n                      <div className=\"mt-3 space-y-2\">\n                        {formData.documents.map((file, i) => (\n                          <div key={i} className=\"flex items-center space-x-3 bg-white/10 rounded p-2\">\n                            {file.type && file.type.startsWith('image') ? (\n                              <img src={URL.createObjectURL(file)} alt={file.name} className=\"h-12 w-12 object-cover rounded\" />\n                            ) : (\n                              <span className=\"inline-block w-12 h-12 bg-gray-700 text-white flex items-center justify-center rounded\">PDF</span>\n                            )}\n                            <span className=\"text-white text-sm truncate max-w-xs\">{file.name}</span>\n                            <input\n                              type=\"text\"\n                              value={documentNotes.find(sel => sel.fileIndex === i)?.note || ''}\n                              onChange={e => handleDocumentNoteChange(i, e.target.value)}\n                              placeholder=\"Add a note (optional)\"\n                              className=\"bg-white/10 border rounded-lg px-2 py-1 text-white text-sm\"\n                            />\n                            <button\n                              type=\"button\"\n                              className=\"ml-auto text-red-400 hover:text-red-600 text-xs font-medium\"\n                              onClick={() => handleRemoveDocument(i)}\n                            >\n                              Remove\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n              <div>\n                {renderFormField('General Notes', 'generalNotes', 'textarea', null, false, Info)}\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <Info className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-white mb-2\">Documentation Not Required</h3>\n            <p className=\"text-gray-400\">This deal type does not require documentation tracking.</p>\n          </div>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  // Calculate total steps based on deal type\n  const getTotalSteps = () => {\n    let steps = 2; // Always have vehicle info and deal config\n    if (dealTypeFields.showFinancials) steps++;\n    if (dealTypeFields.showSellerInfo) steps++;\n    if (dealTypeFields.showDocumentation) steps++;\n    return steps;\n  };\n\n  const totalSteps = getTotalSteps();\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\">\n      {/* Animated Background */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      {/* Header */}\n      <header className=\"relative bg-black/20 backdrop-blur-md border-b border-white/10\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <button \n                onClick={() => window.history.back()}\n                className=\"mr-4 p-2 bg-white/10 hover:bg-white/20 rounded-lg border border-white/20 transition-colors\"\n              >\n                <ArrowLeft className=\"h-5 w-5 text-white\" />\n              </button>\n              <div className=\"flex items-center\">\n                <div className=\"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-3 mr-4 shadow-lg shadow-blue-500/25\">\n                  <Plus className=\"h-6 w-6 text-white\" />\n                </div>\n                <div>\n                  <h1 className=\"text-xl font-bold text-white\">New Deal Entry</h1>\n                  <p className=\"text-gray-300 text-sm\">Create a new vehicle deal</p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={() => handleSave(true)}\n                disabled={saving}\n                className=\"flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-colors disabled:opacity-50\"\n              >\n                {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Save className=\"h-4 w-4 mr-2\" />}\n                Save Draft\n              </button>\n              \n              <button\n                onClick={() => handleSave(false)}\n                disabled={saving}\n                className=\"flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg shadow-lg transition-colors disabled:opacity-50\"\n              >\n                {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <CheckCircle className=\"h-4 w-4 mr-2\" />}\n                Create Deal\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"relative max-w-6xl mx-auto px-6 py-8\">\n        {/* Step Indicator */}\n        {renderStepIndicator()}\n\n        {/* Form Content */}\n        <div className=\"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-8\">\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-bold text-white mb-2\">\n              {currentStep === 1 && 'Vehicle Information & Deal Type'}\n              {currentStep === 2 && 'Deal Configuration'}\n              {currentStep === 3 && dealTypeFields.showFinancials && 'Financial Information'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes'}\n              {currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Seller Information'}\n              {currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Documentation & Notes'}\n              {currentStep === 5 && 'Documentation & Notes'}\n            </h2>\n            <p className=\"text-gray-300\">\n              {currentStep === 1 && 'Enter basic vehicle information and select the deal type'}\n              {currentStep === 2 && 'Configure deal type, funding, and timeline'}\n              {currentStep === 3 && dealTypeFields.showFinancials && 'Set pricing and financial terms'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information'}\n              {currentStep === 3 && !dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes'}\n              {currentStep === 4 && dealTypeFields.showFinancials && dealTypeFields.showSellerInfo && 'Add seller contact information'}\n              {currentStep === 4 && dealTypeFields.showFinancials && !dealTypeFields.showSellerInfo && dealTypeFields.showDocumentation && 'Document status and additional notes'}\n              {currentStep === 5 && 'Document status and additional notes'}\n            </p>\n          </div>\n\n          {renderStep()}\n\n          {/* Navigation Buttons */}\n          <div className=\"flex items-center justify-between mt-8 pt-6 border-t border-white/10\">\n            <button\n              onClick={() => setCurrentStep(Math.max(1, currentStep - 1))}\n              disabled={currentStep === 1}\n              className=\"flex items-center px-4 py-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Previous\n            </button>\n\n            <div className=\"flex items-center space-x-3\">\n              {currentStep === totalSteps && formData.vehicleDescription && (\n                <button\n                  onClick={handleEmailToListingTeam}\n                  className=\"flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors\"\n                >\n                  <Send className=\"h-4 w-4 mr-2\" />\n                  Email to Listing Team\n                </button>\n              )}\n              \n              {currentStep < totalSteps ? (\n                <button\n                  onClick={() => setCurrentStep(Math.min(totalSteps, currentStep + 1))}\n                  className=\"flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg transition-colors\"\n                >\n                  Next\n                  <ArrowLeft className=\"h-4 w-4 ml-2 rotate-180\" />\n                </button>\n              ) : (\n                <button\n                  onClick={() => handleSave(false)}\n                  disabled={saving}\n                  className=\"flex items-center px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg transition-colors disabled:opacity-50\"\n                >\n                  {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <CheckCircle className=\"h-4 w-4 mr-2\" />}\n                  Submit Deal\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* VIN Decode Status */}\n        {vinDecoding && (\n          <div className=\"fixed bottom-6 right-6 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\">\n            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n            Decoding VIN...\n          </div>\n        )}\n        \n        {vinDecoded && (\n          <div className=\"fixed bottom-6 right-6 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\">\n            <CheckCircle className=\"h-4 w-4 mr-2\" />\n            VIN decoded successfully!\n          </div>\n        )}\n      </div>\n      <ToastContainer />\n    </div>\n  );\n};\n\nexport default NewDealEntry; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}