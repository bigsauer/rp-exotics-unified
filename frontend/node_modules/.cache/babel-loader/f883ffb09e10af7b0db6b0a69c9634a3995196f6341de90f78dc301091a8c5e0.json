{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[token,setToken]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Try to load user and token from localStorage\nconst storedUser=window.localStorage.getItem('user');const storedToken=window.localStorage.getItem('token');if(storedUser&&storedToken){setUser(JSON.parse(storedUser));setToken(storedToken);}setLoading(false);},[]);// Utility to get auth headers\nconst getAuthHeaders=()=>{if(token){return{'Authorization':`Bearer ${token}`};}return{};};const login=(userObj,authToken)=>{setUser(userObj);setToken(authToken);window.localStorage.setItem('user',JSON.stringify(userObj));window.localStorage.setItem('token',authToken);console.log('[AUTH] User logged in:',userObj);console.log('[AUTH] Token set:',authToken);};const logout=async()=>{try{if(token){await fetch('/api/auth/logout',{method:'POST',credentials:'include',headers:{'Authorization':`Bearer ${token}`}});}}catch(err){console.error('[AUTH] Logout error:',err);}setUser(null);setToken(null);window.localStorage.removeItem('user');window.localStorage.removeItem('token');console.log('[AUTH] User logged out');};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,token,loading,login,logout,getAuthHeaders},children:children});}export function useAuth(){return useContext(AuthContext);}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","token","setToken","loading","setLoading","storedUser","window","localStorage","getItem","storedToken","JSON","parse","getAuthHeaders","login","userObj","authToken","setItem","stringify","console","log","logout","fetch","method","credentials","headers","err","error","removeItem","Provider","value","useAuth"],"sources":["/Users/bsauer02/Desktop/Opis3.0/rp-exotics-unified/frontend/src/components/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst AuthContext = createContext();\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Try to load user and token from localStorage\n    const storedUser = window.localStorage.getItem('user');\n    const storedToken = window.localStorage.getItem('token');\n    if (storedUser && storedToken) {\n      setUser(JSON.parse(storedUser));\n      setToken(storedToken);\n    }\n    setLoading(false);\n  }, []);\n\n  // Utility to get auth headers\n  const getAuthHeaders = () => {\n    if (token) {\n      return { 'Authorization': `Bearer ${token}` };\n    }\n    return {};\n  };\n\n  const login = (userObj, authToken) => {\n    setUser(userObj);\n    setToken(authToken);\n    window.localStorage.setItem('user', JSON.stringify(userObj));\n    window.localStorage.setItem('token', authToken);\n    console.log('[AUTH] User logged in:', userObj);\n    console.log('[AUTH] Token set:', authToken);\n  };\n\n  const logout = async () => {\n    try {\n      if (token) {\n        await fetch('/api/auth/logout', { \n          method: 'POST', \n          credentials: 'include',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      }\n    } catch (err) {\n      console.error('[AUTH] Logout error:', err);\n    }\n    setUser(null);\n    setToken(null);\n    window.localStorage.removeItem('user');\n    window.localStorage.removeItem('token');\n    console.log('[AUTH] User logged out');\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, loading, login, logout, getAuthHeaders }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  return useContext(AuthContext);\n} "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAO,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAa,UAAU,CAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CACtD,KAAM,CAAAC,WAAW,CAAGH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,GAAIH,UAAU,EAAII,WAAW,CAAE,CAC7BT,OAAO,CAACU,IAAI,CAACC,KAAK,CAACN,UAAU,CAAC,CAAC,CAC/BH,QAAQ,CAACO,WAAW,CAAC,CACvB,CACAL,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAQ,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAIX,KAAK,CAAE,CACT,MAAO,CAAE,eAAe,CAAE,UAAUA,KAAK,EAAG,CAAC,CAC/C,CACA,MAAO,CAAC,CAAC,CACX,CAAC,CAED,KAAM,CAAAY,KAAK,CAAGA,CAACC,OAAO,CAAEC,SAAS,GAAK,CACpCf,OAAO,CAACc,OAAO,CAAC,CAChBZ,QAAQ,CAACa,SAAS,CAAC,CACnBT,MAAM,CAACC,YAAY,CAACS,OAAO,CAAC,MAAM,CAAEN,IAAI,CAACO,SAAS,CAACH,OAAO,CAAC,CAAC,CAC5DR,MAAM,CAACC,YAAY,CAACS,OAAO,CAAC,OAAO,CAAED,SAAS,CAAC,CAC/CG,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEL,OAAO,CAAC,CAC9CI,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEJ,SAAS,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAK,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,GAAInB,KAAK,CAAE,CACT,KAAM,CAAAoB,KAAK,CAAC,kBAAkB,CAAE,CAC9BC,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,SAAS,CACtBC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUvB,KAAK,EAClC,CACF,CAAC,CAAC,CACJ,CACF,CAAE,MAAOwB,GAAG,CAAE,CACZP,OAAO,CAACQ,KAAK,CAAC,sBAAsB,CAAED,GAAG,CAAC,CAC5C,CACAzB,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,IAAI,CAAC,CACdI,MAAM,CAACC,YAAY,CAACoB,UAAU,CAAC,MAAM,CAAC,CACtCrB,MAAM,CAACC,YAAY,CAACoB,UAAU,CAAC,OAAO,CAAC,CACvCT,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACvC,CAAC,CAED,mBACEzB,IAAA,CAACC,WAAW,CAACiC,QAAQ,EAACC,KAAK,CAAE,CAAE9B,IAAI,CAAEE,KAAK,CAAEE,OAAO,CAAEU,KAAK,CAAEO,MAAM,CAAER,cAAe,CAAE,CAAAd,QAAA,CAClFA,QAAQ,CACW,CAAC,CAE3B,CAEA,MAAO,SAAS,CAAAgC,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAAxC,UAAU,CAACK,WAAW,CAAC,CAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}